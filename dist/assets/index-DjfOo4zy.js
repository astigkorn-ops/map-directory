function Nm(d,r){for(var s=0;s<r.length;s++){const l=r[s];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in d)){const f=Object.getOwnPropertyDescriptor(l,h);f&&Object.defineProperty(d,h,f.get?f:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function s(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(h){if(h.ep)return;h.ep=!0;const f=s(h);fetch(h.href,f)}})();function Zf(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function Tm(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var r=d.default;if(typeof r=="function"){var s=function l(){var h=!1;try{h=this instanceof l}catch{}return h?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(d).forEach(function(l){var h=Object.getOwnPropertyDescriptor(d,l);Object.defineProperty(s,l,h.get?h:{enumerable:!0,get:function(){return d[l]}})}),s}var Oc={exports:{}},ka={},Ic={exports:{}},mt={};var Kh;function Lm(){if(Kh)return mt;Kh=1;var d=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),g=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.iterator;function B(M){return M===null||typeof M!="object"?null:(M=z&&M[z]||M["@@iterator"],typeof M=="function"?M:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function W(M,re,ze){this.props=M,this.context=re,this.refs=H,this.updater=ze||F}W.prototype.isReactComponent={},W.prototype.setState=function(M,re){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,re,"setState")},W.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function le(){}le.prototype=W.prototype;function _e(M,re,ze){this.props=M,this.context=re,this.refs=H,this.updater=ze||F}var Q=_e.prototype=new le;Q.constructor=_e,V(Q,W.prototype),Q.isPureReactComponent=!0;var ge=Array.isArray,be=Object.prototype.hasOwnProperty,O={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function Ye(M,re,ze){var I,D={},oe=null,he=null;if(re!=null)for(I in re.ref!==void 0&&(he=re.ref),re.key!==void 0&&(oe=""+re.key),re)be.call(re,I)&&!j.hasOwnProperty(I)&&(D[I]=re[I]);var ee=arguments.length-2;if(ee===1)D.children=ze;else if(1<ee){for(var Z=Array(ee),J=0;J<ee;J++)Z[J]=arguments[J+2];D.children=Z}if(M&&M.defaultProps)for(I in ee=M.defaultProps,ee)D[I]===void 0&&(D[I]=ee[I]);return{$$typeof:d,type:M,key:oe,ref:he,props:D,_owner:O.current}}function Ge(M,re){return{$$typeof:d,type:M.type,key:re,ref:M.ref,props:M.props,_owner:M._owner}}function ut(M){return typeof M=="object"&&M!==null&&M.$$typeof===d}function ve(M){var re={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ze){return re[ze]})}var je=/\/+/g;function We(M,re){return typeof M=="object"&&M!==null&&M.key!=null?ve(""+M.key):re.toString(36)}function se(M,re,ze,I,D){var oe=typeof M;(oe==="undefined"||oe==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(oe){case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case d:case r:he=!0}}if(he)return he=M,D=D(he),M=I===""?"."+We(he,0):I,ge(D)?(ze="",M!=null&&(ze=M.replace(je,"$&/")+"/"),se(D,re,ze,"",function(J){return J})):D!=null&&(ut(D)&&(D=Ge(D,ze+(!D.key||he&&he.key===D.key?"":(""+D.key).replace(je,"$&/")+"/")+M)),re.push(D)),1;if(he=0,I=I===""?".":I+":",ge(M))for(var ee=0;ee<M.length;ee++){oe=M[ee];var Z=I+We(oe,ee);he+=se(oe,re,ze,Z,D)}else if(Z=B(M),typeof Z=="function")for(M=Z.call(M),ee=0;!(oe=M.next()).done;)oe=oe.value,Z=I+We(oe,ee++),he+=se(oe,re,ze,Z,D);else if(oe==="object")throw re=String(M),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return he}function ne(M,re,ze){if(M==null)return M;var I=[],D=0;return se(M,I,"","",function(oe){return re.call(ze,oe,D++)}),I}function we(M){if(M._status===-1){var re=M._result;re=re(),re.then(function(ze){(M._status===0||M._status===-1)&&(M._status=1,M._result=ze)},function(ze){(M._status===0||M._status===-1)&&(M._status=2,M._result=ze)}),M._status===-1&&(M._status=0,M._result=re)}if(M._status===1)return M._result.default;throw M._result}var $e={current:null},te={transition:null},Pe={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:te,ReactCurrentOwner:O};function ie(){throw Error("act(...) is not supported in production builds of React.")}return mt.Children={map:ne,forEach:function(M,re,ze){ne(M,function(){re.apply(this,arguments)},ze)},count:function(M){var re=0;return ne(M,function(){re++}),re},toArray:function(M){return ne(M,function(re){return re})||[]},only:function(M){if(!ut(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},mt.Component=W,mt.Fragment=s,mt.Profiler=h,mt.PureComponent=_e,mt.StrictMode=l,mt.Suspense=w,mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pe,mt.act=ie,mt.cloneElement=function(M,re,ze){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var I=V({},M.props),D=M.key,oe=M.ref,he=M._owner;if(re!=null){if(re.ref!==void 0&&(oe=re.ref,he=O.current),re.key!==void 0&&(D=""+re.key),M.type&&M.type.defaultProps)var ee=M.type.defaultProps;for(Z in re)be.call(re,Z)&&!j.hasOwnProperty(Z)&&(I[Z]=re[Z]===void 0&&ee!==void 0?ee[Z]:re[Z])}var Z=arguments.length-2;if(Z===1)I.children=ze;else if(1<Z){ee=Array(Z);for(var J=0;J<Z;J++)ee[J]=arguments[J+2];I.children=ee}return{$$typeof:d,type:M.type,key:D,ref:oe,props:I,_owner:he}},mt.createContext=function(M){return M={$$typeof:g,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:f,_context:M},M.Consumer=M},mt.createElement=Ye,mt.createFactory=function(M){var re=Ye.bind(null,M);return re.type=M,re},mt.createRef=function(){return{current:null}},mt.forwardRef=function(M){return{$$typeof:_,render:M}},mt.isValidElement=ut,mt.lazy=function(M){return{$$typeof:N,_payload:{_status:-1,_result:M},_init:we}},mt.memo=function(M,re){return{$$typeof:C,type:M,compare:re===void 0?null:re}},mt.startTransition=function(M){var re=te.transition;te.transition={};try{M()}finally{te.transition=re}},mt.unstable_act=ie,mt.useCallback=function(M,re){return $e.current.useCallback(M,re)},mt.useContext=function(M){return $e.current.useContext(M)},mt.useDebugValue=function(){},mt.useDeferredValue=function(M){return $e.current.useDeferredValue(M)},mt.useEffect=function(M,re){return $e.current.useEffect(M,re)},mt.useId=function(){return $e.current.useId()},mt.useImperativeHandle=function(M,re,ze){return $e.current.useImperativeHandle(M,re,ze)},mt.useInsertionEffect=function(M,re){return $e.current.useInsertionEffect(M,re)},mt.useLayoutEffect=function(M,re){return $e.current.useLayoutEffect(M,re)},mt.useMemo=function(M,re){return $e.current.useMemo(M,re)},mt.useReducer=function(M,re,ze){return $e.current.useReducer(M,re,ze)},mt.useRef=function(M){return $e.current.useRef(M)},mt.useState=function(M){return $e.current.useState(M)},mt.useSyncExternalStore=function(M,re,ze){return $e.current.useSyncExternalStore(M,re,ze)},mt.useTransition=function(){return $e.current.useTransition()},mt.version="18.3.1",mt}var Jh;function ld(){return Jh||(Jh=1,Ic.exports=Lm()),Ic.exports}var Yh;function Om(){if(Yh)return ka;Yh=1;var d=ld(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function g(_,w,C){var N,z={},B=null,F=null;C!==void 0&&(B=""+C),w.key!==void 0&&(B=""+w.key),w.ref!==void 0&&(F=w.ref);for(N in w)l.call(w,N)&&!f.hasOwnProperty(N)&&(z[N]=w[N]);if(_&&_.defaultProps)for(N in w=_.defaultProps,w)z[N]===void 0&&(z[N]=w[N]);return{$$typeof:r,type:_,key:B,ref:F,props:z,_owner:h.current}}return ka.Fragment=s,ka.jsx=g,ka.jsxs=g,ka}var Xh;function Im(){return Xh||(Xh=1,Oc.exports=Om()),Oc.exports}var c=Im(),ae=ld(),Zl={},Rc={exports:{}},ir={},Ac={exports:{}},Mc={};var Qh;function Rm(){return Qh||(Qh=1,(function(d){function r(te,Pe){var ie=te.length;te.push(Pe);e:for(;0<ie;){var M=ie-1>>>1,re=te[M];if(0<h(re,Pe))te[M]=Pe,te[ie]=re,ie=M;else break e}}function s(te){return te.length===0?null:te[0]}function l(te){if(te.length===0)return null;var Pe=te[0],ie=te.pop();if(ie!==Pe){te[0]=ie;e:for(var M=0,re=te.length,ze=re>>>1;M<ze;){var I=2*(M+1)-1,D=te[I],oe=I+1,he=te[oe];if(0>h(D,ie))oe<re&&0>h(he,D)?(te[M]=he,te[oe]=ie,M=oe):(te[M]=D,te[I]=ie,M=I);else if(oe<re&&0>h(he,ie))te[M]=he,te[oe]=ie,M=oe;else break e}}return Pe}function h(te,Pe){var ie=te.sortIndex-Pe.sortIndex;return ie!==0?ie:te.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;d.unstable_now=function(){return f.now()}}else{var g=Date,_=g.now();d.unstable_now=function(){return g.now()-_}}var w=[],C=[],N=1,z=null,B=3,F=!1,V=!1,H=!1,W=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(te){for(var Pe=s(C);Pe!==null;){if(Pe.callback===null)l(C);else if(Pe.startTime<=te)l(C),Pe.sortIndex=Pe.expirationTime,r(w,Pe);else break;Pe=s(C)}}function ge(te){if(H=!1,Q(te),!V)if(s(w)!==null)V=!0,we(be);else{var Pe=s(C);Pe!==null&&$e(ge,Pe.startTime-te)}}function be(te,Pe){V=!1,H&&(H=!1,le(Ye),Ye=-1),F=!0;var ie=B;try{for(Q(Pe),z=s(w);z!==null&&(!(z.expirationTime>Pe)||te&&!ve());){var M=z.callback;if(typeof M=="function"){z.callback=null,B=z.priorityLevel;var re=M(z.expirationTime<=Pe);Pe=d.unstable_now(),typeof re=="function"?z.callback=re:z===s(w)&&l(w),Q(Pe)}else l(w);z=s(w)}if(z!==null)var ze=!0;else{var I=s(C);I!==null&&$e(ge,I.startTime-Pe),ze=!1}return ze}finally{z=null,B=ie,F=!1}}var O=!1,j=null,Ye=-1,Ge=5,ut=-1;function ve(){return!(d.unstable_now()-ut<Ge)}function je(){if(j!==null){var te=d.unstable_now();ut=te;var Pe=!0;try{Pe=j(!0,te)}finally{Pe?We():(O=!1,j=null)}}else O=!1}var We;if(typeof _e=="function")We=function(){_e(je)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ne=se.port2;se.port1.onmessage=je,We=function(){ne.postMessage(null)}}else We=function(){W(je,0)};function we(te){j=te,O||(O=!0,We())}function $e(te,Pe){Ye=W(function(){te(d.unstable_now())},Pe)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(te){te.callback=null},d.unstable_continueExecution=function(){V||F||(V=!0,we(be))},d.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<te?Math.floor(1e3/te):5},d.unstable_getCurrentPriorityLevel=function(){return B},d.unstable_getFirstCallbackNode=function(){return s(w)},d.unstable_next=function(te){switch(B){case 1:case 2:case 3:var Pe=3;break;default:Pe=B}var ie=B;B=Pe;try{return te()}finally{B=ie}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(te,Pe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=B;B=te;try{return Pe()}finally{B=ie}},d.unstable_scheduleCallback=function(te,Pe,ie){var M=d.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?M+ie:M):ie=M,te){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=ie+re,te={id:N++,callback:Pe,priorityLevel:te,startTime:ie,expirationTime:re,sortIndex:-1},ie>M?(te.sortIndex=ie,r(C,te),s(w)===null&&te===s(C)&&(H?(le(Ye),Ye=-1):H=!0,$e(ge,ie-M))):(te.sortIndex=re,r(w,te),V||F||(V=!0,we(be))),te},d.unstable_shouldYield=ve,d.unstable_wrapCallback=function(te){var Pe=B;return function(){var ie=B;B=Pe;try{return te.apply(this,arguments)}finally{B=ie}}}})(Mc)),Mc}var ef;function Am(){return ef||(ef=1,Ac.exports=Rm()),Ac.exports}var tf;function Mm(){if(tf)return ir;tf=1;var d=ld(),r=Am();function s(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,h={};function f(e,n){g(e,n),g(e+"Capture",n)}function g(e,n){for(h[e]=n,e=0;e<n.length;e++)l.add(n[e])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N={},z={};function B(e){return w.call(z,e)?!0:w.call(N,e)?!1:C.test(e)?z[e]=!0:(N[e]=!0,!1)}function F(e,n,o,u){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V(e,n,o,u){if(n===null||typeof n>"u"||F(e,n,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function H(e,n,o,u,m,v,E){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=E}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){W[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];W[n]=new H(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){W[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){W[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){W[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){W[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){W[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){W[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){W[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var le=/[\-:]([a-z])/g;function _e(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(le,_e);W[n]=new H(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(le,_e);W[n]=new H(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(le,_e);W[n]=new H(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),W.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){W[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function Q(e,n,o,u){var m=W.hasOwnProperty(n)?W[n]:null;(m!==null?m.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(V(n,o,m,u)&&(o=null),u||m===null?B(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):m.mustUseProperty?e[m.propertyName]=o===null?m.type===3?!1:"":o:(n=m.attributeName,u=m.attributeNamespace,o===null?e.removeAttribute(n):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,u?e.setAttributeNS(u,n,o):e.setAttribute(n,o))))}var ge=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),O=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Ye=Symbol.for("react.strict_mode"),Ge=Symbol.for("react.profiler"),ut=Symbol.for("react.provider"),ve=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),We=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),te=Symbol.iterator;function Pe(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Object.assign,M;function re(e){if(M===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);M=n&&n[1]||""}return`
`+M+e}var ze=!1;function I(e,n){if(!e||ze)return"";ze=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(X){var u=X}Reflect.construct(e,[],n)}else{try{n.call()}catch(X){u=X}e.call(n.prototype)}else{try{throw Error()}catch(X){u=X}e()}}catch(X){if(X&&u&&typeof X.stack=="string"){for(var m=X.stack.split(`
`),v=u.stack.split(`
`),E=m.length-1,T=v.length-1;1<=E&&0<=T&&m[E]!==v[T];)T--;for(;1<=E&&0<=T;E--,T--)if(m[E]!==v[T]){if(E!==1||T!==1)do if(E--,T--,0>T||m[E]!==v[T]){var U=`
`+m[E].replace(" at new "," at ");return e.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",e.displayName)),U}while(1<=E&&0<=T);break}}}finally{ze=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?re(e):""}function D(e){switch(e.tag){case 5:return re(e.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return e=I(e.type,!1),e;case 11:return e=I(e.type.render,!1),e;case 1:return e=I(e.type,!0),e;default:return""}}function oe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case O:return"Portal";case Ge:return"Profiler";case Ye:return"StrictMode";case We:return"Suspense";case se:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ve:return(e.displayName||"Context")+".Consumer";case ut:return(e._context.displayName||"Context")+".Provider";case je:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ne:return n=e.displayName||null,n!==null?n:oe(e.type)||"Memo";case we:n=e._payload,e=e._init;try{return oe(e(n))}catch{}}return null}function he(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(n);case 8:return n===Ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ee(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function J(e){var n=Z(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),u=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,v=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return m.call(this)},set:function(E){u=""+E,v.call(this,E)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Be(e){e._valueTracker||(e._valueTracker=J(e))}function Ne(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),u="";return e&&(u=Z(e)?e.checked?"true":"false":e.value),e=u,e!==o?(n.setValue(e),!0):!1}function Le(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ct(e,n){var o=n.checked;return ie({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function rt(e,n){var o=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;o=ee(n.value!=null?n.value:o),e._wrapperState={initialChecked:u,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Tt(e,n){n=n.checked,n!=null&&Q(e,"checked",n,!1)}function Et(e,n){Tt(e,n);var o=ee(n.value),u=n.type;if(o!=null)u==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?yt(e,n.type,o):n.hasOwnProperty("defaultValue")&&yt(e,n.type,ee(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function lt(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function yt(e,n,o){(n!=="number"||Le(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var xe=Array.isArray;function Je(e,n,o,u){if(e=e.options,n){n={};for(var m=0;m<o.length;m++)n["$"+o[m]]=!0;for(o=0;o<e.length;o++)m=n.hasOwnProperty("$"+e[o].value),e[o].selected!==m&&(e[o].selected=m),m&&u&&(e[o].defaultSelected=!0)}else{for(o=""+ee(o),n=null,m=0;m<e.length;m++){if(e[m].value===o){e[m].selected=!0,u&&(e[m].defaultSelected=!0);return}n!==null||e[m].disabled||(n=e[m])}n!==null&&(n.selected=!0)}}function wt(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return ie({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function x(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(s(92));if(xe(o)){if(1<o.length)throw Error(s(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:ee(o)}}function Ue(e,n){var o=ee(n.value),u=ee(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),u!=null&&(e.defaultValue=""+u)}function Me(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Kt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Kt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xt,sn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,u,m){MSApp.execUnsafeLocalFunction(function(){return e(n,o,u,m)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=xt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function yn(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var _n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wr=["Webkit","ms","Moz","O"];Object.keys(_n).forEach(function(e){wr.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),_n[n]=_n[e]})});function Ie(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||_n.hasOwnProperty(e)&&_n[e]?(""+n).trim():n+"px"}function Bn(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var u=o.indexOf("--")===0,m=Ie(o,n[o],u);o==="float"&&(o="cssFloat"),u?e.setProperty(o,m):e[o]=m}}var Ct=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nn(e,n){if(n){if(Ct[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function tn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ft=null;function st(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Re=null,$t=null,Dt=null;function wn(e){if(e=Ei(e)){if(typeof Re!="function")throw Error(s(280));var n=e.stateNode;n&&(n=uo(n),Re(e.stateNode,e.type,n))}}function xr(e){$t?Dt?Dt.push(e):Dt=[e]:$t=e}function Wt(){if($t){var e=$t,n=Dt;if(Dt=$t=null,wn(e),n)for(e=0;e<n.length;e++)wn(n[e])}}function Un(e,n){return e(n)}function Pt(){}var dt=!1;function Jt(e,n,o){if(dt)return e(n,o);dt=!0;try{return Un(e,n,o)}finally{dt=!1,($t!==null||Dt!==null)&&(Pt(),Wt())}}function on(e,n){var o=e.stateNode;if(o===null)return null;var u=uo(o);if(u===null)return null;o=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,n,typeof o));return o}var sr=!1;if(_)try{var or={};Object.defineProperty(or,"passive",{get:function(){sr=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{sr=!1}function Ii(e,n,o,u,m,v,E,T,U){var X=Array.prototype.slice.call(arguments,3);try{n.apply(o,X)}catch(me){this.onError(me)}}var Yt=!1,ke=null,Lt=!1,nn=null,Tn={onError:function(e){Yt=!0,ke=e}};function Oe(e,n,o,u,m,v,E,T,U){Yt=!1,ke=null,Ii.apply(Tn,arguments)}function Ar(e,n,o,u,m,v,E,T,U){if(Oe.apply(this,arguments),Yt){if(Yt){var X=ke;Yt=!1,ke=null}else throw Error(s(198));Lt||(Lt=!0,nn=X)}}function Ve(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function Fn(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Gn(e){if(Ve(e)!==e)throw Error(s(188))}function Kn(e){var n=e.alternate;if(!n){if(n=Ve(e),n===null)throw Error(s(188));return n!==e?null:e}for(var o=e,u=n;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return Gn(m),e;if(v===u)return Gn(m),n;v=v.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=v;else{for(var E=!1,T=m.child;T;){if(T===o){E=!0,o=m,u=v;break}if(T===u){E=!0,u=m,o=v;break}T=T.sibling}if(!E){for(T=v.child;T;){if(T===o){E=!0,o=v,u=m;break}if(T===u){E=!0,u=v,o=m;break}T=T.sibling}if(!E)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:n}function Jn(e){return e=Kn(e),e!==null?b(e):null}function b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=b(e);if(n!==null)return n;e=e.sibling}return null}var P=r.unstable_scheduleCallback,R=r.unstable_cancelCallback,ue=r.unstable_shouldYield,pe=r.unstable_requestPaint,Ee=r.unstable_now,Xe=r.unstable_getCurrentPriorityLevel,hn=r.unstable_ImmediatePriority,Xt=r.unstable_UserBlockingPriority,an=r.unstable_NormalPriority,Bt=r.unstable_LowPriority,Jr=r.unstable_IdlePriority,Yr=null,Qt=null;function ln(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Yr,e,void 0,(e.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:Mr,Ot=Math.log,hi=Math.LN2;function Mr(e){return e>>>=0,e===0?32:31-(Ot(e)/hi|0)|0}var S=64,ce=4194304;function Ce(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,n){var o=e.pendingLanes;if(o===0)return 0;var u=0,m=e.suspendedLanes,v=e.pingedLanes,E=o&268435455;if(E!==0){var T=E&~m;T!==0?u=Ce(T):(v&=E,v!==0&&(u=Ce(v)))}else E=o&~m,E!==0?u=Ce(E):v!==0&&(u=Ce(v));if(u===0)return 0;if(n!==0&&n!==u&&(n&m)===0&&(m=u&-u,v=n&-n,m>=v||m===16&&(v&4194240)!==0))return n;if((u&4)!==0&&(u|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=u;0<n;)o=31-at(n),m=1<<o,u|=e[o],n&=~m;return u}function $n(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(e,n){for(var o=e.suspendedLanes,u=e.pingedLanes,m=e.expirationTimes,v=e.pendingLanes;0<v;){var E=31-at(v),T=1<<E,U=m[E];U===-1?((T&o)===0||(T&u)!==0)&&(m[E]=$n(T,n)):U<=n&&(e.expiredLanes|=T),v&=~T}}function At(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zs(){var e=S;return S<<=1,(S&4194240)===0&&(S=64),e}function Xr(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Ln(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-at(n),e[n]=o}function It(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var u=e.eventTimes;for(e=e.expirationTimes;0<o;){var m=31-at(o),v=1<<m;n[m]=0,u[m]=-1,e[m]=-1,o&=~v}}function ar(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var u=31-at(o),m=1<<u;m&n|e[u]&n&&(e[u]|=n),o&=~m}}var gt=0;function Qr(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var zr,Sn,Ri,Ai,fi,ps=!1,Mi=[],lr=null,Dr=null,br=null,ms=new Map,it=new Map,fn=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $o(e,n){switch(e){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":ms.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":it.delete(n.pointerId)}}function pi(e,n,o,u,m,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:o,eventSystemFlags:u,nativeEvent:v,targetContainers:[m]},n!==null&&(n=Ei(n),n!==null&&Sn(n)),e):(e.eventSystemFlags|=u,n=e.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),e)}function Ho(e,n,o,u,m){switch(n){case"focusin":return lr=pi(lr,e,n,o,u,m),!0;case"dragenter":return Dr=pi(Dr,e,n,o,u,m),!0;case"mouseover":return br=pi(br,e,n,o,u,m),!0;case"pointerover":var v=m.pointerId;return ms.set(v,pi(ms.get(v)||null,e,n,o,u,m)),!0;case"gotpointercapture":return v=m.pointerId,it.set(v,pi(it.get(v)||null,e,n,o,u,m)),!0}return!1}function Vs(e){var n=bi(e.target);if(n!==null){var o=Ve(n);if(o!==null){if(n=o.tag,n===13){if(n=Fn(o),n!==null){e.blockedOn=n,fi(e.priority,function(){Ri(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Er(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Ks(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var u=new o.constructor(o.type,o);Ft=u,o.target.dispatchEvent(u),Ft=null}else return n=Ei(o),n!==null&&Sn(n),e.blockedOn=o,!1;n.shift()}return!0}function qs(e,n,o){Er(e)&&o.delete(n)}function gs(){ps=!1,lr!==null&&Er(lr)&&(lr=null),Dr!==null&&Er(Dr)&&(Dr=null),br!==null&&Er(br)&&(br=null),ms.forEach(qs),it.forEach(qs)}function Zt(e,n){e.blockedOn===n&&(e.blockedOn=null,ps||(ps=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gs)))}function ur(e){function n(m){return Zt(m,e)}if(0<Mi.length){Zt(Mi[0],e);for(var o=1;o<Mi.length;o++){var u=Mi[o];u.blockedOn===e&&(u.blockedOn=null)}}for(lr!==null&&Zt(lr,e),Dr!==null&&Zt(Dr,e),br!==null&&Zt(br,e),ms.forEach(n),it.forEach(n),o=0;o<fn.length;o++)u=fn[o],u.blockedOn===e&&(u.blockedOn=null);for(;0<fn.length&&(o=fn[0],o.blockedOn===null);)Vs(o),o.blockedOn===null&&fn.shift()}var mi=ge.ReactCurrentBatchConfig,vs=!0;function fu(e,n,o,u){var m=gt,v=mi.transition;mi.transition=null;try{gt=1,ys(e,n,o,u)}finally{gt=m,mi.transition=v}}function Ba(e,n,o,u){var m=gt,v=mi.transition;mi.transition=null;try{gt=4,ys(e,n,o,u)}finally{gt=m,mi.transition=v}}function ys(e,n,o,u){if(vs){var m=Ks(e,n,o,u);if(m===null)t(e,n,u,Gs,o),$o(e,u);else if(Ho(m,e,n,o,u))u.stopPropagation();else if($o(e,u),n&4&&-1<jt.indexOf(e)){for(;m!==null;){var v=Ei(m);if(v!==null&&zr(v),v=Ks(e,n,o,u),v===null&&t(e,n,u,Gs,o),v===m)break;m=v}m!==null&&u.stopPropagation()}else t(e,n,u,null,o)}}var Gs=null;function Ks(e,n,o,u){if(Gs=null,e=st(u),e=bi(e),e!==null)if(n=Ve(e),n===null)e=null;else if(o=n.tag,o===13){if(e=Fn(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Gs=e,null}function vt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case hn:return 1;case Xt:return 4;case an:case Bt:return 16;case Jr:return 536870912;default:return 16}default:return 16}}var ei=null,Hn=null,ti=null;function Wo(){if(ti)return ti;var e,n=Hn,o=n.length,u,m="value"in ei?ei.value:ei.textContent,v=m.length;for(e=0;e<o&&n[e]===m[e];e++);var E=o-e;for(u=1;u<=E&&n[o-u]===m[v-u];u++);return ti=m.slice(e,1<u?1-u:void 0)}function Js(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function zi(){return!0}function Ua(){return!1}function On(e){function n(o,u,m,v,E){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(o=e[T],this[T]=o?o(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zi:Ua,this.isPropagationStopped=Ua,this}return ie(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),n}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=On(Di),gi=ie({},Di,{view:0,detail:0}),pu=On(gi),Yn,Vo,Bi,cr=ie({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bi&&(Bi&&e.type==="mousemove"?(Yn=e.screenX-Bi.screenX,Vo=e.screenY-Bi.screenY):Vo=Yn=0,Bi=e),Yn)},movementY:function(e){return"movementY"in e?e.movementY:Vo}}),qo=On(cr),Fa=ie({},cr,{dataTransfer:0}),Go=On(Fa),mu=ie({},gi,{relatedTarget:0}),Ys=On(mu),$a=ie({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),gu=On($a),vu=ie({},Di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ko=On(vu),yu=ie({},Di,{data:0}),Jo=On(yu),Ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _u(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=vi[e])?!!n[e]:!1}function yi(){return _u}var Xn=ie({},gi,{key:function(e){if(e.key){var n=Ha[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yi,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wa=On(Xn),Za=ie({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=On(Za),Yo=ie({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yi}),Xo=On(Yo),wu=ie({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=On(wu),qa=ie({},cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bu=On(qa),dr=[9,13,27,32],ni=_&&"CompositionEvent"in window,_s=null;_&&"documentMode"in document&&(_s=document.documentMode);var Br=_&&"TextEvent"in window&&!_s,Ga=_&&(!ni||_s&&8<_s&&11>=_s),_i=" ",Ka=!1;function Ui(e,n){switch(e){case"keyup":return dr.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function Eu(e,n){switch(e){case"compositionend":return Qo(n);case"keypress":return n.which!==32?null:(Ka=!0,_i);case"textInput":return e=n.data,e===_i&&Ka?null:e;default:return null}}function ri(e,n){if(Ur)return e==="compositionend"||!ni&&Ui(e,n)?(e=Wo(),ti=Hn=ei=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ga&&n.locale!=="ko"?null:n.data;default:return null}}var Qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ja(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Qs[e.type]:n==="textarea"}function eo(e,n,o,u){xr(u),n=a(n,"onChange"),0<n.length&&(o=new Zo("onChange","change",null,o,u),e.push({event:o,listeners:n}))}var ws=null,Wn=null;function Su(e){la(e,0)}function Fr(e){var n=Si(e);if(Ne(n))return e}function ku(e,n){if(e==="change")return n}var Sr=!1;if(_){var Fi;if(_){var to="oninput"in document;if(!to){var no=document.createElement("div");no.setAttribute("oninput","return;"),to=typeof no.oninput=="function"}Fi=to}else Fi=!1;Sr=Fi&&(!document.documentMode||9<document.documentMode)}function xs(){ws&&(ws.detachEvent("onpropertychange",ro),Wn=ws=null)}function ro(e){if(e.propertyName==="value"&&Fr(Wn)){var n=[];eo(n,Wn,e,st(e)),Jt(Su,n)}}function io(e,n,o){e==="focusin"?(xs(),ws=n,Wn=o,ws.attachEvent("onpropertychange",ro)):e==="focusout"&&xs()}function $i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fr(Wn)}function so(e,n){if(e==="click")return Fr(n)}function ea(e,n){if(e==="input"||e==="change")return Fr(n)}function Ya(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var hr=typeof Object.is=="function"?Object.is:Ya;function ii(e,n){if(hr(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),u=Object.keys(n);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!w.call(n,m)||!hr(e[m],n[m]))return!1}return!0}function Xa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ta(e,n){var o=Xa(e);e=0;for(var u;o;){if(o.nodeType===3){if(u=e+o.textContent.length,e<=n&&u>=n)return{node:o,offset:n-e};e=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xa(o)}}function Qa(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Qa(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function na(){for(var e=window,n=Le();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=Le(e.document)}return n}function ra(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function kr(e){var n=na(),o=e.focusedElem,u=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&Qa(o.ownerDocument.documentElement,o)){if(u!==null&&ra(o)){if(n=u.start,e=u.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var m=o.textContent.length,v=Math.min(u.start,m);u=u.end===void 0?v:Math.min(u.end,m),!e.extend&&v>u&&(m=u,u=v,v=m),m=ta(o,v);var E=ta(o,u);m&&E&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),e.removeAllRanges(),v>u?(e.addRange(n),e.extend(E.node,E.offset)):(n.setEnd(E.node,E.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oo=_&&"documentMode"in document&&11>=document.documentMode,Hi=null,Wi=null,bs=null,ao=!1;function el(e,n,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ao||Hi==null||Hi!==Le(u)||(u=Hi,"selectionStart"in u&&ra(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),bs&&ii(bs,u)||(bs=u,u=a(Wi,"onSelect"),0<u.length&&(n=new Zo("onSelect","select",null,n,o),e.push({event:n,listeners:u}),n.target=Hi)))}function si(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var Zi={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionend:si("Transition","TransitionEnd")},oi={},ia={};_&&(ia=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Es(e){if(oi[e])return oi[e];if(!Zi[e])return e;var n=Zi[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in ia)return oi[e]=n[o];return e}var tl=Es("animationend"),Cr=Es("animationiteration"),sa=Es("animationstart"),oa=Es("transitionend"),Vi=new Map,nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,n){Vi.set(e,n),f(n,[e])}for(var wi=0;wi<nl.length;wi++){var lo=nl[wi],rl=lo.toLowerCase(),Cu=lo[0].toUpperCase()+lo.slice(1);fr(rl,"on"+Cu)}fr(tl,"onAnimationEnd"),fr(Cr,"onAnimationIteration"),fr(sa,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(oa,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),il=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function aa(e,n,o){var u=e.type||"unknown-event";e.currentTarget=o,Ar(u,n,void 0,e),e.currentTarget=null}function la(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var u=e[o],m=u.event;u=u.listeners;e:{var v=void 0;if(n)for(var E=u.length-1;0<=E;E--){var T=u[E],U=T.instance,X=T.currentTarget;if(T=T.listener,U!==v&&m.isPropagationStopped())break e;aa(m,T,X),v=U}else for(E=0;E<u.length;E++){if(T=u[E],U=T.instance,X=T.currentTarget,T=T.listener,U!==v&&m.isPropagationStopped())break e;aa(m,T,X),v=U}}}if(Lt)throw e=nn,Lt=!1,nn=null,e}function Nt(e,n){var o=n[Yi];o===void 0&&(o=n[Yi]=new Set);var u=e+"__bubble";o.has(u)||(sl(n,e,2,!1),o.add(u))}function ua(e,n,o){var u=0;n&&(u|=4),sl(o,e,u,n)}var Ss="_reactListening"+Math.random().toString(36).slice(2);function Gi(e){if(!e[Ss]){e[Ss]=!0,l.forEach(function(o){o!=="selectionchange"&&(il.has(o)||ua(o,!1,e),ua(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ss]||(n[Ss]=!0,ua("selectionchange",!1,n))}}function sl(e,n,o,u){switch(vt(n)){case 1:var m=fu;break;case 4:m=Ba;break;default:m=ys}o=m.bind(null,n,o,e),m=void 0,!sr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),u?m!==void 0?e.addEventListener(n,o,{capture:!0,passive:m}):e.addEventListener(n,o,!0):m!==void 0?e.addEventListener(n,o,{passive:m}):e.addEventListener(n,o,!1)}function t(e,n,o,u,m){var v=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var T=u.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(E===4)for(E=u.return;E!==null;){var U=E.tag;if((U===3||U===4)&&(U=E.stateNode.containerInfo,U===m||U.nodeType===8&&U.parentNode===m))return;E=E.return}for(;T!==null;){if(E=bi(T),E===null)return;if(U=E.tag,U===5||U===6){u=v=E;continue e}T=T.parentNode}}u=u.return}Jt(function(){var X=v,me=st(o),ye=[];e:{var fe=Vi.get(e);if(fe!==void 0){var Ae=Zo,He=e;switch(e){case"keypress":if(Js(o)===0)break e;case"keydown":case"keyup":Ae=Wa;break;case"focusin":He="focus",Ae=Ys;break;case"focusout":He="blur",Ae=Ys;break;case"beforeblur":case"afterblur":Ae=Ys;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Go;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=Xo;break;case tl:case Cr:case sa:Ae=gu;break;case oa:Ae=xu;break;case"scroll":Ae=pu;break;case"wheel":Ae=bu;break;case"copy":case"cut":case"paste":Ae=Ko;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Va}var Ze=(n&4)!==0,rn=!Ze&&e==="scroll",G=Ze?fe!==null?fe+"Capture":null:fe;Ze=[];for(var $=X,K;$!==null;){K=$;var Se=K.stateNode;if(K.tag===5&&Se!==null&&(K=Se,G!==null&&(Se=on($,G),Se!=null&&Ze.push(i($,Se,K)))),rn)break;$=$.return}0<Ze.length&&(fe=new Ae(fe,He,null,o,me),ye.push({event:fe,listeners:Ze}))}}if((n&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",Ae=e==="mouseout"||e==="pointerout",fe&&o!==Ft&&(He=o.relatedTarget||o.fromElement)&&(bi(He)||He[kt]))break e;if((Ae||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ae?(He=o.relatedTarget||o.toElement,Ae=X,He=He?bi(He):null,He!==null&&(rn=Ve(He),He!==rn||He.tag!==5&&He.tag!==6)&&(He=null)):(Ae=null,He=X),Ae!==He)){if(Ze=qo,Se="onMouseLeave",G="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(Ze=Va,Se="onPointerLeave",G="onPointerEnter",$="pointer"),rn=Ae==null?fe:Si(Ae),K=He==null?fe:Si(He),fe=new Ze(Se,$+"leave",Ae,o,me),fe.target=rn,fe.relatedTarget=K,Se=null,bi(me)===X&&(Ze=new Ze(G,$+"enter",He,o,me),Ze.target=K,Ze.relatedTarget=rn,Se=Ze),rn=Se,Ae&&He)t:{for(Ze=Ae,G=He,$=0,K=Ze;K;K=p(K))$++;for(K=0,Se=G;Se;Se=p(Se))K++;for(;0<$-K;)Ze=p(Ze),$--;for(;0<K-$;)G=p(G),K--;for(;$--;){if(Ze===G||G!==null&&Ze===G.alternate)break t;Ze=p(Ze),G=p(G)}Ze=null}else Ze=null;Ae!==null&&y(ye,fe,Ae,Ze,!1),He!==null&&rn!==null&&y(ye,rn,He,Ze,!0)}}e:{if(fe=X?Si(X):window,Ae=fe.nodeName&&fe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&fe.type==="file")var qe=ku;else if(Ja(fe))if(Sr)qe=ea;else{qe=$i;var et=io}else(Ae=fe.nodeName)&&Ae.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(qe=so);if(qe&&(qe=qe(e,X))){eo(ye,qe,o,me);break e}et&&et(e,fe,X),e==="focusout"&&(et=fe._wrapperState)&&et.controlled&&fe.type==="number"&&yt(fe,"number",fe.value)}switch(et=X?Si(X):window,e){case"focusin":(Ja(et)||et.contentEditable==="true")&&(Hi=et,Wi=X,bs=null);break;case"focusout":bs=Wi=Hi=null;break;case"mousedown":ao=!0;break;case"contextmenu":case"mouseup":case"dragend":ao=!1,el(ye,o,me);break;case"selectionchange":if(oo)break;case"keydown":case"keyup":el(ye,o,me)}var tt;if(ni)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Ur?Ui(e,o)&&(ot="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(ot="onCompositionStart");ot&&(Ga&&o.locale!=="ko"&&(Ur||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Ur&&(tt=Wo()):(ei=me,Hn="value"in ei?ei.value:ei.textContent,Ur=!0)),et=a(X,ot),0<et.length&&(ot=new Jo(ot,e,null,o,me),ye.push({event:ot,listeners:et}),tt?ot.data=tt:(tt=Qo(o),tt!==null&&(ot.data=tt)))),(tt=Br?Eu(e,o):ri(e,o))&&(X=a(X,"onBeforeInput"),0<X.length&&(me=new Jo("onBeforeInput","beforeinput",null,o,me),ye.push({event:me,listeners:X}),me.data=tt))}la(ye,n)})}function i(e,n,o){return{instance:e,listener:n,currentTarget:o}}function a(e,n){for(var o=n+"Capture",u=[];e!==null;){var m=e,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=on(e,o),v!=null&&u.unshift(i(e,v,m)),v=on(e,n),v!=null&&u.push(i(e,v,m))),e=e.return}return u}function p(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y(e,n,o,u,m){for(var v=n._reactName,E=[];o!==null&&o!==u;){var T=o,U=T.alternate,X=T.stateNode;if(U!==null&&U===u)break;T.tag===5&&X!==null&&(T=X,m?(U=on(o,v),U!=null&&E.unshift(i(o,U,T))):m||(U=on(o,v),U!=null&&E.push(i(o,U,T)))),o=o.return}E.length!==0&&e.push({event:n,listeners:E})}var k=/\r\n?/g,A=/\u0000|\uFFFD/g;function q(e){return(typeof e=="string"?e:""+e).replace(k,`
`).replace(A,"")}function Y(e,n,o){if(n=q(n),q(e)!==n&&o)throw Error(s(425))}function de(){}var Te=null,Qe=null;function ft(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var pn=typeof setTimeout=="function"?setTimeout:void 0,un=typeof clearTimeout=="function"?clearTimeout:void 0,Zn=typeof Promise=="function"?Promise:void 0,In=typeof queueMicrotask=="function"?queueMicrotask:typeof Zn<"u"?function(e){return Zn.resolve(null).then(e).catch(Ki)}:pn;function Ki(e){setTimeout(function(){throw e})}function ca(e,n){var o=n,u=0;do{var m=o.nextSibling;if(e.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(u===0){e.removeChild(m),ur(n);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=m}while(o);ur(n)}function ai(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ol(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Pr="__reactFiber$"+xi,Ji="__reactProps$"+xi,kt="__reactContainer$"+xi,Yi="__reactEvents$"+xi,Pu="__reactListeners$"+xi,ju="__reactHandles$"+xi;function bi(e){var n=e[Pr];if(n)return n;for(var o=e.parentNode;o;){if(n=o[kt]||o[Pr]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=ol(e);e!==null;){if(o=e[Pr])return o;e=ol(e)}return n}e=o,o=e.parentNode}return null}function Ei(e){return e=e[Pr]||e[kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Si(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function uo(e){return e[Ji]||null}var Nu=[],co=-1;function Xi(e){return{current:e}}function Ut(e){0>co||(e.current=Nu[co],Nu[co]=null,co--)}function Mt(e,n){co++,Nu[co]=e.current,e.current=n}var Qi={},Rn=Xi(Qi),Qn=Xi(!1),ks=Qi;function ho(e,n){var o=e.type.contextTypes;if(!o)return Qi;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in o)m[v]=n[v];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=m),m}function er(e){return e=e.childContextTypes,e!=null}function al(){Ut(Qn),Ut(Rn)}function vd(e,n,o){if(Rn.current!==Qi)throw Error(s(168));Mt(Rn,n),Mt(Qn,o)}function yd(e,n,o){var u=e.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var m in u)if(!(m in n))throw Error(s(108,he(e)||"Unknown",m));return ie({},o,u)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qi,ks=Rn.current,Mt(Rn,e),Mt(Qn,Qn.current),!0}function _d(e,n,o){var u=e.stateNode;if(!u)throw Error(s(169));o?(e=yd(e,n,ks),u.__reactInternalMemoizedMergedChildContext=e,Ut(Qn),Ut(Rn),Mt(Rn,e)):Ut(Qn),Mt(Qn,o)}var ki=null,ul=!1,Tu=!1;function wd(e){ki===null?ki=[e]:ki.push(e)}function Gp(e){ul=!0,wd(e)}function es(){if(!Tu&&ki!==null){Tu=!0;var e=0,n=gt;try{var o=ki;for(gt=1;e<o.length;e++){var u=o[e];do u=u(!0);while(u!==null)}ki=null,ul=!1}catch(m){throw ki!==null&&(ki=ki.slice(e+1)),P(hn,es),m}finally{gt=n,Tu=!1}}return null}var fo=[],po=0,cl=null,dl=0,jr=[],Nr=0,Cs=null,Ci=1,Pi="";function Ps(e,n){fo[po++]=dl,fo[po++]=cl,cl=e,dl=n}function xd(e,n,o){jr[Nr++]=Ci,jr[Nr++]=Pi,jr[Nr++]=Cs,Cs=e;var u=Ci;e=Pi;var m=32-at(u)-1;u&=~(1<<m),o+=1;var v=32-at(n)+m;if(30<v){var E=m-m%5;v=(u&(1<<E)-1).toString(32),u>>=E,m-=E,Ci=1<<32-at(n)+m|o<<m|u,Pi=v+e}else Ci=1<<v|o<<m|u,Pi=e}function Lu(e){e.return!==null&&(Ps(e,1),xd(e,1,0))}function Ou(e){for(;e===cl;)cl=fo[--po],fo[po]=null,dl=fo[--po],fo[po]=null;for(;e===Cs;)Cs=jr[--Nr],jr[Nr]=null,Pi=jr[--Nr],jr[Nr]=null,Ci=jr[--Nr],jr[Nr]=null}var pr=null,mr=null,Ht=!1,$r=null;function bd(e,n){var o=Ir(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function Ed(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,pr=e,mr=ai(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,pr=e,mr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Cs!==null?{id:Ci,overflow:Pi}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Ir(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,pr=e,mr=null,!0):!1;default:return!1}}function Iu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ru(e){if(Ht){var n=mr;if(n){var o=n;if(!Ed(e,n)){if(Iu(e))throw Error(s(418));n=ai(o.nextSibling);var u=pr;n&&Ed(e,n)?bd(u,o):(e.flags=e.flags&-4097|2,Ht=!1,pr=e)}}else{if(Iu(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ht=!1,pr=e}}}function Sd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pr=e}function hl(e){if(e!==pr)return!1;if(!Ht)return Sd(e),Ht=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ft(e.type,e.memoizedProps)),n&&(n=mr)){if(Iu(e))throw kd(),Error(s(418));for(;n;)bd(e,n),n=ai(n.nextSibling)}if(Sd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){mr=ai(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}mr=null}}else mr=pr?ai(e.stateNode.nextSibling):null;return!0}function kd(){for(var e=mr;e;)e=ai(e.nextSibling)}function mo(){mr=pr=null,Ht=!1}function Au(e){$r===null?$r=[e]:$r.push(e)}var Kp=ge.ReactCurrentBatchConfig;function da(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(s(309));var u=o.stateNode}if(!u)throw Error(s(147,e));var m=u,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(E){var T=m.refs;E===null?delete T[v]:T[v]=E},n._stringRef=v,n)}if(typeof e!="string")throw Error(s(284));if(!o._owner)throw Error(s(290,e))}return e}function fl(e,n){throw e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Cd(e){var n=e._init;return n(e._payload)}function Pd(e){function n(G,$){if(e){var K=G.deletions;K===null?(G.deletions=[$],G.flags|=16):K.push($)}}function o(G,$){if(!e)return null;for(;$!==null;)n(G,$),$=$.sibling;return null}function u(G,$){for(G=new Map;$!==null;)$.key!==null?G.set($.key,$):G.set($.index,$),$=$.sibling;return G}function m(G,$){return G=ls(G,$),G.index=0,G.sibling=null,G}function v(G,$,K){return G.index=K,e?(K=G.alternate,K!==null?(K=K.index,K<$?(G.flags|=2,$):K):(G.flags|=2,$)):(G.flags|=1048576,$)}function E(G){return e&&G.alternate===null&&(G.flags|=2),G}function T(G,$,K,Se){return $===null||$.tag!==6?($=Cc(K,G.mode,Se),$.return=G,$):($=m($,K),$.return=G,$)}function U(G,$,K,Se){var qe=K.type;return qe===j?me(G,$,K.props.children,Se,K.key):$!==null&&($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===we&&Cd(qe)===$.type)?(Se=m($,K.props),Se.ref=da(G,$,K),Se.return=G,Se):(Se=zl(K.type,K.key,K.props,null,G.mode,Se),Se.ref=da(G,$,K),Se.return=G,Se)}function X(G,$,K,Se){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=Pc(K,G.mode,Se),$.return=G,$):($=m($,K.children||[]),$.return=G,$)}function me(G,$,K,Se,qe){return $===null||$.tag!==7?($=As(K,G.mode,Se,qe),$.return=G,$):($=m($,K),$.return=G,$)}function ye(G,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Cc(""+$,G.mode,K),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case be:return K=zl($.type,$.key,$.props,null,G.mode,K),K.ref=da(G,null,$),K.return=G,K;case O:return $=Pc($,G.mode,K),$.return=G,$;case we:var Se=$._init;return ye(G,Se($._payload),K)}if(xe($)||Pe($))return $=As($,G.mode,K,null),$.return=G,$;fl(G,$)}return null}function fe(G,$,K,Se){var qe=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return qe!==null?null:T(G,$,""+K,Se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case be:return K.key===qe?U(G,$,K,Se):null;case O:return K.key===qe?X(G,$,K,Se):null;case we:return qe=K._init,fe(G,$,qe(K._payload),Se)}if(xe(K)||Pe(K))return qe!==null?null:me(G,$,K,Se,null);fl(G,K)}return null}function Ae(G,$,K,Se,qe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return G=G.get(K)||null,T($,G,""+Se,qe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case be:return G=G.get(Se.key===null?K:Se.key)||null,U($,G,Se,qe);case O:return G=G.get(Se.key===null?K:Se.key)||null,X($,G,Se,qe);case we:var et=Se._init;return Ae(G,$,K,et(Se._payload),qe)}if(xe(Se)||Pe(Se))return G=G.get(K)||null,me($,G,Se,qe,null);fl($,Se)}return null}function He(G,$,K,Se){for(var qe=null,et=null,tt=$,ot=$=0,En=null;tt!==null&&ot<K.length;ot++){tt.index>ot?(En=tt,tt=null):En=tt.sibling;var bt=fe(G,tt,K[ot],Se);if(bt===null){tt===null&&(tt=En);break}e&&tt&&bt.alternate===null&&n(G,tt),$=v(bt,$,ot),et===null?qe=bt:et.sibling=bt,et=bt,tt=En}if(ot===K.length)return o(G,tt),Ht&&Ps(G,ot),qe;if(tt===null){for(;ot<K.length;ot++)tt=ye(G,K[ot],Se),tt!==null&&($=v(tt,$,ot),et===null?qe=tt:et.sibling=tt,et=tt);return Ht&&Ps(G,ot),qe}for(tt=u(G,tt);ot<K.length;ot++)En=Ae(tt,G,ot,K[ot],Se),En!==null&&(e&&En.alternate!==null&&tt.delete(En.key===null?ot:En.key),$=v(En,$,ot),et===null?qe=En:et.sibling=En,et=En);return e&&tt.forEach(function(us){return n(G,us)}),Ht&&Ps(G,ot),qe}function Ze(G,$,K,Se){var qe=Pe(K);if(typeof qe!="function")throw Error(s(150));if(K=qe.call(K),K==null)throw Error(s(151));for(var et=qe=null,tt=$,ot=$=0,En=null,bt=K.next();tt!==null&&!bt.done;ot++,bt=K.next()){tt.index>ot?(En=tt,tt=null):En=tt.sibling;var us=fe(G,tt,bt.value,Se);if(us===null){tt===null&&(tt=En);break}e&&tt&&us.alternate===null&&n(G,tt),$=v(us,$,ot),et===null?qe=us:et.sibling=us,et=us,tt=En}if(bt.done)return o(G,tt),Ht&&Ps(G,ot),qe;if(tt===null){for(;!bt.done;ot++,bt=K.next())bt=ye(G,bt.value,Se),bt!==null&&($=v(bt,$,ot),et===null?qe=bt:et.sibling=bt,et=bt);return Ht&&Ps(G,ot),qe}for(tt=u(G,tt);!bt.done;ot++,bt=K.next())bt=Ae(tt,G,ot,bt.value,Se),bt!==null&&(e&&bt.alternate!==null&&tt.delete(bt.key===null?ot:bt.key),$=v(bt,$,ot),et===null?qe=bt:et.sibling=bt,et=bt);return e&&tt.forEach(function(jm){return n(G,jm)}),Ht&&Ps(G,ot),qe}function rn(G,$,K,Se){if(typeof K=="object"&&K!==null&&K.type===j&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case be:e:{for(var qe=K.key,et=$;et!==null;){if(et.key===qe){if(qe=K.type,qe===j){if(et.tag===7){o(G,et.sibling),$=m(et,K.props.children),$.return=G,G=$;break e}}else if(et.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===we&&Cd(qe)===et.type){o(G,et.sibling),$=m(et,K.props),$.ref=da(G,et,K),$.return=G,G=$;break e}o(G,et);break}else n(G,et);et=et.sibling}K.type===j?($=As(K.props.children,G.mode,Se,K.key),$.return=G,G=$):(Se=zl(K.type,K.key,K.props,null,G.mode,Se),Se.ref=da(G,$,K),Se.return=G,G=Se)}return E(G);case O:e:{for(et=K.key;$!==null;){if($.key===et)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){o(G,$.sibling),$=m($,K.children||[]),$.return=G,G=$;break e}else{o(G,$);break}else n(G,$);$=$.sibling}$=Pc(K,G.mode,Se),$.return=G,G=$}return E(G);case we:return et=K._init,rn(G,$,et(K._payload),Se)}if(xe(K))return He(G,$,K,Se);if(Pe(K))return Ze(G,$,K,Se);fl(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(o(G,$.sibling),$=m($,K),$.return=G,G=$):(o(G,$),$=Cc(K,G.mode,Se),$.return=G,G=$),E(G)):o(G,$)}return rn}var go=Pd(!0),jd=Pd(!1),pl=Xi(null),ml=null,vo=null,Mu=null;function zu(){Mu=vo=ml=null}function Du(e){var n=pl.current;Ut(pl),e._currentValue=n}function Bu(e,n,o){for(;e!==null;){var u=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),e===o)break;e=e.return}}function yo(e,n){ml=e,Mu=vo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(tr=!0),e.firstContext=null)}function Tr(e){var n=e._currentValue;if(Mu!==e)if(e={context:e,memoizedValue:n,next:null},vo===null){if(ml===null)throw Error(s(308));vo=e,ml.dependencies={lanes:0,firstContext:e}}else vo=vo.next=e;return n}var js=null;function Uu(e){js===null?js=[e]:js.push(e)}function Nd(e,n,o,u){var m=n.interleaved;return m===null?(o.next=o,Uu(n)):(o.next=m.next,m.next=o),n.interleaved=o,ji(e,u)}function ji(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}var ts=!1;function Fu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Td(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ni(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ns(e,n,o){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(_t&2)!==0){var m=u.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),u.pending=n,ji(e,o)}return m=u.interleaved,m===null?(n.next=n,Uu(u)):(n.next=m.next,m.next=n),u.interleaved=n,ji(e,o)}function gl(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var u=n.lanes;u&=e.pendingLanes,o|=u,n.lanes=o,ar(e,o)}}function Ld(e,n){var o=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var E={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};v===null?m=v=E:v=v.next=E,o=o.next}while(o!==null);v===null?m=v=n:v=v.next=n}else m=v=n;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:u.shared,effects:u.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function vl(e,n,o,u){var m=e.updateQueue;ts=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var U=T,X=U.next;U.next=null,E===null?v=X:E.next=X,E=U;var me=e.alternate;me!==null&&(me=me.updateQueue,T=me.lastBaseUpdate,T!==E&&(T===null?me.firstBaseUpdate=X:T.next=X,me.lastBaseUpdate=U))}if(v!==null){var ye=m.baseState;E=0,me=X=U=null,T=v;do{var fe=T.lane,Ae=T.eventTime;if((u&fe)===fe){me!==null&&(me=me.next={eventTime:Ae,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var He=e,Ze=T;switch(fe=n,Ae=o,Ze.tag){case 1:if(He=Ze.payload,typeof He=="function"){ye=He.call(Ae,ye,fe);break e}ye=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ze.payload,fe=typeof He=="function"?He.call(Ae,ye,fe):He,fe==null)break e;ye=ie({},ye,fe);break e;case 2:ts=!0}}T.callback!==null&&T.lane!==0&&(e.flags|=64,fe=m.effects,fe===null?m.effects=[T]:fe.push(T))}else Ae={eventTime:Ae,lane:fe,tag:T.tag,payload:T.payload,callback:T.callback,next:null},me===null?(X=me=Ae,U=ye):me=me.next=Ae,E|=fe;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;fe=T,T=fe.next,fe.next=null,m.lastBaseUpdate=fe,m.shared.pending=null}}while(!0);if(me===null&&(U=ye),m.baseState=U,m.firstBaseUpdate=X,m.lastBaseUpdate=me,n=m.shared.interleaved,n!==null){m=n;do E|=m.lane,m=m.next;while(m!==n)}else v===null&&(m.shared.lanes=0);Ls|=E,e.lanes=E,e.memoizedState=ye}}function Od(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var u=e[n],m=u.callback;if(m!==null){if(u.callback=null,u=o,typeof m!="function")throw Error(s(191,m));m.call(u)}}}var ha={},li=Xi(ha),fa=Xi(ha),pa=Xi(ha);function Ns(e){if(e===ha)throw Error(s(174));return e}function $u(e,n){switch(Mt(pa,n),Mt(fa,e),Mt(li,ha),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Rt(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Rt(n,e)}Ut(li),Mt(li,n)}function _o(){Ut(li),Ut(fa),Ut(pa)}function Id(e){Ns(pa.current);var n=Ns(li.current),o=Rt(n,e.type);n!==o&&(Mt(fa,e),Mt(li,o))}function Hu(e){fa.current===e&&(Ut(li),Ut(fa))}var Vt=Xi(0);function yl(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Wu=[];function Zu(){for(var e=0;e<Wu.length;e++)Wu[e]._workInProgressVersionPrimary=null;Wu.length=0}var _l=ge.ReactCurrentDispatcher,Vu=ge.ReactCurrentBatchConfig,Ts=0,qt=null,mn=null,xn=null,wl=!1,ma=!1,ga=0,Jp=0;function An(){throw Error(s(321))}function qu(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!hr(e[o],n[o]))return!1;return!0}function Gu(e,n,o,u,m,v){if(Ts=v,qt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_l.current=e===null||e.memoizedState===null?em:tm,e=o(u,m),ma){v=0;do{if(ma=!1,ga=0,25<=v)throw Error(s(301));v+=1,xn=mn=null,n.updateQueue=null,_l.current=nm,e=o(u,m)}while(ma)}if(_l.current=El,n=mn!==null&&mn.next!==null,Ts=0,xn=mn=qt=null,wl=!1,n)throw Error(s(300));return e}function Ku(){var e=ga!==0;return ga=0,e}function ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?qt.memoizedState=xn=e:xn=xn.next=e,xn}function Lr(){if(mn===null){var e=qt.alternate;e=e!==null?e.memoizedState:null}else e=mn.next;var n=xn===null?qt.memoizedState:xn.next;if(n!==null)xn=n,mn=e;else{if(e===null)throw Error(s(310));mn=e,e={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},xn===null?qt.memoizedState=xn=e:xn=xn.next=e}return xn}function va(e,n){return typeof n=="function"?n(e):n}function Ju(e){var n=Lr(),o=n.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var u=mn,m=u.baseQueue,v=o.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}u.baseQueue=m=v,o.pending=null}if(m!==null){v=m.next,u=u.baseState;var T=E=null,U=null,X=v;do{var me=X.lane;if((Ts&me)===me)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),u=X.hasEagerState?X.eagerState:e(u,X.action);else{var ye={lane:me,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(T=U=ye,E=u):U=U.next=ye,qt.lanes|=me,Ls|=me}X=X.next}while(X!==null&&X!==v);U===null?E=u:U.next=T,hr(u,n.memoizedState)||(tr=!0),n.memoizedState=u,n.baseState=E,n.baseQueue=U,o.lastRenderedState=u}if(e=o.interleaved,e!==null){m=e;do v=m.lane,qt.lanes|=v,Ls|=v,m=m.next;while(m!==e)}else m===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Yu(e){var n=Lr(),o=n.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var u=o.dispatch,m=o.pending,v=n.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do v=e(v,E.action),E=E.next;while(E!==m);hr(v,n.memoizedState)||(tr=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),o.lastRenderedState=v}return[v,u]}function Rd(){}function Ad(e,n){var o=qt,u=Lr(),m=n(),v=!hr(u.memoizedState,m);if(v&&(u.memoizedState=m,tr=!0),u=u.queue,Xu(Dd.bind(null,o,u,e),[e]),u.getSnapshot!==n||v||xn!==null&&xn.memoizedState.tag&1){if(o.flags|=2048,ya(9,zd.bind(null,o,u,m,n),void 0,null),bn===null)throw Error(s(349));(Ts&30)!==0||Md(o,n,m)}return m}function Md(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=qt.updateQueue,n===null?(n={lastEffect:null,stores:null},qt.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function zd(e,n,o,u){n.value=o,n.getSnapshot=u,Bd(n)&&Ud(e)}function Dd(e,n,o){return o(function(){Bd(n)&&Ud(e)})}function Bd(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!hr(e,o)}catch{return!0}}function Ud(e){var n=ji(e,1);n!==null&&Vr(n,e,1,-1)}function Fd(e){var n=ui();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},n.queue=e,e=e.dispatch=Qp.bind(null,qt,e),[n.memoizedState,e]}function ya(e,n,o,u){return e={tag:e,create:n,destroy:o,deps:u,next:null},n=qt.updateQueue,n===null?(n={lastEffect:null,stores:null},qt.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(u=o.next,o.next=e,e.next=u,n.lastEffect=e)),e}function $d(){return Lr().memoizedState}function xl(e,n,o,u){var m=ui();qt.flags|=e,m.memoizedState=ya(1|n,o,void 0,u===void 0?null:u)}function bl(e,n,o,u){var m=Lr();u=u===void 0?null:u;var v=void 0;if(mn!==null){var E=mn.memoizedState;if(v=E.destroy,u!==null&&qu(u,E.deps)){m.memoizedState=ya(n,o,v,u);return}}qt.flags|=e,m.memoizedState=ya(1|n,o,v,u)}function Hd(e,n){return xl(8390656,8,e,n)}function Xu(e,n){return bl(2048,8,e,n)}function Wd(e,n){return bl(4,2,e,n)}function Zd(e,n){return bl(4,4,e,n)}function Vd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function qd(e,n,o){return o=o!=null?o.concat([e]):null,bl(4,4,Vd.bind(null,n,e),o)}function Qu(){}function Gd(e,n){var o=Lr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&qu(n,u[1])?u[0]:(o.memoizedState=[e,n],e)}function Kd(e,n){var o=Lr();n=n===void 0?null:n;var u=o.memoizedState;return u!==null&&n!==null&&qu(n,u[1])?u[0]:(e=e(),o.memoizedState=[e,n],e)}function Jd(e,n,o){return(Ts&21)===0?(e.baseState&&(e.baseState=!1,tr=!0),e.memoizedState=o):(hr(o,n)||(o=Zs(),qt.lanes|=o,Ls|=o,e.baseState=!0),n)}function Yp(e,n){var o=gt;gt=o!==0&&4>o?o:4,e(!0);var u=Vu.transition;Vu.transition={};try{e(!1),n()}finally{gt=o,Vu.transition=u}}function Yd(){return Lr().memoizedState}function Xp(e,n,o){var u=os(e);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},Xd(e))Qd(n,o);else if(o=Nd(e,n,o,u),o!==null){var m=qn();Vr(o,e,u,m),eh(o,n,u)}}function Qp(e,n,o){var u=os(e),m={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xd(e))Qd(n,m);else{var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var E=n.lastRenderedState,T=v(E,o);if(m.hasEagerState=!0,m.eagerState=T,hr(T,E)){var U=n.interleaved;U===null?(m.next=m,Uu(n)):(m.next=U.next,U.next=m),n.interleaved=m;return}}catch{}finally{}o=Nd(e,n,m,u),o!==null&&(m=qn(),Vr(o,e,u,m),eh(o,n,u))}}function Xd(e){var n=e.alternate;return e===qt||n!==null&&n===qt}function Qd(e,n){ma=wl=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function eh(e,n,o){if((o&4194240)!==0){var u=n.lanes;u&=e.pendingLanes,o|=u,n.lanes=o,ar(e,o)}}var El={readContext:Tr,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},em={readContext:Tr,useCallback:function(e,n){return ui().memoizedState=[e,n===void 0?null:n],e},useContext:Tr,useEffect:Hd,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,xl(4194308,4,Vd.bind(null,n,e),o)},useLayoutEffect:function(e,n){return xl(4194308,4,e,n)},useInsertionEffect:function(e,n){return xl(4,2,e,n)},useMemo:function(e,n){var o=ui();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var u=ui();return n=o!==void 0?o(n):n,u.memoizedState=u.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},u.queue=e,e=e.dispatch=Xp.bind(null,qt,e),[u.memoizedState,e]},useRef:function(e){var n=ui();return e={current:e},n.memoizedState=e},useState:Fd,useDebugValue:Qu,useDeferredValue:function(e){return ui().memoizedState=e},useTransition:function(){var e=Fd(!1),n=e[0];return e=Yp.bind(null,e[1]),ui().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var u=qt,m=ui();if(Ht){if(o===void 0)throw Error(s(407));o=o()}else{if(o=n(),bn===null)throw Error(s(349));(Ts&30)!==0||Md(u,n,o)}m.memoizedState=o;var v={value:o,getSnapshot:n};return m.queue=v,Hd(Dd.bind(null,u,v,e),[e]),u.flags|=2048,ya(9,zd.bind(null,u,v,o,n),void 0,null),o},useId:function(){var e=ui(),n=bn.identifierPrefix;if(Ht){var o=Pi,u=Ci;o=(u&~(1<<32-at(u)-1)).toString(32)+o,n=":"+n+"R"+o,o=ga++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=Jp++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},tm={readContext:Tr,useCallback:Gd,useContext:Tr,useEffect:Xu,useImperativeHandle:qd,useInsertionEffect:Wd,useLayoutEffect:Zd,useMemo:Kd,useReducer:Ju,useRef:$d,useState:function(){return Ju(va)},useDebugValue:Qu,useDeferredValue:function(e){var n=Lr();return Jd(n,mn.memoizedState,e)},useTransition:function(){var e=Ju(va)[0],n=Lr().memoizedState;return[e,n]},useMutableSource:Rd,useSyncExternalStore:Ad,useId:Yd,unstable_isNewReconciler:!1},nm={readContext:Tr,useCallback:Gd,useContext:Tr,useEffect:Xu,useImperativeHandle:qd,useInsertionEffect:Wd,useLayoutEffect:Zd,useMemo:Kd,useReducer:Yu,useRef:$d,useState:function(){return Yu(va)},useDebugValue:Qu,useDeferredValue:function(e){var n=Lr();return mn===null?n.memoizedState=e:Jd(n,mn.memoizedState,e)},useTransition:function(){var e=Yu(va)[0],n=Lr().memoizedState;return[e,n]},useMutableSource:Rd,useSyncExternalStore:Ad,useId:Yd,unstable_isNewReconciler:!1};function Hr(e,n){if(e&&e.defaultProps){n=ie({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}function ec(e,n,o,u){n=e.memoizedState,o=o(u,n),o=o==null?n:ie({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Sl={isMounted:function(e){return(e=e._reactInternals)?Ve(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var u=qn(),m=os(e),v=Ni(u,m);v.payload=n,o!=null&&(v.callback=o),n=ns(e,v,m),n!==null&&(Vr(n,e,m,u),gl(n,e,m))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var u=qn(),m=os(e),v=Ni(u,m);v.tag=1,v.payload=n,o!=null&&(v.callback=o),n=ns(e,v,m),n!==null&&(Vr(n,e,m,u),gl(n,e,m))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=qn(),u=os(e),m=Ni(o,u);m.tag=2,n!=null&&(m.callback=n),n=ns(e,m,u),n!==null&&(Vr(n,e,u,o),gl(n,e,u))}};function th(e,n,o,u,m,v,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,v,E):n.prototype&&n.prototype.isPureReactComponent?!ii(o,u)||!ii(m,v):!0}function nh(e,n,o){var u=!1,m=Qi,v=n.contextType;return typeof v=="object"&&v!==null?v=Tr(v):(m=er(n)?ks:Rn.current,u=n.contextTypes,v=(u=u!=null)?ho(e,m):Qi),n=new n(o,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Sl,e.stateNode=n,n._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=v),n}function rh(e,n,o,u){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,u),n.state!==e&&Sl.enqueueReplaceState(n,n.state,null)}function tc(e,n,o,u){var m=e.stateNode;m.props=o,m.state=e.memoizedState,m.refs={},Fu(e);var v=n.contextType;typeof v=="object"&&v!==null?m.context=Tr(v):(v=er(n)?ks:Rn.current,m.context=ho(e,v)),m.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(ec(e,n,v,o),m.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(n=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),n!==m.state&&Sl.enqueueReplaceState(m,m.state,null),vl(e,o,m,u),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function wo(e,n){try{var o="",u=n;do o+=D(u),u=u.return;while(u);var m=o}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:m,digest:null}}function nc(e,n,o){return{value:e,source:null,stack:o??null,digest:n??null}}function rc(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var rm=typeof WeakMap=="function"?WeakMap:Map;function ih(e,n,o){o=Ni(-1,o),o.tag=3,o.payload={element:null};var u=n.value;return o.callback=function(){Ll||(Ll=!0,yc=u),rc(e,n)},o}function sh(e,n,o){o=Ni(-1,o),o.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var m=n.value;o.payload=function(){return u(m)},o.callback=function(){rc(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(o.callback=function(){rc(e,n),typeof u!="function"&&(is===null?is=new Set([this]):is.add(this));var E=n.stack;this.componentDidCatch(n.value,{componentStack:E!==null?E:""})}),o}function oh(e,n,o){var u=e.pingCache;if(u===null){u=e.pingCache=new rm;var m=new Set;u.set(n,m)}else m=u.get(n),m===void 0&&(m=new Set,u.set(n,m));m.has(o)||(m.add(o),e=vm.bind(null,e,n,o),n.then(e,e))}function ah(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function lh(e,n,o,u,m){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=Ni(-1,1),n.tag=2,ns(o,n,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var im=ge.ReactCurrentOwner,tr=!1;function Vn(e,n,o,u){n.child=e===null?jd(n,null,o,u):go(n,e.child,o,u)}function uh(e,n,o,u,m){o=o.render;var v=n.ref;return yo(n,m),u=Gu(e,n,o,u,v,m),o=Ku(),e!==null&&!tr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,Ti(e,n,m)):(Ht&&o&&Lu(n),n.flags|=1,Vn(e,n,u,m),n.child)}function ch(e,n,o,u,m){if(e===null){var v=o.type;return typeof v=="function"&&!kc(v)&&v.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=v,dh(e,n,v,u,m)):(e=zl(o.type,null,u,n,n.mode,m),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&m)===0){var E=v.memoizedProps;if(o=o.compare,o=o!==null?o:ii,o(E,u)&&e.ref===n.ref)return Ti(e,n,m)}return n.flags|=1,e=ls(v,u),e.ref=n.ref,e.return=n,n.child=e}function dh(e,n,o,u,m){if(e!==null){var v=e.memoizedProps;if(ii(v,u)&&e.ref===n.ref)if(tr=!1,n.pendingProps=u=v,(e.lanes&m)!==0)(e.flags&131072)!==0&&(tr=!0);else return n.lanes=e.lanes,Ti(e,n,m)}return ic(e,n,o,u,m)}function hh(e,n,o){var u=n.pendingProps,m=u.children,v=e!==null?e.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(bo,gr),gr|=o;else{if((o&1073741824)===0)return e=v!==null?v.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Mt(bo,gr),gr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=v!==null?v.baseLanes:o,Mt(bo,gr),gr|=u}else v!==null?(u=v.baseLanes|o,n.memoizedState=null):u=o,Mt(bo,gr),gr|=u;return Vn(e,n,m,o),n.child}function fh(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function ic(e,n,o,u,m){var v=er(o)?ks:Rn.current;return v=ho(n,v),yo(n,m),o=Gu(e,n,o,u,v,m),u=Ku(),e!==null&&!tr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~m,Ti(e,n,m)):(Ht&&u&&Lu(n),n.flags|=1,Vn(e,n,o,m),n.child)}function ph(e,n,o,u,m){if(er(o)){var v=!0;ll(n)}else v=!1;if(yo(n,m),n.stateNode===null)Cl(e,n),nh(n,o,u),tc(n,o,u,m),u=!0;else if(e===null){var E=n.stateNode,T=n.memoizedProps;E.props=T;var U=E.context,X=o.contextType;typeof X=="object"&&X!==null?X=Tr(X):(X=er(o)?ks:Rn.current,X=ho(n,X));var me=o.getDerivedStateFromProps,ye=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function";ye||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==u||U!==X)&&rh(n,E,u,X),ts=!1;var fe=n.memoizedState;E.state=fe,vl(n,u,E,m),U=n.memoizedState,T!==u||fe!==U||Qn.current||ts?(typeof me=="function"&&(ec(n,o,me,u),U=n.memoizedState),(T=ts||th(n,o,T,u,fe,U,X))?(ye||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(n.flags|=4194308)):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=U),E.props=u,E.state=U,E.context=X,u=T):(typeof E.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{E=n.stateNode,Td(e,n),T=n.memoizedProps,X=n.type===n.elementType?T:Hr(n.type,T),E.props=X,ye=n.pendingProps,fe=E.context,U=o.contextType,typeof U=="object"&&U!==null?U=Tr(U):(U=er(o)?ks:Rn.current,U=ho(n,U));var Ae=o.getDerivedStateFromProps;(me=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(T!==ye||fe!==U)&&rh(n,E,u,U),ts=!1,fe=n.memoizedState,E.state=fe,vl(n,u,E,m);var He=n.memoizedState;T!==ye||fe!==He||Qn.current||ts?(typeof Ae=="function"&&(ec(n,o,Ae,u),He=n.memoizedState),(X=ts||th(n,o,X,u,fe,He,U)||!1)?(me||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(u,He,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(u,He,U)),typeof E.componentDidUpdate=="function"&&(n.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof E.componentDidUpdate!="function"||T===e.memoizedProps&&fe===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&fe===e.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=He),E.props=u,E.state=He,E.context=U,u=X):(typeof E.componentDidUpdate!="function"||T===e.memoizedProps&&fe===e.memoizedState||(n.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&fe===e.memoizedState||(n.flags|=1024),u=!1)}return sc(e,n,o,u,v,m)}function sc(e,n,o,u,m,v){fh(e,n);var E=(n.flags&128)!==0;if(!u&&!E)return m&&_d(n,o,!1),Ti(e,n,v);u=n.stateNode,im.current=n;var T=E&&typeof o.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,e!==null&&E?(n.child=go(n,e.child,null,v),n.child=go(n,null,T,v)):Vn(e,n,T,v),n.memoizedState=u.state,m&&_d(n,o,!0),n.child}function mh(e){var n=e.stateNode;n.pendingContext?vd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&vd(e,n.context,!1),$u(e,n.containerInfo)}function gh(e,n,o,u,m){return mo(),Au(m),n.flags|=256,Vn(e,n,o,u),n.child}var oc={dehydrated:null,treeContext:null,retryLane:0};function ac(e){return{baseLanes:e,cachePool:null,transitions:null}}function vh(e,n,o){var u=n.pendingProps,m=Vt.current,v=!1,E=(n.flags&128)!==0,T;if((T=E)||(T=e!==null&&e.memoizedState===null?!1:(m&2)!==0),T?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Mt(Vt,m&1),e===null)return Ru(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(E=u.children,e=u.fallback,v?(u=n.mode,v=n.child,E={mode:"hidden",children:E},(u&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=Dl(E,u,0,null),e=As(e,u,o,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=ac(o),n.memoizedState=oc,e):lc(n,E));if(m=e.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return sm(e,n,E,u,T,m,o);if(v){v=u.fallback,E=n.mode,m=e.child,T=m.sibling;var U={mode:"hidden",children:u.children};return(E&1)===0&&n.child!==m?(u=n.child,u.childLanes=0,u.pendingProps=U,n.deletions=null):(u=ls(m,U),u.subtreeFlags=m.subtreeFlags&14680064),T!==null?v=ls(T,v):(v=As(v,E,o,null),v.flags|=2),v.return=n,u.return=n,u.sibling=v,n.child=u,u=v,v=n.child,E=e.child.memoizedState,E=E===null?ac(o):{baseLanes:E.baseLanes|o,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=e.childLanes&~o,n.memoizedState=oc,u}return v=e.child,e=v.sibling,u=ls(v,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=o),u.return=n,u.sibling=null,e!==null&&(o=n.deletions,o===null?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=u,n.memoizedState=null,u}function lc(e,n){return n=Dl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function kl(e,n,o,u){return u!==null&&Au(u),go(n,e.child,null,o),e=lc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function sm(e,n,o,u,m,v,E){if(o)return n.flags&256?(n.flags&=-257,u=nc(Error(s(422))),kl(e,n,E,u)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=u.fallback,m=n.mode,u=Dl({mode:"visible",children:u.children},m,0,null),v=As(v,m,E,null),v.flags|=2,u.return=n,v.return=n,u.sibling=v,n.child=u,(n.mode&1)!==0&&go(n,e.child,null,E),n.child.memoizedState=ac(E),n.memoizedState=oc,v);if((n.mode&1)===0)return kl(e,n,E,null);if(m.data==="$!"){if(u=m.nextSibling&&m.nextSibling.dataset,u)var T=u.dgst;return u=T,v=Error(s(419)),u=nc(v,u,void 0),kl(e,n,E,u)}if(T=(E&e.childLanes)!==0,tr||T){if(u=bn,u!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(u.suspendedLanes|E))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,ji(e,m),Vr(u,e,m,-1))}return Sc(),u=nc(Error(s(421))),kl(e,n,E,u)}return m.data==="$?"?(n.flags|=128,n.child=e.child,n=ym.bind(null,e),m._reactRetry=n,null):(e=v.treeContext,mr=ai(m.nextSibling),pr=n,Ht=!0,$r=null,e!==null&&(jr[Nr++]=Ci,jr[Nr++]=Pi,jr[Nr++]=Cs,Ci=e.id,Pi=e.overflow,Cs=n),n=lc(n,u.children),n.flags|=4096,n)}function yh(e,n,o){e.lanes|=n;var u=e.alternate;u!==null&&(u.lanes|=n),Bu(e.return,n,o)}function uc(e,n,o,u,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=m)}function _h(e,n,o){var u=n.pendingProps,m=u.revealOrder,v=u.tail;if(Vn(e,n,u.children,o),u=Vt.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yh(e,o,n);else if(e.tag===19)yh(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Mt(Vt,u),(n.mode&1)===0)n.memoizedState=null;else switch(m){case"forwards":for(o=n.child,m=null;o!==null;)e=o.alternate,e!==null&&yl(e)===null&&(m=o),o=o.sibling;o=m,o===null?(m=n.child,n.child=null):(m=o.sibling,o.sibling=null),uc(n,!1,m,o,v);break;case"backwards":for(o=null,m=n.child,n.child=null;m!==null;){if(e=m.alternate,e!==null&&yl(e)===null){n.child=m;break}e=m.sibling,m.sibling=o,o=m,m=e}uc(n,!0,o,null,v);break;case"together":uc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Cl(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Ti(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Ls|=n.lanes,(o&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,o=ls(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=ls(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function om(e,n,o){switch(n.tag){case 3:mh(n),mo();break;case 5:Id(n);break;case 1:er(n.type)&&ll(n);break;case 4:$u(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,m=n.memoizedProps.value;Mt(pl,u._currentValue),u._currentValue=m;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(Mt(Vt,Vt.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?vh(e,n,o):(Mt(Vt,Vt.current&1),e=Ti(e,n,o),e!==null?e.sibling:null);Mt(Vt,Vt.current&1);break;case 19:if(u=(o&n.childLanes)!==0,(e.flags&128)!==0){if(u)return _h(e,n,o);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Mt(Vt,Vt.current),u)break;return null;case 22:case 23:return n.lanes=0,hh(e,n,o)}return Ti(e,n,o)}var wh,cc,xh,bh;wh=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},cc=function(){},xh=function(e,n,o,u){var m=e.memoizedProps;if(m!==u){e=n.stateNode,Ns(li.current);var v=null;switch(o){case"input":m=ct(e,m),u=ct(e,u),v=[];break;case"select":m=ie({},m,{value:void 0}),u=ie({},u,{value:void 0}),v=[];break;case"textarea":m=wt(e,m),u=wt(e,u),v=[];break;default:typeof m.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=de)}Nn(o,u);var E;o=null;for(X in m)if(!u.hasOwnProperty(X)&&m.hasOwnProperty(X)&&m[X]!=null)if(X==="style"){var T=m[X];for(E in T)T.hasOwnProperty(E)&&(o||(o={}),o[E]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(h.hasOwnProperty(X)?v||(v=[]):(v=v||[]).push(X,null));for(X in u){var U=u[X];if(T=m?.[X],u.hasOwnProperty(X)&&U!==T&&(U!=null||T!=null))if(X==="style")if(T){for(E in T)!T.hasOwnProperty(E)||U&&U.hasOwnProperty(E)||(o||(o={}),o[E]="");for(E in U)U.hasOwnProperty(E)&&T[E]!==U[E]&&(o||(o={}),o[E]=U[E])}else o||(v||(v=[]),v.push(X,o)),o=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,T=T?T.__html:void 0,U!=null&&T!==U&&(v=v||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(h.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&Nt("scroll",e),v||T===U||(v=[])):(v=v||[]).push(X,U))}o&&(v=v||[]).push("style",o);var X=v;(n.updateQueue=X)&&(n.flags|=4)}},bh=function(e,n,o,u){o!==u&&(n.flags|=4)};function _a(e,n){if(!Ht)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Mn(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,u=0;if(n)for(var m=e.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&14680064,u|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=u,e.childLanes=o,n}function am(e,n,o){var u=n.pendingProps;switch(Ou(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(n),null;case 1:return er(n.type)&&al(),Mn(n),null;case 3:return u=n.stateNode,_o(),Ut(Qn),Ut(Rn),Zu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(hl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,$r!==null&&(xc($r),$r=null))),cc(e,n),Mn(n),null;case 5:Hu(n);var m=Ns(pa.current);if(o=n.type,e!==null&&n.stateNode!=null)xh(e,n,o,u,m),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(s(166));return Mn(n),null}if(e=Ns(li.current),hl(n)){u=n.stateNode,o=n.type;var v=n.memoizedProps;switch(u[Pr]=n,u[Ji]=v,e=(n.mode&1)!==0,o){case"dialog":Nt("cancel",u),Nt("close",u);break;case"iframe":case"object":case"embed":Nt("load",u);break;case"video":case"audio":for(m=0;m<qi.length;m++)Nt(qi[m],u);break;case"source":Nt("error",u);break;case"img":case"image":case"link":Nt("error",u),Nt("load",u);break;case"details":Nt("toggle",u);break;case"input":rt(u,v),Nt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!v.multiple},Nt("invalid",u);break;case"textarea":x(u,v),Nt("invalid",u)}Nn(o,v),m=null;for(var E in v)if(v.hasOwnProperty(E)){var T=v[E];E==="children"?typeof T=="string"?u.textContent!==T&&(v.suppressHydrationWarning!==!0&&Y(u.textContent,T,e),m=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&Y(u.textContent,T,e),m=["children",""+T]):h.hasOwnProperty(E)&&T!=null&&E==="onScroll"&&Nt("scroll",u)}switch(o){case"input":Be(u),lt(u,v,!0);break;case"textarea":Be(u),Me(u);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(u.onclick=de)}u=m,n.updateQueue=u,u!==null&&(n.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kt(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=E.createElement(o,{is:u.is}):(e=E.createElement(o),o==="select"&&(E=e,u.multiple?E.multiple=!0:u.size&&(E.size=u.size))):e=E.createElementNS(e,o),e[Pr]=n,e[Ji]=u,wh(e,n,!1,!1),n.stateNode=e;e:{switch(E=tn(o,u),o){case"dialog":Nt("cancel",e),Nt("close",e),m=u;break;case"iframe":case"object":case"embed":Nt("load",e),m=u;break;case"video":case"audio":for(m=0;m<qi.length;m++)Nt(qi[m],e);m=u;break;case"source":Nt("error",e),m=u;break;case"img":case"image":case"link":Nt("error",e),Nt("load",e),m=u;break;case"details":Nt("toggle",e),m=u;break;case"input":rt(e,u),m=ct(e,u),Nt("invalid",e);break;case"option":m=u;break;case"select":e._wrapperState={wasMultiple:!!u.multiple},m=ie({},u,{value:void 0}),Nt("invalid",e);break;case"textarea":x(e,u),m=wt(e,u),Nt("invalid",e);break;default:m=u}Nn(o,m),T=m;for(v in T)if(T.hasOwnProperty(v)){var U=T[v];v==="style"?Bn(e,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&sn(e,U)):v==="children"?typeof U=="string"?(o!=="textarea"||U!=="")&&yn(e,U):typeof U=="number"&&yn(e,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(h.hasOwnProperty(v)?U!=null&&v==="onScroll"&&Nt("scroll",e):U!=null&&Q(e,v,U,E))}switch(o){case"input":Be(e),lt(e,u,!1);break;case"textarea":Be(e),Me(e);break;case"option":u.value!=null&&e.setAttribute("value",""+ee(u.value));break;case"select":e.multiple=!!u.multiple,v=u.value,v!=null?Je(e,!!u.multiple,v,!1):u.defaultValue!=null&&Je(e,!!u.multiple,u.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=de)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Mn(n),null;case 6:if(e&&n.stateNode!=null)bh(e,n,e.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(s(166));if(o=Ns(pa.current),Ns(li.current),hl(n)){if(u=n.stateNode,o=n.memoizedProps,u[Pr]=n,(v=u.nodeValue!==o)&&(e=pr,e!==null))switch(e.tag){case 3:Y(u.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Y(u.nodeValue,o,(e.mode&1)!==0)}v&&(n.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Pr]=n,n.stateNode=u}return Mn(n),null;case 13:if(Ut(Vt),u=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ht&&mr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)kd(),mo(),n.flags|=98560,v=!1;else if(v=hl(n),u!==null&&u.dehydrated!==null){if(e===null){if(!v)throw Error(s(318));if(v=n.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Pr]=n}else mo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Mn(n),v=!1}else $r!==null&&(xc($r),$r=null),v=!0;if(!v)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(u=u!==null,u!==(e!==null&&e.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Vt.current&1)!==0?gn===0&&(gn=3):Sc())),n.updateQueue!==null&&(n.flags|=4),Mn(n),null);case 4:return _o(),cc(e,n),e===null&&Gi(n.stateNode.containerInfo),Mn(n),null;case 10:return Du(n.type._context),Mn(n),null;case 17:return er(n.type)&&al(),Mn(n),null;case 19:if(Ut(Vt),v=n.memoizedState,v===null)return Mn(n),null;if(u=(n.flags&128)!==0,E=v.rendering,E===null)if(u)_a(v,!1);else{if(gn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(E=yl(e),E!==null){for(n.flags|=128,_a(v,!1),u=E.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=o,o=n.child;o!==null;)v=o,e=u,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,e=E.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Mt(Vt,Vt.current&1|2),n.child}e=e.sibling}v.tail!==null&&Ee()>Eo&&(n.flags|=128,u=!0,_a(v,!1),n.lanes=4194304)}else{if(!u)if(e=yl(E),e!==null){if(n.flags|=128,u=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),_a(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!Ht)return Mn(n),null}else 2*Ee()-v.renderingStartTime>Eo&&o!==1073741824&&(n.flags|=128,u=!0,_a(v,!1),n.lanes=4194304);v.isBackwards?(E.sibling=n.child,n.child=E):(o=v.last,o!==null?o.sibling=E:n.child=E,v.last=E)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Ee(),n.sibling=null,o=Vt.current,Mt(Vt,u?o&1|2:o&1),n):(Mn(n),null);case 22:case 23:return Ec(),u=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(gr&1073741824)!==0&&(Mn(n),n.subtreeFlags&6&&(n.flags|=8192)):Mn(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function lm(e,n){switch(Ou(n),n.tag){case 1:return er(n.type)&&al(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return _o(),Ut(Qn),Ut(Rn),Zu(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Hu(n),null;case 13:if(Ut(Vt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));mo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ut(Vt),null;case 4:return _o(),null;case 10:return Du(n.type._context),null;case 22:case 23:return Ec(),null;case 24:return null;default:return null}}var Pl=!1,zn=!1,um=typeof WeakSet=="function"?WeakSet:Set,De=null;function xo(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){en(e,n,u)}else o.current=null}function dc(e,n,o){try{o()}catch(u){en(e,n,u)}}var Eh=!1;function cm(e,n){if(Te=vs,e=na(),ra(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var E=0,T=-1,U=-1,X=0,me=0,ye=e,fe=null;t:for(;;){for(var Ae;ye!==o||m!==0&&ye.nodeType!==3||(T=E+m),ye!==v||u!==0&&ye.nodeType!==3||(U=E+u),ye.nodeType===3&&(E+=ye.nodeValue.length),(Ae=ye.firstChild)!==null;)fe=ye,ye=Ae;for(;;){if(ye===e)break t;if(fe===o&&++X===m&&(T=E),fe===v&&++me===u&&(U=E),(Ae=ye.nextSibling)!==null)break;ye=fe,fe=ye.parentNode}ye=Ae}o=T===-1||U===-1?null:{start:T,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qe={focusedElem:e,selectionRange:o},vs=!1,De=n;De!==null;)if(n=De,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,De=e;else for(;De!==null;){n=De;try{var He=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ze=He.memoizedProps,rn=He.memoizedState,G=n.stateNode,$=G.getSnapshotBeforeUpdate(n.elementType===n.type?Ze:Hr(n.type,Ze),rn);G.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=n.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Se){en(n,n.return,Se)}if(e=n.sibling,e!==null){e.return=n.return,De=e;break}De=n.return}return He=Eh,Eh=!1,He}function wa(e,n,o){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&e)===e){var v=m.destroy;m.destroy=void 0,v!==void 0&&dc(n,o,v)}m=m.next}while(m!==u)}}function jl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var u=o.create;o.destroy=u()}o=o.next}while(o!==n)}}function hc(e){var n=e.ref;if(n!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof n=="function"?n(e):n.current=e}}function Sh(e){var n=e.alternate;n!==null&&(e.alternate=null,Sh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Pr],delete n[Ji],delete n[Yi],delete n[Pu],delete n[ju])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kh(e){return e.tag===5||e.tag===3||e.tag===4}function Ch(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fc(e,n,o){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=de));else if(u!==4&&(e=e.child,e!==null))for(fc(e,n,o),e=e.sibling;e!==null;)fc(e,n,o),e=e.sibling}function pc(e,n,o){var u=e.tag;if(u===5||u===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(pc(e,n,o),e=e.sibling;e!==null;)pc(e,n,o),e=e.sibling}var kn=null,Wr=!1;function rs(e,n,o){for(o=o.child;o!==null;)Ph(e,n,o),o=o.sibling}function Ph(e,n,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Yr,o)}catch{}switch(o.tag){case 5:zn||xo(o,n);case 6:var u=kn,m=Wr;kn=null,rs(e,n,o),kn=u,Wr=m,kn!==null&&(Wr?(e=kn,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):kn.removeChild(o.stateNode));break;case 18:kn!==null&&(Wr?(e=kn,o=o.stateNode,e.nodeType===8?ca(e.parentNode,o):e.nodeType===1&&ca(e,o),ur(e)):ca(kn,o.stateNode));break;case 4:u=kn,m=Wr,kn=o.stateNode.containerInfo,Wr=!0,rs(e,n,o),kn=u,Wr=m;break;case 0:case 11:case 14:case 15:if(!zn&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){m=u=u.next;do{var v=m,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&dc(o,n,E),m=m.next}while(m!==u)}rs(e,n,o);break;case 1:if(!zn&&(xo(o,n),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){en(o,n,T)}rs(e,n,o);break;case 21:rs(e,n,o);break;case 22:o.mode&1?(zn=(u=zn)||o.memoizedState!==null,rs(e,n,o),zn=u):rs(e,n,o);break;default:rs(e,n,o)}}function jh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new um),n.forEach(function(u){var m=_m.bind(null,e,u);o.has(u)||(o.add(u),u.then(m,m))})}}function Zr(e,n){var o=n.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];try{var v=e,E=n,T=E;e:for(;T!==null;){switch(T.tag){case 5:kn=T.stateNode,Wr=!1;break e;case 3:kn=T.stateNode.containerInfo,Wr=!0;break e;case 4:kn=T.stateNode.containerInfo,Wr=!0;break e}T=T.return}if(kn===null)throw Error(s(160));Ph(v,E,m),kn=null,Wr=!1;var U=m.alternate;U!==null&&(U.return=null),m.return=null}catch(X){en(m,n,X)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Nh(n,e),n=n.sibling}function Nh(e,n){var o=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(n,e),ci(e),u&4){try{wa(3,e,e.return),jl(3,e)}catch(Ze){en(e,e.return,Ze)}try{wa(5,e,e.return)}catch(Ze){en(e,e.return,Ze)}}break;case 1:Zr(n,e),ci(e),u&512&&o!==null&&xo(o,o.return);break;case 5:if(Zr(n,e),ci(e),u&512&&o!==null&&xo(o,o.return),e.flags&32){var m=e.stateNode;try{yn(m,"")}catch(Ze){en(e,e.return,Ze)}}if(u&4&&(m=e.stateNode,m!=null)){var v=e.memoizedProps,E=o!==null?o.memoizedProps:v,T=e.type,U=e.updateQueue;if(e.updateQueue=null,U!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&Tt(m,v),tn(T,E);var X=tn(T,v);for(E=0;E<U.length;E+=2){var me=U[E],ye=U[E+1];me==="style"?Bn(m,ye):me==="dangerouslySetInnerHTML"?sn(m,ye):me==="children"?yn(m,ye):Q(m,me,ye,X)}switch(T){case"input":Et(m,v);break;case"textarea":Ue(m,v);break;case"select":var fe=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var Ae=v.value;Ae!=null?Je(m,!!v.multiple,Ae,!1):fe!==!!v.multiple&&(v.defaultValue!=null?Je(m,!!v.multiple,v.defaultValue,!0):Je(m,!!v.multiple,v.multiple?[]:"",!1))}m[Ji]=v}catch(Ze){en(e,e.return,Ze)}}break;case 6:if(Zr(n,e),ci(e),u&4){if(e.stateNode===null)throw Error(s(162));m=e.stateNode,v=e.memoizedProps;try{m.nodeValue=v}catch(Ze){en(e,e.return,Ze)}}break;case 3:if(Zr(n,e),ci(e),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ur(n.containerInfo)}catch(Ze){en(e,e.return,Ze)}break;case 4:Zr(n,e),ci(e);break;case 13:Zr(n,e),ci(e),m=e.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(vc=Ee())),u&4&&jh(e);break;case 22:if(me=o!==null&&o.memoizedState!==null,e.mode&1?(zn=(X=zn)||me,Zr(n,e),zn=X):Zr(n,e),ci(e),u&8192){if(X=e.memoizedState!==null,(e.stateNode.isHidden=X)&&!me&&(e.mode&1)!==0)for(De=e,me=e.child;me!==null;){for(ye=De=me;De!==null;){switch(fe=De,Ae=fe.child,fe.tag){case 0:case 11:case 14:case 15:wa(4,fe,fe.return);break;case 1:xo(fe,fe.return);var He=fe.stateNode;if(typeof He.componentWillUnmount=="function"){u=fe,o=fe.return;try{n=u,He.props=n.memoizedProps,He.state=n.memoizedState,He.componentWillUnmount()}catch(Ze){en(u,o,Ze)}}break;case 5:xo(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Oh(ye);continue}}Ae!==null?(Ae.return=fe,De=Ae):Oh(ye)}me=me.sibling}e:for(me=null,ye=e;;){if(ye.tag===5){if(me===null){me=ye;try{m=ye.stateNode,X?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=ye.stateNode,U=ye.memoizedProps.style,E=U!=null&&U.hasOwnProperty("display")?U.display:null,T.style.display=Ie("display",E))}catch(Ze){en(e,e.return,Ze)}}}else if(ye.tag===6){if(me===null)try{ye.stateNode.nodeValue=X?"":ye.memoizedProps}catch(Ze){en(e,e.return,Ze)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===e)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===e)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===e)break e;me===ye&&(me=null),ye=ye.return}me===ye&&(me=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Zr(n,e),ci(e),u&4&&jh(e);break;case 21:break;default:Zr(n,e),ci(e)}}function ci(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(kh(o)){var u=o;break e}o=o.return}throw Error(s(160))}switch(u.tag){case 5:var m=u.stateNode;u.flags&32&&(yn(m,""),u.flags&=-33);var v=Ch(e);pc(e,v,m);break;case 3:case 4:var E=u.stateNode.containerInfo,T=Ch(e);fc(e,T,E);break;default:throw Error(s(161))}}catch(U){en(e,e.return,U)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function dm(e,n,o){De=e,Th(e)}function Th(e,n,o){for(var u=(e.mode&1)!==0;De!==null;){var m=De,v=m.child;if(m.tag===22&&u){var E=m.memoizedState!==null||Pl;if(!E){var T=m.alternate,U=T!==null&&T.memoizedState!==null||zn;T=Pl;var X=zn;if(Pl=E,(zn=U)&&!X)for(De=m;De!==null;)E=De,U=E.child,E.tag===22&&E.memoizedState!==null?Ih(m):U!==null?(U.return=E,De=U):Ih(m);for(;v!==null;)De=v,Th(v),v=v.sibling;De=m,Pl=T,zn=X}Lh(e)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,De=v):Lh(e)}}function Lh(e){for(;De!==null;){var n=De;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:zn||jl(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!zn)if(o===null)u.componentDidMount();else{var m=n.elementType===n.type?o.memoizedProps:Hr(n.type,o.memoizedProps);u.componentDidUpdate(m,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Od(n,v,u);break;case 3:var E=n.updateQueue;if(E!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}Od(n,E,o)}break;case 5:var T=n.stateNode;if(o===null&&n.flags&4){o=T;var U=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&o.focus();break;case"img":U.src&&(o.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var X=n.alternate;if(X!==null){var me=X.memoizedState;if(me!==null){var ye=me.dehydrated;ye!==null&&ur(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}zn||n.flags&512&&hc(n)}catch(fe){en(n,n.return,fe)}}if(n===e){De=null;break}if(o=n.sibling,o!==null){o.return=n.return,De=o;break}De=n.return}}function Oh(e){for(;De!==null;){var n=De;if(n===e){De=null;break}var o=n.sibling;if(o!==null){o.return=n.return,De=o;break}De=n.return}}function Ih(e){for(;De!==null;){var n=De;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{jl(4,n)}catch(U){en(n,o,U)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var m=n.return;try{u.componentDidMount()}catch(U){en(n,m,U)}}var v=n.return;try{hc(n)}catch(U){en(n,v,U)}break;case 5:var E=n.return;try{hc(n)}catch(U){en(n,E,U)}}}catch(U){en(n,n.return,U)}if(n===e){De=null;break}var T=n.sibling;if(T!==null){T.return=n.return,De=T;break}De=n.return}}var hm=Math.ceil,Nl=ge.ReactCurrentDispatcher,mc=ge.ReactCurrentOwner,Or=ge.ReactCurrentBatchConfig,_t=0,bn=null,cn=null,Cn=0,gr=0,bo=Xi(0),gn=0,xa=null,Ls=0,Tl=0,gc=0,ba=null,nr=null,vc=0,Eo=1/0,Li=null,Ll=!1,yc=null,is=null,Ol=!1,ss=null,Il=0,Ea=0,_c=null,Rl=-1,Al=0;function qn(){return(_t&6)!==0?Ee():Rl!==-1?Rl:Rl=Ee()}function os(e){return(e.mode&1)===0?1:(_t&2)!==0&&Cn!==0?Cn&-Cn:Kp.transition!==null?(Al===0&&(Al=Zs()),Al):(e=gt,e!==0||(e=window.event,e=e===void 0?16:vt(e.type)),e)}function Vr(e,n,o,u){if(50<Ea)throw Ea=0,_c=null,Error(s(185));Ln(e,o,u),((_t&2)===0||e!==bn)&&(e===bn&&((_t&2)===0&&(Tl|=o),gn===4&&as(e,Cn)),rr(e,u),o===1&&_t===0&&(n.mode&1)===0&&(Eo=Ee()+500,ul&&es()))}function rr(e,n){var o=e.callbackNode;St(e,n);var u=ht(e,e===bn?Cn:0);if(u===0)o!==null&&R(o),e.callbackNode=null,e.callbackPriority=0;else if(n=u&-u,e.callbackPriority!==n){if(o!=null&&R(o),n===1)e.tag===0?Gp(Ah.bind(null,e)):wd(Ah.bind(null,e)),In(function(){(_t&6)===0&&es()}),o=null;else{switch(Qr(u)){case 1:o=hn;break;case 4:o=Xt;break;case 16:o=an;break;case 536870912:o=Jr;break;default:o=an}o=Hh(o,Rh.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function Rh(e,n){if(Rl=-1,Al=0,(_t&6)!==0)throw Error(s(327));var o=e.callbackNode;if(So()&&e.callbackNode!==o)return null;var u=ht(e,e===bn?Cn:0);if(u===0)return null;if((u&30)!==0||(u&e.expiredLanes)!==0||n)n=Ml(e,u);else{n=u;var m=_t;_t|=2;var v=zh();(bn!==e||Cn!==n)&&(Li=null,Eo=Ee()+500,Is(e,n));do try{mm();break}catch(T){Mh(e,T)}while(!0);zu(),Nl.current=v,_t=m,cn!==null?n=0:(bn=null,Cn=0,n=gn)}if(n!==0){if(n===2&&(m=At(e),m!==0&&(u=m,n=wc(e,m))),n===1)throw o=xa,Is(e,0),as(e,u),rr(e,Ee()),o;if(n===6)as(e,u);else{if(m=e.current.alternate,(u&30)===0&&!fm(m)&&(n=Ml(e,u),n===2&&(v=At(e),v!==0&&(u=v,n=wc(e,v))),n===1))throw o=xa,Is(e,0),as(e,u),rr(e,Ee()),o;switch(e.finishedWork=m,e.finishedLanes=u,n){case 0:case 1:throw Error(s(345));case 2:Rs(e,nr,Li);break;case 3:if(as(e,u),(u&130023424)===u&&(n=vc+500-Ee(),10<n)){if(ht(e,0)!==0)break;if(m=e.suspendedLanes,(m&u)!==u){qn(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=pn(Rs.bind(null,e,nr,Li),n);break}Rs(e,nr,Li);break;case 4:if(as(e,u),(u&4194240)===u)break;for(n=e.eventTimes,m=-1;0<u;){var E=31-at(u);v=1<<E,E=n[E],E>m&&(m=E),u&=~v}if(u=m,u=Ee()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*hm(u/1960))-u,10<u){e.timeoutHandle=pn(Rs.bind(null,e,nr,Li),u);break}Rs(e,nr,Li);break;case 5:Rs(e,nr,Li);break;default:throw Error(s(329))}}}return rr(e,Ee()),e.callbackNode===o?Rh.bind(null,e):null}function wc(e,n){var o=ba;return e.current.memoizedState.isDehydrated&&(Is(e,n).flags|=256),e=Ml(e,n),e!==2&&(n=nr,nr=o,n!==null&&xc(n)),e}function xc(e){nr===null?nr=e:nr.push.apply(nr,e)}function fm(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var m=o[u],v=m.getSnapshot;m=m.value;try{if(!hr(v(),m))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function as(e,n){for(n&=~gc,n&=~Tl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-at(n),u=1<<o;e[o]=-1,n&=~u}}function Ah(e){if((_t&6)!==0)throw Error(s(327));So();var n=ht(e,0);if((n&1)===0)return rr(e,Ee()),null;var o=Ml(e,n);if(e.tag!==0&&o===2){var u=At(e);u!==0&&(n=u,o=wc(e,u))}if(o===1)throw o=xa,Is(e,0),as(e,n),rr(e,Ee()),o;if(o===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Rs(e,nr,Li),rr(e,Ee()),null}function bc(e,n){var o=_t;_t|=1;try{return e(n)}finally{_t=o,_t===0&&(Eo=Ee()+500,ul&&es())}}function Os(e){ss!==null&&ss.tag===0&&(_t&6)===0&&So();var n=_t;_t|=1;var o=Or.transition,u=gt;try{if(Or.transition=null,gt=1,e)return e()}finally{gt=u,Or.transition=o,_t=n,(_t&6)===0&&es()}}function Ec(){gr=bo.current,Ut(bo)}function Is(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,un(o)),cn!==null)for(o=cn.return;o!==null;){var u=o;switch(Ou(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&al();break;case 3:_o(),Ut(Qn),Ut(Rn),Zu();break;case 5:Hu(u);break;case 4:_o();break;case 13:Ut(Vt);break;case 19:Ut(Vt);break;case 10:Du(u.type._context);break;case 22:case 23:Ec()}o=o.return}if(bn=e,cn=e=ls(e.current,null),Cn=gr=n,gn=0,xa=null,gc=Tl=Ls=0,nr=ba=null,js!==null){for(n=0;n<js.length;n++)if(o=js[n],u=o.interleaved,u!==null){o.interleaved=null;var m=u.next,v=o.pending;if(v!==null){var E=v.next;v.next=m,u.next=E}o.pending=u}js=null}return e}function Mh(e,n){do{var o=cn;try{if(zu(),_l.current=El,wl){for(var u=qt.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}wl=!1}if(Ts=0,xn=mn=qt=null,ma=!1,ga=0,mc.current=null,o===null||o.return===null){gn=1,xa=n,cn=null;break}e:{var v=e,E=o.return,T=o,U=n;if(n=Cn,T.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,me=T,ye=me.tag;if((me.mode&1)===0&&(ye===0||ye===11||ye===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var Ae=ah(E);if(Ae!==null){Ae.flags&=-257,lh(Ae,E,T,v,n),Ae.mode&1&&oh(v,X,n),n=Ae,U=X;var He=n.updateQueue;if(He===null){var Ze=new Set;Ze.add(U),n.updateQueue=Ze}else He.add(U);break e}else{if((n&1)===0){oh(v,X,n),Sc();break e}U=Error(s(426))}}else if(Ht&&T.mode&1){var rn=ah(E);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),lh(rn,E,T,v,n),Au(wo(U,T));break e}}v=U=wo(U,T),gn!==4&&(gn=2),ba===null?ba=[v]:ba.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,n&=-n,v.lanes|=n;var G=ih(v,U,n);Ld(v,G);break e;case 1:T=U;var $=v.type,K=v.stateNode;if((v.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(is===null||!is.has(K)))){v.flags|=65536,n&=-n,v.lanes|=n;var Se=sh(v,T,n);Ld(v,Se);break e}}v=v.return}while(v!==null)}Bh(o)}catch(qe){n=qe,cn===o&&o!==null&&(cn=o=o.return);continue}break}while(!0)}function zh(){var e=Nl.current;return Nl.current=El,e===null?El:e}function Sc(){(gn===0||gn===3||gn===2)&&(gn=4),bn===null||(Ls&268435455)===0&&(Tl&268435455)===0||as(bn,Cn)}function Ml(e,n){var o=_t;_t|=2;var u=zh();(bn!==e||Cn!==n)&&(Li=null,Is(e,n));do try{pm();break}catch(m){Mh(e,m)}while(!0);if(zu(),_t=o,Nl.current=u,cn!==null)throw Error(s(261));return bn=null,Cn=0,gn}function pm(){for(;cn!==null;)Dh(cn)}function mm(){for(;cn!==null&&!ue();)Dh(cn)}function Dh(e){var n=$h(e.alternate,e,gr);e.memoizedProps=e.pendingProps,n===null?Bh(e):cn=n,mc.current=null}function Bh(e){var n=e;do{var o=n.alternate;if(e=n.return,(n.flags&32768)===0){if(o=am(o,n,gr),o!==null){cn=o;return}}else{if(o=lm(o,n),o!==null){o.flags&=32767,cn=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gn=6,cn=null;return}}if(n=n.sibling,n!==null){cn=n;return}cn=n=e}while(n!==null);gn===0&&(gn=5)}function Rs(e,n,o){var u=gt,m=Or.transition;try{Or.transition=null,gt=1,gm(e,n,o,u)}finally{Or.transition=m,gt=u}return null}function gm(e,n,o,u){do So();while(ss!==null);if((_t&6)!==0)throw Error(s(327));o=e.finishedWork;var m=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var v=o.lanes|o.childLanes;if(It(e,v),e===bn&&(cn=bn=null,Cn=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||Ol||(Ol=!0,Hh(an,function(){return So(),null})),v=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||v){v=Or.transition,Or.transition=null;var E=gt;gt=1;var T=_t;_t|=4,mc.current=null,cm(e,o),Nh(o,e),kr(Qe),vs=!!Te,Qe=Te=null,e.current=o,dm(o),pe(),_t=T,gt=E,Or.transition=v}else e.current=o;if(Ol&&(Ol=!1,ss=e,Il=m),v=e.pendingLanes,v===0&&(is=null),ln(o.stateNode),rr(e,Ee()),n!==null)for(u=e.onRecoverableError,o=0;o<n.length;o++)m=n[o],u(m.value,{componentStack:m.stack,digest:m.digest});if(Ll)throw Ll=!1,e=yc,yc=null,e;return(Il&1)!==0&&e.tag!==0&&So(),v=e.pendingLanes,(v&1)!==0?e===_c?Ea++:(Ea=0,_c=e):Ea=0,es(),null}function So(){if(ss!==null){var e=Qr(Il),n=Or.transition,o=gt;try{if(Or.transition=null,gt=16>e?16:e,ss===null)var u=!1;else{if(e=ss,ss=null,Il=0,(_t&6)!==0)throw Error(s(331));var m=_t;for(_t|=4,De=e.current;De!==null;){var v=De,E=v.child;if((De.flags&16)!==0){var T=v.deletions;if(T!==null){for(var U=0;U<T.length;U++){var X=T[U];for(De=X;De!==null;){var me=De;switch(me.tag){case 0:case 11:case 15:wa(8,me,v)}var ye=me.child;if(ye!==null)ye.return=me,De=ye;else for(;De!==null;){me=De;var fe=me.sibling,Ae=me.return;if(Sh(me),me===X){De=null;break}if(fe!==null){fe.return=Ae,De=fe;break}De=Ae}}}var He=v.alternate;if(He!==null){var Ze=He.child;if(Ze!==null){He.child=null;do{var rn=Ze.sibling;Ze.sibling=null,Ze=rn}while(Ze!==null)}}De=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,De=E;else e:for(;De!==null;){if(v=De,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:wa(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,De=G;break e}De=v.return}}var $=e.current;for(De=$;De!==null;){E=De;var K=E.child;if((E.subtreeFlags&2064)!==0&&K!==null)K.return=E,De=K;else e:for(E=$;De!==null;){if(T=De,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:jl(9,T)}}catch(qe){en(T,T.return,qe)}if(T===E){De=null;break e}var Se=T.sibling;if(Se!==null){Se.return=T.return,De=Se;break e}De=T.return}}if(_t=m,es(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Yr,e)}catch{}u=!0}return u}finally{gt=o,Or.transition=n}}return!1}function Uh(e,n,o){n=wo(o,n),n=ih(e,n,1),e=ns(e,n,1),n=qn(),e!==null&&(Ln(e,1,n),rr(e,n))}function en(e,n,o){if(e.tag===3)Uh(e,e,o);else for(;n!==null;){if(n.tag===3){Uh(n,e,o);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(is===null||!is.has(u))){e=wo(o,e),e=sh(n,e,1),n=ns(n,e,1),e=qn(),n!==null&&(Ln(n,1,e),rr(n,e));break}}n=n.return}}function vm(e,n,o){var u=e.pingCache;u!==null&&u.delete(n),n=qn(),e.pingedLanes|=e.suspendedLanes&o,bn===e&&(Cn&o)===o&&(gn===4||gn===3&&(Cn&130023424)===Cn&&500>Ee()-vc?Is(e,0):gc|=o),rr(e,n)}function Fh(e,n){n===0&&((e.mode&1)===0?n=1:(n=ce,ce<<=1,(ce&130023424)===0&&(ce=4194304)));var o=qn();e=ji(e,n),e!==null&&(Ln(e,n,o),rr(e,o))}function ym(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Fh(e,o)}function _m(e,n){var o=0;switch(e.tag){case 13:var u=e.stateNode,m=e.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=e.stateNode;break;default:throw Error(s(314))}u!==null&&u.delete(n),Fh(e,o)}var $h;$h=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||Qn.current)tr=!0;else{if((e.lanes&o)===0&&(n.flags&128)===0)return tr=!1,om(e,n,o);tr=(e.flags&131072)!==0}else tr=!1,Ht&&(n.flags&1048576)!==0&&xd(n,dl,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;Cl(e,n),e=n.pendingProps;var m=ho(n,Rn.current);yo(n,o),m=Gu(null,n,u,e,m,o);var v=Ku();return n.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,er(u)?(v=!0,ll(n)):v=!1,n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Fu(n),m.updater=Sl,n.stateNode=m,m._reactInternals=n,tc(n,u,e,o),n=sc(null,n,u,!0,v,o)):(n.tag=0,Ht&&v&&Lu(n),Vn(null,n,m,o),n=n.child),n;case 16:u=n.elementType;e:{switch(Cl(e,n),e=n.pendingProps,m=u._init,u=m(u._payload),n.type=u,m=n.tag=xm(u),e=Hr(u,e),m){case 0:n=ic(null,n,u,e,o);break e;case 1:n=ph(null,n,u,e,o);break e;case 11:n=uh(null,n,u,e,o);break e;case 14:n=ch(null,n,u,Hr(u.type,e),o);break e}throw Error(s(306,u,""))}return n;case 0:return u=n.type,m=n.pendingProps,m=n.elementType===u?m:Hr(u,m),ic(e,n,u,m,o);case 1:return u=n.type,m=n.pendingProps,m=n.elementType===u?m:Hr(u,m),ph(e,n,u,m,o);case 3:e:{if(mh(n),e===null)throw Error(s(387));u=n.pendingProps,v=n.memoizedState,m=v.element,Td(e,n),vl(n,u,null,o);var E=n.memoizedState;if(u=E.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){m=wo(Error(s(423)),n),n=gh(e,n,u,o,m);break e}else if(u!==m){m=wo(Error(s(424)),n),n=gh(e,n,u,o,m);break e}else for(mr=ai(n.stateNode.containerInfo.firstChild),pr=n,Ht=!0,$r=null,o=jd(n,null,u,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(mo(),u===m){n=Ti(e,n,o);break e}Vn(e,n,u,o)}n=n.child}return n;case 5:return Id(n),e===null&&Ru(n),u=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,E=m.children,ft(u,m)?E=null:v!==null&&ft(u,v)&&(n.flags|=32),fh(e,n),Vn(e,n,E,o),n.child;case 6:return e===null&&Ru(n),null;case 13:return vh(e,n,o);case 4:return $u(n,n.stateNode.containerInfo),u=n.pendingProps,e===null?n.child=go(n,null,u,o):Vn(e,n,u,o),n.child;case 11:return u=n.type,m=n.pendingProps,m=n.elementType===u?m:Hr(u,m),uh(e,n,u,m,o);case 7:return Vn(e,n,n.pendingProps,o),n.child;case 8:return Vn(e,n,n.pendingProps.children,o),n.child;case 12:return Vn(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(u=n.type._context,m=n.pendingProps,v=n.memoizedProps,E=m.value,Mt(pl,u._currentValue),u._currentValue=E,v!==null)if(hr(v.value,E)){if(v.children===m.children&&!Qn.current){n=Ti(e,n,o);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var T=v.dependencies;if(T!==null){E=v.child;for(var U=T.firstContext;U!==null;){if(U.context===u){if(v.tag===1){U=Ni(-1,o&-o),U.tag=2;var X=v.updateQueue;if(X!==null){X=X.shared;var me=X.pending;me===null?U.next=U:(U.next=me.next,me.next=U),X.pending=U}}v.lanes|=o,U=v.alternate,U!==null&&(U.lanes|=o),Bu(v.return,o,n),T.lanes|=o;break}U=U.next}}else if(v.tag===10)E=v.type===n.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(s(341));E.lanes|=o,T=E.alternate,T!==null&&(T.lanes|=o),Bu(E,o,n),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===n){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}Vn(e,n,m.children,o),n=n.child}return n;case 9:return m=n.type,u=n.pendingProps.children,yo(n,o),m=Tr(m),u=u(m),n.flags|=1,Vn(e,n,u,o),n.child;case 14:return u=n.type,m=Hr(u,n.pendingProps),m=Hr(u.type,m),ch(e,n,u,m,o);case 15:return dh(e,n,n.type,n.pendingProps,o);case 17:return u=n.type,m=n.pendingProps,m=n.elementType===u?m:Hr(u,m),Cl(e,n),n.tag=1,er(u)?(e=!0,ll(n)):e=!1,yo(n,o),nh(n,u,m),tc(n,u,m,o),sc(null,n,u,!0,e,o);case 19:return _h(e,n,o);case 22:return hh(e,n,o)}throw Error(s(156,n.tag))};function Hh(e,n){return P(e,n)}function wm(e,n,o,u){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(e,n,o,u){return new wm(e,n,o,u)}function kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xm(e){if(typeof e=="function")return kc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===ne)return 14}return 2}function ls(e,n){var o=e.alternate;return o===null?(o=Ir(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function zl(e,n,o,u,m,v){var E=2;if(u=e,typeof e=="function")kc(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case j:return As(o.children,m,v,n);case Ye:E=8,m|=8;break;case Ge:return e=Ir(12,o,n,m|2),e.elementType=Ge,e.lanes=v,e;case We:return e=Ir(13,o,n,m),e.elementType=We,e.lanes=v,e;case se:return e=Ir(19,o,n,m),e.elementType=se,e.lanes=v,e;case $e:return Dl(o,m,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ut:E=10;break e;case ve:E=9;break e;case je:E=11;break e;case ne:E=14;break e;case we:E=16,u=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return n=Ir(E,o,n,m),n.elementType=e,n.type=u,n.lanes=v,n}function As(e,n,o,u){return e=Ir(7,e,u,n),e.lanes=o,e}function Dl(e,n,o,u){return e=Ir(22,e,u,n),e.elementType=$e,e.lanes=o,e.stateNode={isHidden:!1},e}function Cc(e,n,o){return e=Ir(6,e,null,n),e.lanes=o,e}function Pc(e,n,o){return n=Ir(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function bm(e,n,o,u,m){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xr(0),this.expirationTimes=Xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.identifierPrefix=u,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function jc(e,n,o,u,m,v,E,T,U){return e=new bm(e,n,o,T,U),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Ir(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fu(v),e}function Em(e,n,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:u==null?null:""+u,children:e,containerInfo:n,implementation:o}}function Wh(e){if(!e)return Qi;e=e._reactInternals;e:{if(Ve(e)!==e||e.tag!==1)throw Error(s(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(er(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(e.tag===1){var o=e.type;if(er(o))return yd(e,o,n)}return n}function Zh(e,n,o,u,m,v,E,T,U){return e=jc(o,u,!0,e,m,v,E,T,U),e.context=Wh(null),o=e.current,u=qn(),m=os(o),v=Ni(u,m),v.callback=n??null,ns(o,v,m),e.current.lanes=m,Ln(e,m,u),rr(e,u),e}function Bl(e,n,o,u){var m=n.current,v=qn(),E=os(m);return o=Wh(o),n.context===null?n.context=o:n.pendingContext=o,n=Ni(v,E),n.payload={element:e},u=u===void 0?null:u,u!==null&&(n.callback=u),e=ns(m,n,E),e!==null&&(Vr(e,m,E,v),gl(e,m,E)),E}function Ul(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Nc(e,n){Vh(e,n),(e=e.alternate)&&Vh(e,n)}function Sm(){return null}var qh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tc(e){this._internalRoot=e}Fl.prototype.render=Tc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));Bl(e,n,null,null)},Fl.prototype.unmount=Tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Os(function(){Bl(null,e,null,null)}),n[kt]=null}};function Fl(e){this._internalRoot=e}Fl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ai();e={blockedOn:null,target:e,priority:n};for(var o=0;o<fn.length&&n!==0&&n<fn[o].priority;o++);fn.splice(o,0,e),o===0&&Vs(e)}};function Lc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gh(){}function km(e,n,o,u,m){if(m){if(typeof u=="function"){var v=u;u=function(){var X=Ul(E);v.call(X)}}var E=Zh(n,u,e,0,null,!1,!1,"",Gh);return e._reactRootContainer=E,e[kt]=E.current,Gi(e.nodeType===8?e.parentNode:e),Os(),E}for(;m=e.lastChild;)e.removeChild(m);if(typeof u=="function"){var T=u;u=function(){var X=Ul(U);T.call(X)}}var U=jc(e,0,!1,null,null,!1,!1,"",Gh);return e._reactRootContainer=U,e[kt]=U.current,Gi(e.nodeType===8?e.parentNode:e),Os(function(){Bl(n,U,o,u)}),U}function Hl(e,n,o,u,m){var v=o._reactRootContainer;if(v){var E=v;if(typeof m=="function"){var T=m;m=function(){var U=Ul(E);T.call(U)}}Bl(n,E,e,m)}else E=km(o,n,e,m,u);return Ul(E)}zr=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Ce(n.pendingLanes);o!==0&&(ar(n,o|1),rr(n,Ee()),(_t&6)===0&&(Eo=Ee()+500,es()))}break;case 13:Os(function(){var u=ji(e,1);if(u!==null){var m=qn();Vr(u,e,1,m)}}),Nc(e,1)}},Sn=function(e){if(e.tag===13){var n=ji(e,134217728);if(n!==null){var o=qn();Vr(n,e,134217728,o)}Nc(e,134217728)}},Ri=function(e){if(e.tag===13){var n=os(e),o=ji(e,n);if(o!==null){var u=qn();Vr(o,e,n,u)}Nc(e,n)}},Ai=function(){return gt},fi=function(e,n){var o=gt;try{return gt=e,n()}finally{gt=o}},Re=function(e,n,o){switch(n){case"input":if(Et(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var u=o[n];if(u!==e&&u.form===e.form){var m=uo(u);if(!m)throw Error(s(90));Ne(u),Et(u,m)}}}break;case"textarea":Ue(e,o);break;case"select":n=o.value,n!=null&&Je(e,!!o.multiple,n,!1)}},Un=bc,Pt=Os;var Cm={usingClientEntryPoint:!1,Events:[Ei,Si,uo,xr,Wt,bc]},Sa={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pm={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jn(e),e===null?null:e.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||Sm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{Yr=Wl.inject(Pm),Qt=Wl}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cm,ir.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(n))throw Error(s(200));return Em(e,n,null,o)},ir.createRoot=function(e,n){if(!Lc(e))throw Error(s(299));var o=!1,u="",m=qh;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),n=jc(e,1,!1,null,null,o,!1,u,m),e[kt]=n.current,Gi(e.nodeType===8?e.parentNode:e),new Tc(n)},ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Jn(n),e=e===null?null:e.stateNode,e},ir.flushSync=function(e){return Os(e)},ir.hydrate=function(e,n,o){if(!$l(n))throw Error(s(200));return Hl(null,e,n,!0,o)},ir.hydrateRoot=function(e,n,o){if(!Lc(e))throw Error(s(405));var u=o!=null&&o.hydratedSources||null,m=!1,v="",E=qh;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),n=Zh(n,null,e,1,o??null,m,!1,v,E),e[kt]=n.current,Gi(e),u)for(e=0;e<u.length;e++)o=u[e],m=o._getVersion,m=m(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,m]:n.mutableSourceEagerHydrationData.push(o,m);return new Fl(n)},ir.render=function(e,n,o){if(!$l(n))throw Error(s(200));return Hl(null,e,n,!1,o)},ir.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return e._reactRootContainer?(Os(function(){Hl(null,null,e,!1,function(){e._reactRootContainer=null,e[kt]=null})}),!0):!1},ir.unstable_batchedUpdates=bc,ir.unstable_renderSubtreeIntoContainer=function(e,n,o,u){if(!$l(o))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Hl(e,n,o,!1,u)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var nf;function zm(){if(nf)return Rc.exports;nf=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(r){console.error(r)}}return d(),Rc.exports=Mm(),Rc.exports}var rf;function Dm(){if(rf)return Zl;rf=1;var d=zm();return Zl.createRoot=d.createRoot,Zl.hydrateRoot=d.hydrateRoot,Zl}var Bm=Dm(),qc=function(d,r){return qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])},qc(d,r)};function Vf(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");qc(d,r);function s(){this.constructor=d}d.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}var ru=function(){return ru=Object.assign||function(r){for(var s,l=1,h=arguments.length;l<h;l++){s=arguments[l];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(r[f]=s[f])}return r},ru.apply(this,arguments)};function Bo(d,r){var s={};for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&r.indexOf(l)<0&&(s[l]=d[l]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(d);h<l.length;h++)r.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(d,l[h])&&(s[l[h]]=d[l[h]]);return s}function qf(d,r,s,l){var h=arguments.length,f=h<3?r:l===null?l=Object.getOwnPropertyDescriptor(r,s):l,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(d,r,s,l);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(f=(h<3?g(f):h>3?g(r,s,f):g(r,s))||f);return h>3&&f&&Object.defineProperty(r,s,f),f}function Gf(d,r){return function(s,l){r(s,l,d)}}function Kf(d,r,s,l,h,f){function g(le){if(le!==void 0&&typeof le!="function")throw new TypeError("Function expected");return le}for(var _=l.kind,w=_==="getter"?"get":_==="setter"?"set":"value",C=!r&&d?l.static?d:d.prototype:null,N=r||(C?Object.getOwnPropertyDescriptor(C,l.name):{}),z,B=!1,F=s.length-1;F>=0;F--){var V={};for(var H in l)V[H]=H==="access"?{}:l[H];for(var H in l.access)V.access[H]=l.access[H];V.addInitializer=function(le){if(B)throw new TypeError("Cannot add initializers after decoration has completed");f.push(g(le||null))};var W=(0,s[F])(_==="accessor"?{get:N.get,set:N.set}:N[w],V);if(_==="accessor"){if(W===void 0)continue;if(W===null||typeof W!="object")throw new TypeError("Object expected");(z=g(W.get))&&(N.get=z),(z=g(W.set))&&(N.set=z),(z=g(W.init))&&h.unshift(z)}else(z=g(W))&&(_==="field"?h.unshift(z):N[w]=z)}C&&Object.defineProperty(C,l.name,N),B=!0}function Jf(d,r,s){for(var l=arguments.length>2,h=0;h<r.length;h++)s=l?r[h].call(d,s):r[h].call(d);return l?s:void 0}function Yf(d){return typeof d=="symbol"?d:"".concat(d)}function Xf(d,r,s){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:s?"".concat(s," ",r):r})}function Qf(d,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,r)}function Fe(d,r,s,l){function h(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function _(N){try{C(l.next(N))}catch(z){g(z)}}function w(N){try{C(l.throw(N))}catch(z){g(z)}}function C(N){N.done?f(N.value):h(N.value).then(_,w)}C((l=l.apply(d,r||[])).next())})}function ep(d,r){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,h,f,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=_(0),g.throw=_(1),g.return=_(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function _(C){return function(N){return w([C,N])}}function w(C){if(l)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(s=0)),s;)try{if(l=1,h&&(f=C[0]&2?h.return:C[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,C[1])).done)return f;switch(h=0,f&&(C=[C[0]&2,f.value]),C[0]){case 0:case 1:f=C;break;case 4:return s.label++,{value:C[1],done:!1};case 5:s.label++,h=C[1],C=[0];continue;case 7:C=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(C[0]===6||C[0]===2)){s=0;continue}if(C[0]===3&&(!f||C[1]>f[0]&&C[1]<f[3])){s.label=C[1];break}if(C[0]===6&&s.label<f[1]){s.label=f[1],f=C;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(C);break}f[2]&&s.ops.pop(),s.trys.pop();continue}C=r.call(d,s)}catch(N){C=[6,N],h=0}finally{l=f=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}var cu=Object.create?(function(d,r,s,l){l===void 0&&(l=s);var h=Object.getOwnPropertyDescriptor(r,s);(!h||("get"in h?!r.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(d,l,h)}):(function(d,r,s,l){l===void 0&&(l=s),d[l]=r[s]});function tp(d,r){for(var s in d)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&cu(r,d,s)}function iu(d){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&d[r],l=0;if(s)return s.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&l>=d.length&&(d=void 0),{value:d&&d[l++],done:!d}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function ud(d,r){var s=typeof Symbol=="function"&&d[Symbol.iterator];if(!s)return d;var l=s.call(d),h,f=[],g;try{for(;(r===void 0||r-- >0)&&!(h=l.next()).done;)f.push(h.value)}catch(_){g={error:_}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(g)throw g.error}}return f}function np(){for(var d=[],r=0;r<arguments.length;r++)d=d.concat(ud(arguments[r]));return d}function rp(){for(var d=0,r=0,s=arguments.length;r<s;r++)d+=arguments[r].length;for(var l=Array(d),h=0,r=0;r<s;r++)for(var f=arguments[r],g=0,_=f.length;g<_;g++,h++)l[h]=f[g];return l}function ip(d,r,s){if(s||arguments.length===2)for(var l=0,h=r.length,f;l<h;l++)(f||!(l in r))&&(f||(f=Array.prototype.slice.call(r,0,l)),f[l]=r[l]);return d.concat(f||Array.prototype.slice.call(r))}function Do(d){return this instanceof Do?(this.v=d,this):new Do(d)}function sp(d,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(d,r||[]),h,f=[];return h=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),_("next"),_("throw"),_("return",g),h[Symbol.asyncIterator]=function(){return this},h;function g(F){return function(V){return Promise.resolve(V).then(F,z)}}function _(F,V){l[F]&&(h[F]=function(H){return new Promise(function(W,le){f.push([F,H,W,le])>1||w(F,H)})},V&&(h[F]=V(h[F])))}function w(F,V){try{C(l[F](V))}catch(H){B(f[0][3],H)}}function C(F){F.value instanceof Do?Promise.resolve(F.value.v).then(N,z):B(f[0][2],F)}function N(F){w("next",F)}function z(F){w("throw",F)}function B(F,V){F(V),f.shift(),f.length&&w(f[0][0],f[0][1])}}function op(d){var r,s;return r={},l("next"),l("throw",function(h){throw h}),l("return"),r[Symbol.iterator]=function(){return this},r;function l(h,f){r[h]=d[h]?function(g){return(s=!s)?{value:Do(d[h](g)),done:!1}:f?f(g):g}:f}}function ap(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=d[Symbol.asyncIterator],s;return r?r.call(d):(d=typeof iu=="function"?iu(d):d[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(f){s[f]=d[f]&&function(g){return new Promise(function(_,w){g=d[f](g),h(_,w,g.done,g.value)})}}function h(f,g,_,w){Promise.resolve(w).then(function(C){f({value:C,done:_})},g)}}function lp(d,r){return Object.defineProperty?Object.defineProperty(d,"raw",{value:r}):d.raw=r,d}var Um=Object.create?(function(d,r){Object.defineProperty(d,"default",{enumerable:!0,value:r})}):function(d,r){d.default=r},Gc=function(d){return Gc=Object.getOwnPropertyNames||function(r){var s=[];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[s.length]=l);return s},Gc(d)};function up(d){if(d&&d.__esModule)return d;var r={};if(d!=null)for(var s=Gc(d),l=0;l<s.length;l++)s[l]!=="default"&&cu(r,d,s[l]);return Um(r,d),r}function cp(d){return d&&d.__esModule?d:{default:d}}function dp(d,r,s,l){if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?d!==r||!l:!r.has(d))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?l:s==="a"?l.call(d):l?l.value:r.get(d)}function hp(d,r,s,l,h){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?d!==r||!h:!r.has(d))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?h.call(d,s):h?h.value=s:r.set(d,s),s}function fp(d,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof d=="function"?r===d:d.has(r)}function pp(d,r,s){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var l,h;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=r[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=r[Symbol.dispose],s&&(h=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");h&&(l=function(){try{h.call(this)}catch(f){return Promise.reject(f)}}),d.stack.push({value:r,dispose:l,async:s})}else s&&d.stack.push({async:!0});return r}var Fm=typeof SuppressedError=="function"?SuppressedError:function(d,r,s){var l=new Error(s);return l.name="SuppressedError",l.error=d,l.suppressed=r,l};function mp(d){function r(f){d.error=d.hasError?new Fm(f,d.error,"An error was suppressed during disposal."):f,d.hasError=!0}var s,l=0;function h(){for(;s=d.stack.pop();)try{if(!s.async&&l===1)return l=0,d.stack.push(s),Promise.resolve().then(h);if(s.dispose){var f=s.dispose.call(s.value);if(s.async)return l|=2,Promise.resolve(f).then(h,function(g){return r(g),h()})}else l|=1}catch(g){r(g)}if(l===1)return d.hasError?Promise.reject(d.error):Promise.resolve();if(d.hasError)throw d.error}return h()}function gp(d,r){return typeof d=="string"&&/^\.\.?\//.test(d)?d.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,l,h,f,g){return l?r?".jsx":".js":h&&(!f||!g)?s:h+f+"."+g.toLowerCase()+"js"}):d}const $m={__extends:Vf,__assign:ru,__rest:Bo,__decorate:qf,__param:Gf,__esDecorate:Kf,__runInitializers:Jf,__propKey:Yf,__setFunctionName:Xf,__metadata:Qf,__awaiter:Fe,__generator:ep,__createBinding:cu,__exportStar:tp,__values:iu,__read:ud,__spread:np,__spreadArrays:rp,__spreadArray:ip,__await:Do,__asyncGenerator:sp,__asyncDelegator:op,__asyncValues:ap,__makeTemplateObject:lp,__importStar:up,__importDefault:cp,__classPrivateFieldGet:dp,__classPrivateFieldSet:hp,__classPrivateFieldIn:fp,__addDisposableResource:pp,__disposeResources:mp,__rewriteRelativeImportExtension:gp},Hm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:pp,get __assign(){return ru},__asyncDelegator:op,__asyncGenerator:sp,__asyncValues:ap,__await:Do,__awaiter:Fe,__classPrivateFieldGet:dp,__classPrivateFieldIn:fp,__classPrivateFieldSet:hp,__createBinding:cu,__decorate:qf,__disposeResources:mp,__esDecorate:Kf,__exportStar:tp,__extends:Vf,__generator:ep,__importDefault:cp,__importStar:up,__makeTemplateObject:lp,__metadata:Qf,__param:Gf,__propKey:Yf,__read:ud,__rest:Bo,__rewriteRelativeImportExtension:gp,__runInitializers:Jf,__setFunctionName:Xf,__spread:np,__spreadArray:ip,__spreadArrays:rp,__values:iu,default:$m},Symbol.toStringTag,{value:"Module"})),Wm=d=>d?(...r)=>d(...r):(...r)=>fetch(...r);class cd extends Error{constructor(r,s="FunctionsError",l){super(r),this.name=s,this.context=l}}class Zm extends cd{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class sf extends cd{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class of extends cd{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Kc;(function(d){d.Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2"})(Kc||(Kc={}));class Vm{constructor(r,{headers:s={},customFetch:l,region:h=Kc.Any}={}){this.url=r,this.headers=s,this.region=h,this.fetch=Wm(l)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Fe(this,arguments,void 0,function*(s,l={}){var h;let f,g;try{const{headers:_,method:w,body:C,signal:N,timeout:z}=l;let B={},{region:F}=l;F||(F=this.region);const V=new URL(`${this.url}/${s}`);F&&F!=="any"&&(B["x-region"]=F,V.searchParams.set("forceFunctionRegion",F));let H;C&&(_&&!Object.prototype.hasOwnProperty.call(_,"Content-Type")||!_)?typeof Blob<"u"&&C instanceof Blob||C instanceof ArrayBuffer?(B["Content-Type"]="application/octet-stream",H=C):typeof C=="string"?(B["Content-Type"]="text/plain",H=C):typeof FormData<"u"&&C instanceof FormData?H=C:(B["Content-Type"]="application/json",H=JSON.stringify(C)):H=C;let W=N;z&&(g=new AbortController,f=setTimeout(()=>g.abort(),z),N?(W=g.signal,N.addEventListener("abort",()=>g.abort())):W=g.signal);const le=yield this.fetch(V.toString(),{method:w||"POST",headers:Object.assign(Object.assign(Object.assign({},B),this.headers),_),body:H,signal:W}).catch(be=>{throw new Zm(be)}),_e=le.headers.get("x-relay-error");if(_e&&_e==="true")throw new sf(le);if(!le.ok)throw new of(le);let Q=((h=le.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),ge;return Q==="application/json"?ge=yield le.json():Q==="application/octet-stream"||Q==="application/pdf"?ge=yield le.blob():Q==="text/event-stream"?ge=le:Q==="multipart/form-data"?ge=yield le.formData():ge=yield le.text(),{data:ge,error:null,response:le}}catch(_){return{data:null,error:_,response:_ instanceof of||_ instanceof sf?_.context:void 0}}finally{f&&clearTimeout(f)}})}}var Dn={};const Uo=Tm(Hm);var Vl={},ql={},Gl={},Kl={},Jl={},Yl={},af;function vp(){if(af)return Yl;af=1,Object.defineProperty(Yl,"__esModule",{value:!0});class d extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Yl.default=d,Yl}var lf;function yp(){if(lf)return Jl;lf=1,Object.defineProperty(Jl,"__esModule",{value:!0});const r=Uo.__importDefault(vp());class s{constructor(h){var f,g;this.shouldThrowOnError=!1,this.method=h.method,this.url=h.url,this.headers=new Headers(h.headers),this.schema=h.schema,this.body=h.body,this.shouldThrowOnError=(f=h.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=h.signal,this.isMaybeSingle=(g=h.isMaybeSingle)!==null&&g!==void 0?g:!1,h.fetch?this.fetch=h.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(h,f){return this.headers=new Headers(this.headers),this.headers.set(h,f),this}then(h,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let _=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async w=>{var C,N,z,B;let F=null,V=null,H=null,W=w.status,le=w.statusText;if(w.ok){if(this.method!=="HEAD"){const be=await w.text();be===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((C=this.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?V=be:V=JSON.parse(be))}const Q=(N=this.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),ge=(z=w.headers.get("content-range"))===null||z===void 0?void 0:z.split("/");Q&&ge&&ge.length>1&&(H=parseInt(ge[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(V)&&(V.length>1?(F={code:"PGRST116",details:`Results contain ${V.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},V=null,H=null,W=406,le="Not Acceptable"):V.length===1?V=V[0]:V=null)}else{const Q=await w.text();try{F=JSON.parse(Q),Array.isArray(F)&&w.status===404&&(V=[],F=null,W=200,le="OK")}catch{w.status===404&&Q===""?(W=204,le="No Content"):F={message:Q}}if(F&&this.isMaybeSingle&&(!((B=F?.details)===null||B===void 0)&&B.includes("0 rows"))&&(F=null,W=200,le="OK"),F&&this.shouldThrowOnError)throw new r.default(F)}return{error:F,data:V,count:H,status:W,statusText:le}});return this.shouldThrowOnError||(_=_.catch(w=>{var C,N,z,B,F,V;let H="";const W=w?.cause;if(W){const le=(C=W?.message)!==null&&C!==void 0?C:"",_e=(N=W?.code)!==null&&N!==void 0?N:"";H=`${(z=w?.name)!==null&&z!==void 0?z:"FetchError"}: ${w?.message}`,H+=`

Caused by: ${(B=W?.name)!==null&&B!==void 0?B:"Error"}: ${le}`,_e&&(H+=` (${_e})`),W?.stack&&(H+=`
${W.stack}`)}else H=(F=w?.stack)!==null&&F!==void 0?F:"";return{error:{message:`${(V=w?.name)!==null&&V!==void 0?V:"FetchError"}: ${w?.message}`,details:H,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),_.then(h,f)}returns(){return this}overrideTypes(){return this}}return Jl.default=s,Jl}var uf;function _p(){if(uf)return Kl;uf=1,Object.defineProperty(Kl,"__esModule",{value:!0});const r=Uo.__importDefault(yp());class s extends r.default{select(h){let f=!1;const g=(h??"*").split("").map(_=>/\s/.test(_)&&!f?"":(_==='"'&&(f=!f),_)).join("");return this.url.searchParams.set("select",g),this.headers.append("Prefer","return=representation"),this}order(h,{ascending:f=!0,nullsFirst:g,foreignTable:_,referencedTable:w=_}={}){const C=w?`${w}.order`:"order",N=this.url.searchParams.get(C);return this.url.searchParams.set(C,`${N?`${N},`:""}${h}.${f?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(h,{foreignTable:f,referencedTable:g=f}={}){const _=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(_,`${h}`),this}range(h,f,{foreignTable:g,referencedTable:_=g}={}){const w=typeof _>"u"?"offset":`${_}.offset`,C=typeof _>"u"?"limit":`${_}.limit`;return this.url.searchParams.set(w,`${h}`),this.url.searchParams.set(C,`${f-h+1}`),this}abortSignal(h){return this.signal=h,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:h=!1,verbose:f=!1,settings:g=!1,buffers:_=!1,wal:w=!1,format:C="text"}={}){var N;const z=[h?"analyze":null,f?"verbose":null,g?"settings":null,_?"buffers":null,w?"wal":null].filter(Boolean).join("|"),B=(N=this.headers.get("Accept"))!==null&&N!==void 0?N:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${C}; for="${B}"; options=${z};`),C==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(h){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${h}`),this}}return Kl.default=s,Kl}var cf;function dd(){if(cf)return Gl;cf=1,Object.defineProperty(Gl,"__esModule",{value:!0});const r=Uo.__importDefault(_p()),s=new RegExp("[,()]");class l extends r.default{eq(f,g){return this.url.searchParams.append(f,`eq.${g}`),this}neq(f,g){return this.url.searchParams.append(f,`neq.${g}`),this}gt(f,g){return this.url.searchParams.append(f,`gt.${g}`),this}gte(f,g){return this.url.searchParams.append(f,`gte.${g}`),this}lt(f,g){return this.url.searchParams.append(f,`lt.${g}`),this}lte(f,g){return this.url.searchParams.append(f,`lte.${g}`),this}like(f,g){return this.url.searchParams.append(f,`like.${g}`),this}likeAllOf(f,g){return this.url.searchParams.append(f,`like(all).{${g.join(",")}}`),this}likeAnyOf(f,g){return this.url.searchParams.append(f,`like(any).{${g.join(",")}}`),this}ilike(f,g){return this.url.searchParams.append(f,`ilike.${g}`),this}ilikeAllOf(f,g){return this.url.searchParams.append(f,`ilike(all).{${g.join(",")}}`),this}ilikeAnyOf(f,g){return this.url.searchParams.append(f,`ilike(any).{${g.join(",")}}`),this}regexMatch(f,g){return this.url.searchParams.append(f,`match.${g}`),this}regexIMatch(f,g){return this.url.searchParams.append(f,`imatch.${g}`),this}is(f,g){return this.url.searchParams.append(f,`is.${g}`),this}isDistinct(f,g){return this.url.searchParams.append(f,`isdistinct.${g}`),this}in(f,g){const _=Array.from(new Set(g)).map(w=>typeof w=="string"&&s.test(w)?`"${w}"`:`${w}`).join(",");return this.url.searchParams.append(f,`in.(${_})`),this}contains(f,g){return typeof g=="string"?this.url.searchParams.append(f,`cs.${g}`):Array.isArray(g)?this.url.searchParams.append(f,`cs.{${g.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(g)}`),this}containedBy(f,g){return typeof g=="string"?this.url.searchParams.append(f,`cd.${g}`):Array.isArray(g)?this.url.searchParams.append(f,`cd.{${g.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(g)}`),this}rangeGt(f,g){return this.url.searchParams.append(f,`sr.${g}`),this}rangeGte(f,g){return this.url.searchParams.append(f,`nxl.${g}`),this}rangeLt(f,g){return this.url.searchParams.append(f,`sl.${g}`),this}rangeLte(f,g){return this.url.searchParams.append(f,`nxr.${g}`),this}rangeAdjacent(f,g){return this.url.searchParams.append(f,`adj.${g}`),this}overlaps(f,g){return typeof g=="string"?this.url.searchParams.append(f,`ov.${g}`):this.url.searchParams.append(f,`ov.{${g.join(",")}}`),this}textSearch(f,g,{config:_,type:w}={}){let C="";w==="plain"?C="pl":w==="phrase"?C="ph":w==="websearch"&&(C="w");const N=_===void 0?"":`(${_})`;return this.url.searchParams.append(f,`${C}fts${N}.${g}`),this}match(f){return Object.entries(f).forEach(([g,_])=>{this.url.searchParams.append(g,`eq.${_}`)}),this}not(f,g,_){return this.url.searchParams.append(f,`not.${g}.${_}`),this}or(f,{foreignTable:g,referencedTable:_=g}={}){const w=_?`${_}.or`:"or";return this.url.searchParams.append(w,`(${f})`),this}filter(f,g,_){return this.url.searchParams.append(f,`${g}.${_}`),this}}return Gl.default=l,Gl}var df;function wp(){if(df)return ql;df=1,Object.defineProperty(ql,"__esModule",{value:!0});const r=Uo.__importDefault(dd());class s{constructor(h,{headers:f={},schema:g,fetch:_}){this.url=h,this.headers=new Headers(f),this.schema=g,this.fetch=_}select(h,f){const{head:g=!1,count:_}=f??{},w=g?"HEAD":"GET";let C=!1;const N=(h??"*").split("").map(z=>/\s/.test(z)&&!C?"":(z==='"'&&(C=!C),z)).join("");return this.url.searchParams.set("select",N),_&&this.headers.append("Prefer",`count=${_}`),new r.default({method:w,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(h,{count:f,defaultToNull:g=!0}={}){var _;const w="POST";if(f&&this.headers.append("Prefer",`count=${f}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(h)){const C=h.reduce((N,z)=>N.concat(Object.keys(z)),[]);if(C.length>0){const N=[...new Set(C)].map(z=>`"${z}"`);this.url.searchParams.set("columns",N.join(","))}}return new r.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}upsert(h,{onConflict:f,ignoreDuplicates:g=!1,count:_,defaultToNull:w=!0}={}){var C;const N="POST";if(this.headers.append("Prefer",`resolution=${g?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),_&&this.headers.append("Prefer",`count=${_}`),w||this.headers.append("Prefer","missing=default"),Array.isArray(h)){const z=h.reduce((B,F)=>B.concat(Object.keys(F)),[]);if(z.length>0){const B=[...new Set(z)].map(F=>`"${F}"`);this.url.searchParams.set("columns",B.join(","))}}return new r.default({method:N,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(C=this.fetch)!==null&&C!==void 0?C:fetch})}update(h,{count:f}={}){var g;const _="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new r.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}delete({count:h}={}){var f;const g="DELETE";return h&&this.headers.append("Prefer",`count=${h}`),new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return ql.default=s,ql}var hf;function qm(){if(hf)return Vl;hf=1,Object.defineProperty(Vl,"__esModule",{value:!0});const d=Uo,r=d.__importDefault(wp()),s=d.__importDefault(dd());class l{constructor(f,{headers:g={},schema:_,fetch:w}={}){this.url=f,this.headers=new Headers(g),this.schemaName=_,this.fetch=w}from(f){if(!f||typeof f!="string"||f.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const g=new URL(`${this.url}/${f}`);return new r.default(g,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new l(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,g={},{head:_=!1,get:w=!1,count:C}={}){var N;let z;const B=new URL(`${this.url}/rpc/${f}`);let F;_||w?(z=_?"HEAD":"GET",Object.entries(g).filter(([H,W])=>W!==void 0).map(([H,W])=>[H,Array.isArray(W)?`{${W.join(",")}}`:`${W}`]).forEach(([H,W])=>{B.searchParams.append(H,W)})):(z="POST",F=g);const V=new Headers(this.headers);return C&&V.set("Prefer",`count=${C}`),new s.default({method:z,url:B,headers:V,schema:this.schemaName,body:F,fetch:(N=this.fetch)!==null&&N!==void 0?N:fetch})}}return Vl.default=l,Vl}var ff;function Gm(){if(ff)return Dn;ff=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.PostgrestError=Dn.PostgrestBuilder=Dn.PostgrestTransformBuilder=Dn.PostgrestFilterBuilder=Dn.PostgrestQueryBuilder=Dn.PostgrestClient=void 0;const d=Uo,r=d.__importDefault(qm());Dn.PostgrestClient=r.default;const s=d.__importDefault(wp());Dn.PostgrestQueryBuilder=s.default;const l=d.__importDefault(dd());Dn.PostgrestFilterBuilder=l.default;const h=d.__importDefault(_p());Dn.PostgrestTransformBuilder=h.default;const f=d.__importDefault(yp());Dn.PostgrestBuilder=f.default;const g=d.__importDefault(vp());return Dn.PostgrestError=g.default,Dn.default={PostgrestClient:r.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:f.default,PostgrestError:g.default},Dn}var xp=Gm();const bp=Zf(xp),Km=Nm({__proto__:null,default:bp},[xp]),{PostgrestClient:Jm,PostgrestQueryBuilder:H0,PostgrestFilterBuilder:W0,PostgrestTransformBuilder:Z0,PostgrestBuilder:V0,PostgrestError:q0}=bp||Km;class Ym{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const l=s.node,h=parseInt(l.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const l=this.getWebSocketConstructor();return new l(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Xm="2.86.0",Qm=`realtime-js/${Xm}`,Ep="1.0.0",eg="2.0.0",pf=Ep,Jc=1e4,tg=1e3,ng=100;var Bs;(function(d){d[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed"})(Bs||(Bs={}));var vn;(function(d){d.closed="closed",d.errored="errored",d.joined="joined",d.joining="joining",d.leaving="leaving"})(vn||(vn={}));var Kr;(function(d){d.close="phx_close",d.error="phx_error",d.join="phx_join",d.reply="phx_reply",d.leave="phx_leave",d.access_token="access_token"})(Kr||(Kr={}));var Yc;(function(d){d.websocket="websocket"})(Yc||(Yc={}));var Us;(function(d){d.Connecting="connecting",d.Open="open",d.Closing="closing",d.Closed="closed"})(Us||(Us={}));class rg{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let l=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,l;const h=(l=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,h)}_encodeJsonUserBroadcastPush(r){var s,l;const h=(l=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&l!==void 0?l:{},g=new TextEncoder().encode(JSON.stringify(h)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,g)}_encodeUserBroadcastPush(r,s,l){var h,f;const g=r.topic,_=(h=r.ref)!==null&&h!==void 0?h:"",w=(f=r.join_ref)!==null&&f!==void 0?f:"",C=r.payload.event,N=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},z=Object.keys(N).length===0?"":JSON.stringify(N);if(w.length>255)throw new Error(`joinRef length ${w.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`ref length ${_.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`topic length ${g.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`userEvent length ${C.length} exceeds maximum of 255`);if(z.length>255)throw new Error(`metadata length ${z.length} exceeds maximum of 255`);const B=this.USER_BROADCAST_PUSH_META_LENGTH+w.length+_.length+g.length+C.length+z.length,F=new ArrayBuffer(this.HEADER_LENGTH+B);let V=new DataView(F),H=0;V.setUint8(H++,this.KINDS.userBroadcastPush),V.setUint8(H++,w.length),V.setUint8(H++,_.length),V.setUint8(H++,g.length),V.setUint8(H++,C.length),V.setUint8(H++,z.length),V.setUint8(H++,s),Array.from(w,le=>V.setUint8(H++,le.charCodeAt(0))),Array.from(_,le=>V.setUint8(H++,le.charCodeAt(0))),Array.from(g,le=>V.setUint8(H++,le.charCodeAt(0))),Array.from(C,le=>V.setUint8(H++,le.charCodeAt(0))),Array.from(z,le=>V.setUint8(H++,le.charCodeAt(0)));var W=new Uint8Array(F.byteLength+l.byteLength);return W.set(new Uint8Array(F),0),W.set(new Uint8Array(l),F.byteLength),W.buffer}decode(r,s){if(this._isArrayBuffer(r)){let l=this._binaryDecode(r);return s(l)}if(typeof r=="string"){const l=JSON.parse(r),[h,f,g,_,w]=l;return s({join_ref:h,ref:f,topic:g,event:_,payload:w})}return s({})}_binaryDecode(r){const s=new DataView(r),l=s.getUint8(0),h=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,h)}}_decodeUserBroadcast(r,s,l){const h=s.getUint8(1),f=s.getUint8(2),g=s.getUint8(3),_=s.getUint8(4);let w=this.HEADER_LENGTH+4;const C=l.decode(r.slice(w,w+h));w=w+h;const N=l.decode(r.slice(w,w+f));w=w+f;const z=l.decode(r.slice(w,w+g));w=w+g;const B=r.slice(w,r.byteLength),F=_===this.JSON_ENCODING?JSON.parse(l.decode(B)):B,V={type:this.BROADCAST_EVENT,event:N,payload:F};return g>0&&(V.meta=JSON.parse(z)),{join_ref:null,ref:null,topic:C,event:this.BROADCAST_EVENT,payload:V}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([l])=>s.includes(l)))}}class Sp{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zt;(function(d){d.abstime="abstime",d.bool="bool",d.date="date",d.daterange="daterange",d.float4="float4",d.float8="float8",d.int2="int2",d.int4="int4",d.int4range="int4range",d.int8="int8",d.int8range="int8range",d.json="json",d.jsonb="jsonb",d.money="money",d.numeric="numeric",d.oid="oid",d.reltime="reltime",d.text="text",d.time="time",d.timestamp="timestamp",d.timestamptz="timestamptz",d.timetz="timetz",d.tsrange="tsrange",d.tstzrange="tstzrange"})(zt||(zt={}));const mf=(d,r,s={})=>{var l;const h=(l=s.skipTypes)!==null&&l!==void 0?l:[];return r?Object.keys(r).reduce((f,g)=>(f[g]=ig(g,d,r,h),f),{}):{}},ig=(d,r,s,l)=>{const h=r.find(_=>_.name===d),f=h?.type,g=s[d];return f&&!l.includes(f)?kp(f,g):Xc(g)},kp=(d,r)=>{if(d.charAt(0)==="_"){const s=d.slice(1,d.length);return lg(r,s)}switch(d){case zt.bool:return sg(r);case zt.float4:case zt.float8:case zt.int2:case zt.int4:case zt.int8:case zt.numeric:case zt.oid:return og(r);case zt.json:case zt.jsonb:return ag(r);case zt.timestamp:return ug(r);case zt.abstime:case zt.date:case zt.daterange:case zt.int4range:case zt.int8range:case zt.money:case zt.reltime:case zt.text:case zt.time:case zt.timestamptz:case zt.timetz:case zt.tsrange:case zt.tstzrange:return Xc(r);default:return Xc(r)}},Xc=d=>d,sg=d=>{switch(d){case"t":return!0;case"f":return!1;default:return d}},og=d=>{if(typeof d=="string"){const r=parseFloat(d);if(!Number.isNaN(r))return r}return d},ag=d=>{if(typeof d=="string")try{return JSON.parse(d)}catch(r){return console.log(`JSON parse error: ${r}`),d}return d},lg=(d,r)=>{if(typeof d!="string")return d;const s=d.length-1,l=d[s];if(d[0]==="{"&&l==="}"){let f;const g=d.slice(1,s);try{f=JSON.parse("["+g+"]")}catch{f=g?g.split(","):[]}return f.map(_=>kp(r,_))}return d},ug=d=>typeof d=="string"?d.replace(" ","T"):d,Cp=d=>{const r=new URL(d);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class zc{constructor(r,s,l={},h=Jc){this.channel=r,this.event=s,this.payload=l,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var l;return this._hasReceived(r)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(l=>l.status===r).forEach(l=>l.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var gf;(function(d){d.SYNC="sync",d.JOIN="join",d.LEAVE="leave"})(gf||(gf={}));class La{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},h=>{const{onJoin:f,onLeave:g,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=La.syncState(this.state,h,f,g),this.pendingDiffs.forEach(w=>{this.state=La.syncDiff(this.state,w,f,g)}),this.pendingDiffs=[],_()}),this.channel._on(l.diff,{},h=>{const{onJoin:f,onLeave:g,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=La.syncDiff(this.state,h,f,g),_())}),this.onJoin((h,f,g)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:f,newPresences:g})}),this.onLeave((h,f,g)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:f,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,l,h){const f=this.cloneDeep(r),g=this.transformState(s),_={},w={};return this.map(f,(C,N)=>{g[C]||(w[C]=N)}),this.map(g,(C,N)=>{const z=f[C];if(z){const B=N.map(W=>W.presence_ref),F=z.map(W=>W.presence_ref),V=N.filter(W=>F.indexOf(W.presence_ref)<0),H=z.filter(W=>B.indexOf(W.presence_ref)<0);V.length>0&&(_[C]=V),H.length>0&&(w[C]=H)}else _[C]=N}),this.syncDiff(f,{joins:_,leaves:w},l,h)}static syncDiff(r,s,l,h){const{joins:f,leaves:g}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),h||(h=()=>{}),this.map(f,(_,w)=>{var C;const N=(C=r[_])!==null&&C!==void 0?C:[];if(r[_]=this.cloneDeep(w),N.length>0){const z=r[_].map(F=>F.presence_ref),B=N.filter(F=>z.indexOf(F.presence_ref)<0);r[_].unshift(...B)}l(_,N,w)}),this.map(g,(_,w)=>{let C=r[_];if(!C)return;const N=w.map(z=>z.presence_ref);C=C.filter(z=>N.indexOf(z.presence_ref)<0),r[_]=C,h(_,C,w),C.length===0&&delete r[_]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(l=>s(l,r[l]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,l)=>{const h=r[l];return"metas"in h?s[l]=h.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):s[l]=h,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vf;(function(d){d.ALL="*",d.INSERT="INSERT",d.UPDATE="UPDATE",d.DELETE="DELETE"})(vf||(vf={}));var Oa;(function(d){d.BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system"})(Oa||(Oa={}));var Oi;(function(d){d.SUBSCRIBED="SUBSCRIBED",d.TIMED_OUT="TIMED_OUT",d.CLOSED="CLOSED",d.CHANNEL_ERROR="CHANNEL_ERROR"})(Oi||(Oi={}));class hd{constructor(r,s={config:{}},l){var h,f;if(this.topic=r,this.params=s,this.socket=l,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zc(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new Sp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(g,_)=>{this._trigger(this._replyEventName(_),g)}),this.presence=new La(this),this.broadcastEndpointURL=Cp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(h=this.params.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var l,h,f;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:g,presence:_,private:w}}=this.params,C=(h=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(F=>F.filter))!==null&&h!==void 0?h:[],N=!!this.bindings[Oa.PRESENCE]&&this.bindings[Oa.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,z={},B={broadcast:g,presence:Object.assign(Object.assign({},_),{enabled:N}),postgres_changes:C,private:w};this.socket.accessTokenValue&&(z.access_token=this.socket.accessTokenValue),this._onError(F=>r?.(Oi.CHANNEL_ERROR,F)),this._onClose(()=>r?.(Oi.CLOSED)),this.updateJoinPayload(Object.assign({config:B},z)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:F})=>{var V;if(this.socket.setAuth(),F===void 0){r?.(Oi.SUBSCRIBED);return}else{const H=this.bindings.postgres_changes,W=(V=H?.length)!==null&&V!==void 0?V:0,le=[];for(let _e=0;_e<W;_e++){const Q=H[_e],{filter:{event:ge,schema:be,table:O,filter:j}}=Q,Ye=F&&F[_e];if(Ye&&Ye.event===ge&&Ye.schema===be&&Ye.table===O&&Ye.filter===j)le.push(Object.assign(Object.assign({},Q),{id:Ye.id}));else{this.unsubscribe(),this.state=vn.errored,r?.(Oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=le,r&&r(Oi.SUBSCRIBED);return}}).receive("error",F=>{this.state=vn.errored,r?.(Oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(F).join(", ")||"error")))}).receive("timeout",()=>{r?.(Oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,l){return this.state===vn.joined&&r===Oa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,s,l)}async httpSend(r,s,l={}){var h;const f=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const g={method:"POST",headers:{Authorization:f,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},_=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(h=l.timeout)!==null&&h!==void 0?h:this.timeout);if(_.status===202)return{success:!0};let w=_.statusText;try{const C=await _.json();w=C.error||C.message||w}catch{}return Promise.reject(new Error(w))}async send(r,s={}){var l,h;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:g}=r,w={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:g,private:this.private}]})};try{const C=await this._fetchWithTimeout(this.broadcastEndpointURL,w,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((h=C.body)===null||h===void 0?void 0:h.cancel()),C.ok?"ok":"error"}catch(C){return C.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var g,_,w;const C=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((w=(_=(g=this.params)===null||g===void 0?void 0:g.config)===null||_===void 0?void 0:_.broadcast)===null||w===void 0)&&w.ack)&&f("ok"),C.receive("ok",()=>f("ok")),C.receive("error",()=>f("error")),C.receive("timeout",()=>f("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=vn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(h=>{l=new zc(this,Kr.leave,{},r),l.receive("ok",()=>{s(),h("ok")}).receive("timeout",()=>{s(),h("timed out")}).receive("error",()=>{h("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(r,s,l){const h=new AbortController,f=setTimeout(()=>h.abort(),l),g=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:h.signal}));return clearTimeout(f),g}_push(r,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new zc(this,r,s,l);return this._canPush()?h.send():this._addToPushBuffer(h),h}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>ng){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,l){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,l){var h,f;const g=r.toLocaleLowerCase(),{close:_,error:w,leave:C,join:N}=Kr;if(l&&[_,w,C,N].indexOf(g)>=0&&l!==this._joinRef())return;let B=this._onMessage(g,s,l);if(s&&!B)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(F=>{var V,H,W;return((V=F.filter)===null||V===void 0?void 0:V.event)==="*"||((W=(H=F.filter)===null||H===void 0?void 0:H.event)===null||W===void 0?void 0:W.toLocaleLowerCase())===g}).map(F=>F.callback(B,l)):(f=this.bindings[g])===null||f===void 0||f.filter(F=>{var V,H,W,le,_e,Q;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in F){const ge=F.id,be=(V=F.filter)===null||V===void 0?void 0:V.event;return ge&&((H=s.ids)===null||H===void 0?void 0:H.includes(ge))&&(be==="*"||be?.toLocaleLowerCase()===((W=s.data)===null||W===void 0?void 0:W.type.toLocaleLowerCase()))}else{const ge=(_e=(le=F?.filter)===null||le===void 0?void 0:le.event)===null||_e===void 0?void 0:_e.toLocaleLowerCase();return ge==="*"||ge===((Q=s?.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())}else return F.type.toLocaleLowerCase()===g}).map(F=>{if(typeof B=="object"&&"ids"in B){const V=B.data,{schema:H,table:W,commit_timestamp:le,type:_e,errors:Q}=V;B=Object.assign(Object.assign({},{schema:H,table:W,commit_timestamp:le,eventType:_e,new:{},old:{},errors:Q}),this._getPayloadRecords(V))}F.callback(B,l)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,l){const h=r.toLocaleLowerCase(),f={type:h,filter:s,callback:l};return this.bindings[h]?this.bindings[h].push(f):this.bindings[h]=[f],this}_off(r,s){const l=r.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(h=>{var f;return!(((f=h.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===l&&hd.isEqual(h.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const l in r)if(r[l]!==s[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Kr.close,{},r)}_onError(r){this._on(Kr.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=mf(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=mf(r.columns,r.old_record)),s}}const Dc=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cg=[1e3,2e3,5e3,1e4],dg=1e4,hg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fg{constructor(r,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jc,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dc,this.ref=0,this.reconnectTimer=null,this.vsn=pf,this.logger=Dc,this.conn=null,this.sendBuffer=[],this.serializer=new rg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=h=>h?(...f)=>h(...f):(...f)=>fetch(...f),!(!((l=s?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Yc.websocket}`,this.httpEndpoint=Cp(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ym.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,l){this.logger(r,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Bs.connecting:return Us.Connecting;case Bs.open:return Us.Open;case Bs.closing:return Us.Closing;default:return Us.Closed}}isConnected(){return this.connectionState()===Us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const l=`realtime:${r}`,h=this.getChannels().find(f=>f.topic===l);if(h)return h;{const f=new hd(`realtime:${r}`,s,this);return this.channels.push(f),f}}push(r){const{topic:s,event:l,payload:h,ref:f}=r,g=()=>{this.encode(r,_=>{var w;(w=this.conn)===null||w===void 0||w.send(_)})};this.log("push",`${s} ${l} (${f})`,h),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(tg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(l=>l.topic===r&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(C){this.log("error","error in heartbeat callback",C)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:h,payload:f,ref:g}=s,_=g?`(${g})`:"",w=f.status||"";this.log("receive",`${w} ${l} ${h} ${_}`.trim(),f),this.channels.filter(C=>C._isMember(l)).forEach(C=>C._trigger(h,f,g)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Bs.open||this.conn.readyState===Bs.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Kr.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const l=r.match(/\?/)?"&":"?",h=new URLSearchParams(s);return`${r}${l}${h}`}_workerObjectUrl(r){let s;if(r)s=r;else{const l=new Blob([hg],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s;r?s=r:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(l=>{const h={access_token:s,version:Qm};s&&l.updateJoinPayload(h),l.joinedOnce&&l._isJoined()&&l._push(Kr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(l=>{try{l(s)}catch(h){this.log("error",`error in ${r} callback`,h)}})}catch(l){this.log("error",`error triggering ${r} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Sp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,l,h,f,g,_,w,C,N,z,B,F;switch(this.transport=(s=r?.transport)!==null&&s!==void 0?s:null,this.timeout=(l=r?.timeout)!==null&&l!==void 0?l:Jc,this.heartbeatIntervalMs=(h=r?.heartbeatIntervalMs)!==null&&h!==void 0?h:Xl.HEARTBEAT_INTERVAL,this.worker=(f=r?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(g=r?.accessToken)!==null&&g!==void 0?g:null,this.heartbeatCallback=(_=r?.heartbeatCallback)!==null&&_!==void 0?_:Dc,this.vsn=(w=r?.vsn)!==null&&w!==void 0?w:pf,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(C=r?.reconnectAfterMs)!==null&&C!==void 0?C:(V=>cg[V-1]||dg),this.vsn){case Ep:this.encode=(N=r?.encode)!==null&&N!==void 0?N:((V,H)=>H(JSON.stringify(V))),this.decode=(z=r?.decode)!==null&&z!==void 0?z:((V,H)=>H(JSON.parse(V)));break;case eg:this.encode=(B=r?.encode)!==null&&B!==void 0?B:this.serializer.encode.bind(this.serializer),this.decode=(F=r?.decode)!==null&&F!==void 0?F:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class du extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Gt(d){return typeof d=="object"&&d!==null&&"__isStorageError"in d}class pg extends du{constructor(r,s,l){super(r),this.name="StorageApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qc extends du{constructor(r,s){super(r),this.name="StorageUnknownError",this.originalError=s}}const fd=d=>d?(...r)=>d(...r):(...r)=>fetch(...r),mg=()=>Response,ed=d=>{if(Array.isArray(d))return d.map(s=>ed(s));if(typeof d=="function"||d!==Object(d))return d;const r={};return Object.entries(d).forEach(([s,l])=>{const h=s.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));r[h]=ed(l)}),r},gg=d=>{if(typeof d!="object"||d===null)return!1;const r=Object.getPrototypeOf(d);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},vg=d=>!d||typeof d!="string"||d.length===0||d.length>100||d.trim()!==d||d.includes("/")||d.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(d),Bc=d=>{var r;return d.msg||d.message||d.error_description||(typeof d.error=="string"?d.error:(r=d.error)===null||r===void 0?void 0:r.message)||JSON.stringify(d)},yg=(d,r,s)=>Fe(void 0,void 0,void 0,function*(){const l=yield mg();d instanceof l&&!s?.noResolveJson?d.json().then(h=>{const f=d.status||500,g=h?.statusCode||f+"";r(new pg(Bc(h),f,g))}).catch(h=>{r(new Qc(Bc(h),h))}):r(new Qc(Bc(d),d))}),_g=(d,r,s,l)=>{const h={method:d,headers:r?.headers||{}};return d==="GET"||!l?h:(gg(l)?(h.headers=Object.assign({"Content-Type":"application/json"},r?.headers),h.body=JSON.stringify(l)):h.body=l,r?.duplex&&(h.duplex=r.duplex),Object.assign(Object.assign({},h),s))};function Da(d,r,s,l,h,f){return Fe(this,void 0,void 0,function*(){return new Promise((g,_)=>{d(s,_g(r,l,h,f)).then(w=>{if(!w.ok)throw w;return l?.noResolveJson?w:w.json()}).then(w=>g(w)).catch(w=>yg(w,_,l))})})}function Ra(d,r,s,l){return Fe(this,void 0,void 0,function*(){return Da(d,"GET",r,s,l)})}function Gr(d,r,s,l,h){return Fe(this,void 0,void 0,function*(){return Da(d,"POST",r,l,h,s)})}function td(d,r,s,l,h){return Fe(this,void 0,void 0,function*(){return Da(d,"PUT",r,l,h,s)})}function wg(d,r,s,l){return Fe(this,void 0,void 0,function*(){return Da(d,"HEAD",r,Object.assign(Object.assign({},s),{noResolveJson:!0}),l)})}function pd(d,r,s,l,h){return Fe(this,void 0,void 0,function*(){return Da(d,"DELETE",r,l,h,s)})}class xg{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s}then(r,s){return this.execute().then(r,s)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}}var Pp;class bg{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s,this[Pp]="BlobDownloadBuilder",this.promise=null}asStream(){return new xg(this.downloadFn,this.shouldThrowOnError)}then(r,s){return this.getPromise().then(r,s)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}})}}Pp=Symbol.toStringTag;const Eg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sg{constructor(r,s={},l,h){this.shouldThrowOnError=!1,this.url=r,this.headers=s,this.bucketId=l,this.fetch=fd(h)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,s,l,h){return Fe(this,void 0,void 0,function*(){try{let f;const g=Object.assign(Object.assign({},yf),h);let _=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(g.upsert)});const w=g.metadata;typeof Blob<"u"&&l instanceof Blob?(f=new FormData,f.append("cacheControl",g.cacheControl),w&&f.append("metadata",this.encodeMetadata(w)),f.append("",l)):typeof FormData<"u"&&l instanceof FormData?(f=l,f.has("cacheControl")||f.append("cacheControl",g.cacheControl),w&&!f.has("metadata")&&f.append("metadata",this.encodeMetadata(w))):(f=l,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType,w&&(_["x-metadata"]=this.toBase64(this.encodeMetadata(w))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!g.duplex&&(g.duplex="half")),h?.headers&&(_=Object.assign(Object.assign({},_),h.headers));const C=this._removeEmptyFolders(s),N=this._getFinalPath(C),z=yield(r=="PUT"?td:Gr)(this.fetch,`${this.url}/object/${N}`,f,Object.assign({headers:_},g?.duplex?{duplex:g.duplex}:{}));return{data:{path:C,id:z.Id,fullPath:z.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Gt(f))return{data:null,error:f};throw f}})}upload(r,s,l){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,s,l)})}uploadToSignedUrl(r,s,l,h){return Fe(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(r),g=this._getFinalPath(f),_=new URL(this.url+`/object/upload/sign/${g}`);_.searchParams.set("token",s);try{let w;const C=Object.assign({upsert:yf.upsert},h),N=Object.assign(Object.assign({},this.headers),{"x-upsert":String(C.upsert)});typeof Blob<"u"&&l instanceof Blob?(w=new FormData,w.append("cacheControl",C.cacheControl),w.append("",l)):typeof FormData<"u"&&l instanceof FormData?(w=l,w.append("cacheControl",C.cacheControl)):(w=l,N["cache-control"]=`max-age=${C.cacheControl}`,N["content-type"]=C.contentType);const z=yield td(this.fetch,_.toString(),w,{headers:N});return{data:{path:f,fullPath:z.Key},error:null}}catch(w){if(this.shouldThrowOnError)throw w;if(Gt(w))return{data:null,error:w};throw w}})}createSignedUploadUrl(r,s){return Fe(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r);const h=Object.assign({},this.headers);s?.upsert&&(h["x-upsert"]="true");const f=yield Gr(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:h}),g=new URL(this.url+f.url),_=g.searchParams.get("token");if(!_)throw new du("No token returned by API");return{data:{signedUrl:g.toString(),path:r,token:_},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}})}update(r,s,l){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,s,l)})}move(r,s,l){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}copy(r,s,l){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}createSignedUrl(r,s,l){return Fe(this,void 0,void 0,function*(){try{let h=this._getFinalPath(r),f=yield Gr(this.fetch,`${this.url}/object/sign/${h}`,Object.assign({expiresIn:s},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const g=l?.download?`&download=${l.download===!0?"":l.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${g}`)},{data:f,error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}createSignedUrls(r,s,l){return Fe(this,void 0,void 0,function*(){try{const h=yield Gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:r},{headers:this.headers}),f=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:h.map(g=>Object.assign(Object.assign({},g),{signedUrl:g.signedURL?encodeURI(`${this.url}${g.signedURL}${f}`):null})),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}download(r,s){const h=typeof s?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(s?.transform||{}),g=f?`?${f}`:"",_=this._getFinalPath(r),w=()=>Ra(this.fetch,`${this.url}/${h}/${_}${g}`,{headers:this.headers,noResolveJson:!0});return new bg(w,this.shouldThrowOnError)}info(r){return Fe(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{const l=yield Ra(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ed(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}})}exists(r){return Fe(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{return yield wg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gt(l)&&l instanceof Qc){const h=l.originalError;if([400,404].includes(h?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(r,s){const l=this._getFinalPath(r),h=[],f=s?.download?`download=${s.download===!0?"":s.download}`:"";f!==""&&h.push(f);const _=typeof s?.transform<"u"?"render/image":"object",w=this.transformOptsToQueryString(s?.transform||{});w!==""&&h.push(w);let C=h.join("&");return C!==""&&(C=`?${C}`),{data:{publicUrl:encodeURI(`${this.url}/${_}/public/${l}${C}`)}}}remove(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}list(r,s,l){return Fe(this,void 0,void 0,function*(){try{const h=Object.assign(Object.assign(Object.assign({},Eg),s),{prefix:r||""});return{data:yield Gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,h,{headers:this.headers},l),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}listV2(r,s){return Fe(this,void 0,void 0,function*(){try{const l=Object.assign({},r);return{data:yield Gr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},s),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const s=[];return r.width&&s.push(`width=${r.width}`),r.height&&s.push(`height=${r.height}`),r.resize&&s.push(`resize=${r.resize}`),r.format&&s.push(`format=${r.format}`),r.quality&&s.push(`quality=${r.quality}`),s.join("&")}}const jp="2.86.0",Np={"X-Client-Info":`storage-js/${jp}`};class kg{constructor(r,s={},l,h){this.shouldThrowOnError=!1;const f=new URL(r);h?.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Np),s),this.fetch=fd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return Fe(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(r);return{data:yield Ra(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}getBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ra(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}createBucket(r){return Fe(this,arguments,void 0,function*(s,l={public:!1}){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Gt(h))return{data:null,error:h};throw h}})}updateBucket(r,s){return Fe(this,void 0,void 0,function*(){try{return{data:yield td(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}})}emptyBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(r){const s={};return r&&("limit"in r&&(s.limit=String(r.limit)),"offset"in r&&(s.offset=String(r.offset)),r.search&&(s.search=r.search),r.sortColumn&&(s.sortColumn=r.sortColumn),r.sortOrder&&(s.sortOrder=r.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}var Aa=class extends Error{constructor(d,r){super(d),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cg(d,r,s){const l=new URL(r,d);if(s)for(const[h,f]of Object.entries(s))f!==void 0&&l.searchParams.set(h,f);return l.toString()}async function Pg(d){return!d||d.type==="none"?{}:d.type==="bearer"?{Authorization:`Bearer ${d.token}`}:d.type==="header"?{[d.name]:d.value}:d.type==="custom"?await d.getHeaders():{}}function jg(d){const r=d.fetchImpl??globalThis.fetch;return{async request({method:s,path:l,query:h,body:f,headers:g}){const _=Cg(d.baseUrl,l,h),w=await Pg(d.auth),C=await r(_,{method:s,headers:{...f?{"Content-Type":"application/json"}:{},...w,...g},body:f?JSON.stringify(f):void 0}),N=await C.text(),z=(C.headers.get("content-type")||"").includes("application/json"),B=z&&N?JSON.parse(N):N;if(!C.ok){const F=z?B:void 0,V=F?.error;throw new Aa(V?.message??`Request failed with status ${C.status}`,{status:C.status,icebergType:V?.type,icebergCode:V?.code,details:F})}return{status:C.status,headers:C.headers,data:B}}}}function Ql(d){return d.join("")}var Ng=class{constructor(d,r=""){this.client=d,this.prefix=r}async listNamespaces(d){const r=d?{parent:Ql(d.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(d,r){const s={namespace:d.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(d){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ql(d.namespace)}`})}async loadNamespaceMetadata(d){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ql(d.namespace)}`})).data.properties}}async namespaceExists(d){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ql(d.namespace)}`}),!0}catch(r){if(r instanceof Aa&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(d,r){try{return await this.createNamespace(d,r)}catch(s){if(s instanceof Aa&&s.status===409)return;throw s}}};function ko(d){return d.join("")}var Tg=class{constructor(d,r="",s){this.client=d,this.prefix=r,this.accessDelegation=s}async listTables(d){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables`})).data.identifiers}async createTable(d,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(d,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables/${d.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(d,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables/${d.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(d){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables/${d.name}`,headers:r})).data.metadata}async tableExists(d){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ko(d.namespace)}/tables/${d.name}`,headers:r}),!0}catch(s){if(s instanceof Aa&&s.status===404)return!1;throw s}}async createTableIfNotExists(d,r){try{return await this.createTable(d,r)}catch(s){if(s instanceof Aa&&s.status===409)return await this.loadTable({namespace:d.namespace,name:r.name});throw s}}},Lg=class{constructor(d){let r="v1";d.catalogName&&(r+=`/${d.catalogName}`);const s=d.baseUrl.endsWith("/")?d.baseUrl:`${d.baseUrl}/`;this.client=jg({baseUrl:s,auth:d.auth,fetchImpl:d.fetch}),this.accessDelegation=d.accessDelegation?.join(","),this.namespaceOps=new Ng(this.client,r),this.tableOps=new Tg(this.client,r,this.accessDelegation)}async listNamespaces(d){return this.namespaceOps.listNamespaces(d)}async createNamespace(d,r){return this.namespaceOps.createNamespace(d,r)}async dropNamespace(d){await this.namespaceOps.dropNamespace(d)}async loadNamespaceMetadata(d){return this.namespaceOps.loadNamespaceMetadata(d)}async listTables(d){return this.tableOps.listTables(d)}async createTable(d,r){return this.tableOps.createTable(d,r)}async updateTable(d,r){return this.tableOps.updateTable(d,r)}async dropTable(d,r){await this.tableOps.dropTable(d,r)}async loadTable(d){return this.tableOps.loadTable(d)}async namespaceExists(d){return this.namespaceOps.namespaceExists(d)}async tableExists(d){return this.tableOps.tableExists(d)}async createNamespaceIfNotExists(d,r){return this.namespaceOps.createNamespaceIfNotExists(d,r)}async createTableIfNotExists(d,r){return this.tableOps.createTableIfNotExists(d,r)}};class Og{constructor(r,s={},l){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Np),s),this.fetch=fd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}listBuckets(r){return Fe(this,void 0,void 0,function*(){try{const s=new URLSearchParams;r?.limit!==void 0&&s.set("limit",r.limit.toString()),r?.offset!==void 0&&s.set("offset",r.offset.toString()),r?.sortColumn&&s.set("sortColumn",r.sortColumn),r?.sortOrder&&s.set("sortOrder",r.sortOrder),r?.search&&s.set("search",r.search);const l=s.toString(),h=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield Ra(this.fetch,h,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield pd(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}from(r){if(!vg(r))throw new du("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Lg({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>Fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const md={"X-Client-Info":`storage-js/${jp}`,"Content-Type":"application/json"};class Tp extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function yr(d){return typeof d=="object"&&d!==null&&"__isStorageVectorsError"in d}class Uc extends Tp{constructor(r,s,l){super(r),this.name="StorageVectorsApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ig extends Tp{constructor(r,s){super(r),this.name="StorageVectorsUnknownError",this.originalError=s}}var _f;(function(d){d.InternalError="InternalError",d.S3VectorConflictException="S3VectorConflictException",d.S3VectorNotFoundException="S3VectorNotFoundException",d.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",d.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",d.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_f||(_f={}));const gd=d=>d?(...r)=>d(...r):(...r)=>fetch(...r),Rg=d=>{if(typeof d!="object"||d===null)return!1;const r=Object.getPrototypeOf(d);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)},wf=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Ag=(d,r,s)=>Fe(void 0,void 0,void 0,function*(){if(d&&typeof d=="object"&&"status"in d&&"ok"in d&&typeof d.status=="number"&&!s?.noResolveJson){const h=d.status||500,f=d;if(typeof f.json=="function")f.json().then(g=>{const _=g?.statusCode||g?.code||h+"";r(new Uc(wf(g),h,_))}).catch(()=>{const g=h+"",_=f.statusText||`HTTP ${h} error`;r(new Uc(_,h,g))});else{const g=h+"",_=f.statusText||`HTTP ${h} error`;r(new Uc(_,h,g))}}else r(new Ig(wf(d),d))}),Mg=(d,r,s,l)=>{const h={method:d,headers:r?.headers||{}};return l?(Rg(l)?(h.headers=Object.assign({"Content-Type":"application/json"},r?.headers),h.body=JSON.stringify(l)):h.body=l,Object.assign(Object.assign({},h),s)):h};function zg(d,r,s,l,h,f){return Fe(this,void 0,void 0,function*(){return new Promise((g,_)=>{d(s,Mg(r,l,h,f)).then(w=>{if(!w.ok)throw w;if(l?.noResolveJson)return w;const C=w.headers.get("content-type");return!C||!C.includes("application/json")?{}:w.json()}).then(w=>g(w)).catch(w=>Ag(w,_,l))})})}function _r(d,r,s,l,h){return Fe(this,void 0,void 0,function*(){return zg(d,"POST",r,l,h,s)})}class Dg{constructor(r,s={},l){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},md),s),this.fetch=gd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return Fe(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}getIndex(r,s){return Fe(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yr(l))return{data:null,error:l};throw l}})}listIndexes(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}deleteIndex(r,s){return Fe(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yr(l))return{data:null,error:l};throw l}})}}class Bg{constructor(r,s={},l){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},md),s),this.fetch=gd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return Fe(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}getVectors(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}listVectors(r){return Fe(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield _r(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}queryVectors(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}deleteVectors(r){return Fe(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield _r(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}}class Ug{constructor(r,s={},l){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},md),s),this.fetch=gd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}getBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}listBuckets(){return Fe(this,arguments,void 0,function*(r={}){try{return{data:yield _r(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}deleteBucket(r){return Fe(this,void 0,void 0,function*(){try{return{data:(yield _r(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yr(s))return{data:null,error:s};throw s}})}}class Fg extends Ug{constructor(r,s={}){super(r,s.headers||{},s.fetch)}from(r){return new $g(this.url,this.headers,r,this.fetch)}createBucket(r){const s=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Fe(this,void 0,void 0,function*(){return s.createBucket.call(this,r)})}getBucket(r){const s=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Fe(this,void 0,void 0,function*(){return s.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Fe(this,arguments,void 0,function*(s={}){return r.listBuckets.call(this,s)})}deleteBucket(r){const s=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Fe(this,void 0,void 0,function*(){return s.deleteBucket.call(this,r)})}}class $g extends Dg{constructor(r,s,l,h){super(r,s,h),this.vectorBucketName=l}createIndex(r){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(s={}){return r.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new Hg(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class Hg extends Bg{constructor(r,s,l,h,f){super(r,s,f),this.vectorBucketName=l,this.indexName=h}putVectors(r){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(s={}){return r.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Wg extends kg{constructor(r,s={},l,h){super(r,s,l,h)}from(r){return new Sg(this.url,this.headers,r,this.fetch)}get vectors(){return new Fg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Og(this.url+"/iceberg",this.headers,this.fetch)}}const Zg="2.86.0";let ja="";typeof Deno<"u"?ja="deno":typeof document<"u"?ja="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ja="react-native":ja="node";const Vg={"X-Client-Info":`supabase-js-${ja}/${Zg}`},qg={headers:Vg},Gg={schema:"public"},Kg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jg={},Yg=d=>d?(...r)=>d(...r):(...r)=>fetch(...r),Xg=()=>Headers,Qg=(d,r,s)=>{const l=Yg(s),h=Xg();return async(f,g)=>{var _;const w=(_=await r())!==null&&_!==void 0?_:d;let C=new h(g?.headers);return C.has("apikey")||C.set("apikey",d),C.has("Authorization")||C.set("Authorization",`Bearer ${w}`),l(f,Object.assign(Object.assign({},g),{headers:C}))}};function ev(d){return d.endsWith("/")?d:d+"/"}function tv(d,r){var s,l;const{db:h,auth:f,realtime:g,global:_}=d,{db:w,auth:C,realtime:N,global:z}=r,B={db:Object.assign(Object.assign({},w),h),auth:Object.assign(Object.assign({},C),f),realtime:Object.assign(Object.assign({},N),g),storage:{},global:Object.assign(Object.assign(Object.assign({},z),_),{headers:Object.assign(Object.assign({},(s=z?.headers)!==null&&s!==void 0?s:{}),(l=_?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return d.accessToken?B.accessToken=d.accessToken:delete B.accessToken,B}function nv(d){const r=d?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ev(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Lp="2.86.0",Oo=30*1e3,nd=3,Fc=nd*Oo,rv="http://localhost:9999",iv="supabase.auth.token",sv={"X-Client-Info":`gotrue-js/${Lp}`},rd="X-Supabase-Api-Version",Op={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ov=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,av=600*1e3;class Ma extends Error{constructor(r,s,l){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function Ke(d){return typeof d=="object"&&d!==null&&"__isAuthError"in d}class lv extends Ma{constructor(r,s,l){super(r,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function uv(d){return Ke(d)&&d.name==="AuthApiError"}class Fs extends Ma{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class fs extends Ma{constructor(r,s,l,h){super(r,l,h),this.name=s,this.status=l}}class vr extends fs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cv(d){return Ke(d)&&d.name==="AuthSessionMissingError"}class Co extends fs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eu extends fs{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class tu extends fs{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dv(d){return Ke(d)&&d.name==="AuthImplicitGrantRedirectError"}class xf extends fs{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class id extends fs{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function $c(d){return Ke(d)&&d.name==="AuthRetryableFetchError"}class bf extends fs{constructor(r,s,l){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class sd extends fs{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ef=` 	
\r=`.split(""),hv=(()=>{const d=new Array(128);for(let r=0;r<d.length;r+=1)d[r]=-1;for(let r=0;r<Ef.length;r+=1)d[Ef[r].charCodeAt(0)]=-2;for(let r=0;r<su.length;r+=1)d[su[r].charCodeAt(0)]=r;return d})();function Sf(d,r,s){if(d!==null)for(r.queue=r.queue<<8|d,r.queuedBits+=8;r.queuedBits>=6;){const l=r.queue>>r.queuedBits-6&63;s(su[l]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const l=r.queue>>r.queuedBits-6&63;s(su[l]),r.queuedBits-=6}}function Ip(d,r,s){const l=hv[d];if(l>-1)for(r.queue=r.queue<<6|l,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(d)}"`)}}function kf(d){const r=[],s=g=>{r.push(String.fromCodePoint(g))},l={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},f=g=>{mv(g,l,s)};for(let g=0;g<d.length;g+=1)Ip(d.charCodeAt(g),h,f);return r.join("")}function fv(d,r){if(d<=127){r(d);return}else if(d<=2047){r(192|d>>6),r(128|d&63);return}else if(d<=65535){r(224|d>>12),r(128|d>>6&63),r(128|d&63);return}else if(d<=1114111){r(240|d>>18),r(128|d>>12&63),r(128|d>>6&63),r(128|d&63);return}throw new Error(`Unrecognized Unicode codepoint: ${d.toString(16)}`)}function pv(d,r){for(let s=0;s<d.length;s+=1){let l=d.charCodeAt(s);if(l>55295&&l<=56319){const h=(l-55296)*1024&65535;l=(d.charCodeAt(s+1)-56320&65535|h)+65536,s+=1}fv(l,r)}}function mv(d,r,s){if(r.utf8seq===0){if(d<=127){s(d);return}for(let l=1;l<6;l+=1)if((d>>7-l&1)===0){r.utf8seq=l;break}if(r.utf8seq===2)r.codepoint=d&31;else if(r.utf8seq===3)r.codepoint=d&15;else if(r.utf8seq===4)r.codepoint=d&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(d<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|d&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Mo(d){const r=[],s={queue:0,queuedBits:0},l=h=>{r.push(h)};for(let h=0;h<d.length;h+=1)Ip(d.charCodeAt(h),s,l);return new Uint8Array(r)}function gv(d){const r=[];return pv(d,s=>r.push(s)),new Uint8Array(r)}function Hs(d){const r=[],s={queue:0,queuedBits:0},l=h=>{r.push(h)};return d.forEach(h=>Sf(h,s,l)),Sf(null,s,l),r.join("")}function vv(d){return Math.round(Date.now()/1e3)+d}function yv(){return Symbol("auth-callback")}const Pn=()=>typeof window<"u"&&typeof document<"u",Ms={tested:!1,writable:!1},Rp=()=>{if(!Pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ms.tested)return Ms.writable;const d=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(d,d),globalThis.localStorage.removeItem(d),Ms.tested=!0,Ms.writable=!0}catch{Ms.tested=!0,Ms.writable=!1}return Ms.writable};function _v(d){const r={},s=new URL(d);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((h,f)=>{r[f]=h})}catch{}return s.searchParams.forEach((l,h)=>{r[h]=l}),r}const Ap=d=>d?(...r)=>d(...r):(...r)=>fetch(...r),wv=d=>typeof d=="object"&&d!==null&&"status"in d&&"ok"in d&&"json"in d&&typeof d.json=="function",Io=async(d,r,s)=>{await d.setItem(r,JSON.stringify(s))},zs=async(d,r)=>{const s=await d.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},cs=async(d,r)=>{await d.removeItem(r)};class hu{constructor(){this.promise=new hu.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}hu.promiseConstructor=Promise;function Hc(d){const r=d.split(".");if(r.length!==3)throw new sd("Invalid JWT structure");for(let l=0;l<r.length;l++)if(!ov.test(r[l]))throw new sd("JWT not in base64url format");return{header:JSON.parse(kf(r[0])),payload:JSON.parse(kf(r[1])),signature:Mo(r[2]),raw:{header:r[0],payload:r[1]}}}async function xv(d){return await new Promise(r=>{setTimeout(()=>r(null),d)})}function bv(d,r){return new Promise((l,h)=>{(async()=>{for(let f=0;f<1/0;f++)try{const g=await d(f);if(!r(f,null,g)){l(g);return}}catch(g){if(!r(f,g)){h(g);return}}})()})}function Ev(d){return("0"+d.toString(16)).substr(-2)}function Sv(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let h="";for(let f=0;f<56;f++)h+=s.charAt(Math.floor(Math.random()*l));return h}return crypto.getRandomValues(r),Array.from(r,Ev).join("")}async function kv(d){const s=new TextEncoder().encode(d),l=await crypto.subtle.digest("SHA-256",s),h=new Uint8Array(l);return Array.from(h).map(f=>String.fromCharCode(f)).join("")}async function Cv(d){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),d;const s=await kv(d);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Po(d,r,s=!1){const l=Sv();let h=l;s&&(h+="/PASSWORD_RECOVERY"),await Io(d,`${r}-code-verifier`,h);const f=await Cv(l);return[f,l===f?"plain":"s256"]}const Pv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jv(d){const r=d.headers.get(rd);if(!r||!r.match(Pv))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Nv(d){if(!d)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(d<=r)throw new Error("JWT has expired")}function Tv(d){switch(d){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jo(d){if(!Lv.test(d))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wc(){const d={};return new Proxy(d,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ov(d,r){return new Proxy(d,{get:(s,l,h)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const f=l.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,h)}return!r.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,l,h)}})}function Cf(d){return JSON.parse(JSON.stringify(d))}const Ds=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Iv=[502,503,504];async function Pf(d){var r;if(!wv(d))throw new id(Ds(d),0);if(Iv.includes(d.status))throw new id(Ds(d),d.status);let s;try{s=await d.json()}catch(f){throw new Fs(Ds(f),f)}let l;const h=jv(d);if(h&&h.getTime()>=Op["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new bf(Ds(s),d.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(l==="session_not_found")throw new vr}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((f,g)=>f&&typeof g=="string",!0))throw new bf(Ds(s),d.status,s.weak_password.reasons);throw new lv(Ds(s),d.status||500,l)}const Rv=(d,r,s,l)=>{const h={method:d,headers:r?.headers||{}};return d==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),h.body=JSON.stringify(l),Object.assign(Object.assign({},h),s))};async function nt(d,r,s,l){var h;const f=Object.assign({},l?.headers);f[rd]||(f[rd]=Op["2024-01-01"].name),l?.jwt&&(f.Authorization=`Bearer ${l.jwt}`);const g=(h=l?.query)!==null&&h!==void 0?h:{};l?.redirectTo&&(g.redirect_to=l.redirectTo);const _=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",w=await Av(d,r,s+_,{headers:f,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(w):{data:Object.assign({},w),error:null}}async function Av(d,r,s,l,h,f){const g=Rv(r,l,h,f);let _;try{_=await d(s,Object.assign({},g))}catch(w){throw console.error(w),new id(Ds(w),0)}if(_.ok||await Pf(_),l?.noResolveJson)return _;try{return await _.json()}catch(w){await Pf(w)}}function qr(d){var r;let s=null;Dv(d)&&(s=Object.assign({},d),d.expires_at||(s.expires_at=vv(d.expires_in)));const l=(r=d.user)!==null&&r!==void 0?r:d;return{data:{session:s,user:l},error:null}}function jf(d){const r=qr(d);return!r.error&&d.weak_password&&typeof d.weak_password=="object"&&Array.isArray(d.weak_password.reasons)&&d.weak_password.reasons.length&&d.weak_password.message&&typeof d.weak_password.message=="string"&&d.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(r.data.weak_password=d.weak_password),r}function hs(d){var r;return{data:{user:(r=d.user)!==null&&r!==void 0?r:d},error:null}}function Mv(d){return{data:d,error:null}}function zv(d){const{action_link:r,email_otp:s,hashed_token:l,redirect_to:h,verification_type:f}=d,g=Bo(d,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:r,email_otp:s,hashed_token:l,redirect_to:h,verification_type:f},w=Object.assign({},g);return{data:{properties:_,user:w},error:null}}function Nf(d){return d}function Dv(d){return d.access_token&&d.refresh_token&&d.expires_in}const Zc=["global","local","others"];class Bv{constructor({url:r="",headers:s={},fetch:l}){this.url=r,this.headers=s,this.fetch=Ap(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Zc[0]){if(Zc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zc.join(", ")}`);try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ke(l))return{data:null,error:l};throw l}}async inviteUserByEmail(r,s={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:hs})}catch(l){if(Ke(l))return{data:{user:null},error:l};throw l}}async generateLink(r){try{const{options:s}=r,l=Bo(r,["options"]),h=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(h.new_email=l?.newEmail,delete h.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:zv,redirectTo:s?.redirectTo})}catch(s){if(Ke(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:hs})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,l,h,f,g,_,w;try{const C={nextPage:null,lastPage:0,total:0},N=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(f=(h=r?.perPage)===null||h===void 0?void 0:h.toString())!==null&&f!==void 0?f:""},xform:Nf});if(N.error)throw N.error;const z=await N.json(),B=(g=N.headers.get("x-total-count"))!==null&&g!==void 0?g:0,F=(w=(_=N.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&w!==void 0?w:[];return F.length>0&&(F.forEach(V=>{const H=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),W=JSON.parse(V.split(";")[1].split("=")[1]);C[`${W}Page`]=H}),C.total=parseInt(B)),{data:Object.assign(Object.assign({},z),C),error:null}}catch(C){if(Ke(C))return{data:{users:[]},error:C};throw C}}async getUserById(r){jo(r);try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:hs})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){jo(r);try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:hs})}catch(l){if(Ke(l))return{data:{user:null},error:l};throw l}}async deleteUser(r,s=!1){jo(r);try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:hs})}catch(l){if(Ke(l))return{data:{user:null},error:l};throw l}}async _listFactors(r){jo(r.userId);try{const{data:s,error:l}=await nt(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:s,error:l}}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async _deleteFactor(r){jo(r.userId),jo(r.id);try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,l,h,f,g,_,w;try{const C={nextPage:null,lastPage:0,total:0},N=await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=r?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(f=(h=r?.perPage)===null||h===void 0?void 0:h.toString())!==null&&f!==void 0?f:""},xform:Nf});if(N.error)throw N.error;const z=await N.json(),B=(g=N.headers.get("x-total-count"))!==null&&g!==void 0?g:0,F=(w=(_=N.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&w!==void 0?w:[];return F.length>0&&(F.forEach(V=>{const H=parseInt(V.split(";")[0].split("=")[1].substring(0,1)),W=JSON.parse(V.split(";")[1].split("=")[1]);C[`${W}Page`]=H}),C.total=parseInt(B)),{data:Object.assign(Object.assign({},z),C),error:null}}catch(C){if(Ke(C))return{data:{clients:[]},error:C};throw C}}async _createOAuthClient(r){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await nt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await nt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ke(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(r){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await nt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}}function Tf(d={}){return{getItem:r=>d[r]||null,setItem:(r,s)=>{d[r]=s},removeItem:r=>{delete d[r]}}}const No={debug:!!(globalThis&&Rp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mp extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Uv extends Mp{}async function Fv(d,r,s){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",d,r);const l=new globalThis.AbortController;return r>0&&setTimeout(()=>{l.abort(),No.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",d)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(d,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async h=>{if(h){No.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",d,h.name);try{return await s()}finally{No.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",d,h.name)}}else{if(r===0)throw No.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",d),new Uv(`Acquiring an exclusive Navigator LockManager lock "${d}" immediately failed`);if(No.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function $v(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zp(d){if(!/^0x[a-fA-F0-9]{40}$/.test(d))throw new Error(`@supabase/auth-js: Address "${d}" is invalid.`);return d.toLowerCase()}function Hv(d){return parseInt(d,16)}function Wv(d){const r=new TextEncoder().encode(d);return"0x"+Array.from(r,l=>l.toString(16).padStart(2,"0")).join("")}function Zv(d){var r;const{chainId:s,domain:l,expirationTime:h,issuedAt:f=new Date,nonce:g,notBefore:_,requestId:w,resources:C,scheme:N,uri:z,version:B}=d;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!z)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(B!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${B}`);if(!((r=d.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${d.statement}`)}const F=zp(d.address),V=N?`${N}://${l}`:l,H=d.statement?`${d.statement}
`:"",W=`${V} wants you to sign in with your Ethereum account:
${F}

${H}`;let le=`URI: ${z}
Version: ${B}
Chain ID: ${s}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(h&&(le+=`
Expiration Time: ${h.toISOString()}`),_&&(le+=`
Not Before: ${_.toISOString()}`),w&&(le+=`
Request ID: ${w}`),C){let _e=`
Resources:`;for(const Q of C){if(!Q||typeof Q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Q}`);_e+=`
- ${Q}`}le+=_e}return`${W}
${le}`}class dn extends Error{constructor({message:r,code:s,cause:l,name:h}){var f;super(r,{cause:l}),this.__isWebAuthnError=!0,this.name=(f=h??(l instanceof Error?l.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=s}}class ou extends dn{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function Vv({error:d,options:r}){var s,l,h;const{publicKey:f}=r;if(!f)throw Error("options was missing required publicKey property");if(d.name==="AbortError"){if(r.signal instanceof AbortSignal)return new dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:d})}else if(d.name==="ConstraintError"){if(((s=f.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:d});if(r.mediation==="conditional"&&((l=f.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:d});if(((h=f.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:d})}else{if(d.name==="InvalidStateError")return new dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:d});if(d.name==="NotAllowedError")return new dn({message:d.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d});if(d.name==="NotSupportedError")return f.pubKeyCredParams.filter(_=>_.type==="public-key").length===0?new dn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:d}):new dn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:d});if(d.name==="SecurityError"){const g=window.location.hostname;if(Dp(g)){if(f.rp.id!==g)return new dn({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:d})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:d})}else if(d.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:d})}else if(d.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:d})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d})}function qv({error:d,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(d.name==="AbortError"){if(r.signal instanceof AbortSignal)return new dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:d})}else{if(d.name==="NotAllowedError")return new dn({message:d.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d});if(d.name==="SecurityError"){const l=window.location.hostname;if(Dp(l)){if(s.rpId!==l)return new dn({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:d})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:d})}else if(d.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:d})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:d})}class Gv{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Kv=new Gv;function Jv(d){if(!d)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(d);const{challenge:r,user:s,excludeCredentials:l}=d,h=Bo(d,["challenge","user","excludeCredentials"]),f=Mo(r).buffer,g=Object.assign(Object.assign({},s),{id:Mo(s.id).buffer}),_=Object.assign(Object.assign({},h),{challenge:f,user:g});if(l&&l.length>0){_.excludeCredentials=new Array(l.length);for(let w=0;w<l.length;w++){const C=l[w];_.excludeCredentials[w]=Object.assign(Object.assign({},C),{id:Mo(C.id).buffer,type:C.type||"public-key",transports:C.transports})}}return _}function Yv(d){if(!d)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(d);const{challenge:r,allowCredentials:s}=d,l=Bo(d,["challenge","allowCredentials"]),h=Mo(r).buffer,f=Object.assign(Object.assign({},l),{challenge:h});if(s&&s.length>0){f.allowCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const _=s[g];f.allowCredentials[g]=Object.assign(Object.assign({},_),{id:Mo(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return f}function Xv(d){var r;if("toJSON"in d&&typeof d.toJSON=="function")return d.toJSON();const s=d;return{id:d.id,rawId:d.id,response:{attestationObject:Hs(new Uint8Array(d.response.attestationObject)),clientDataJSON:Hs(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Qv(d){var r;if("toJSON"in d&&typeof d.toJSON=="function")return d.toJSON();const s=d,l=d.getClientExtensionResults(),h=d.response;return{id:d.id,rawId:d.id,response:{authenticatorData:Hs(new Uint8Array(h.authenticatorData)),clientDataJSON:Hs(new Uint8Array(h.clientDataJSON)),signature:Hs(new Uint8Array(h.signature)),userHandle:h.userHandle?Hs(new Uint8Array(h.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Dp(d){return d==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(d)}function Lf(){var d,r;return!!(Pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((d=navigator?.credentials)===null||d===void 0?void 0:d.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function e0(d){try{const r=await navigator.credentials.create(d);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ou("Browser returned unexpected credential type",r)}:{data:null,error:new ou("Empty credential response",r)}}catch(r){return{data:null,error:Vv({error:r,options:d})}}}async function t0(d){try{const r=await navigator.credentials.get(d);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new ou("Browser returned unexpected credential type",r)}:{data:null,error:new ou("Empty credential response",r)}}catch(r){return{data:null,error:qv({error:r,options:d})}}}const n0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function au(...d){const r=h=>h!==null&&typeof h=="object"&&!Array.isArray(h),s=h=>h instanceof ArrayBuffer||ArrayBuffer.isView(h),l={};for(const h of d)if(h)for(const f in h){const g=h[f];if(g!==void 0)if(Array.isArray(g))l[f]=g;else if(s(g))l[f]=g;else if(r(g)){const _=l[f];r(_)?l[f]=au(_,g):l[f]=au(g)}else l[f]=g}return l}function i0(d,r){return au(n0,d,r||{})}function s0(d,r){return au(r0,d,r||{})}class o0{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:l,signal:h},f){try{const{data:g,error:_}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!g)return{data:null,error:_};const w=h??Kv.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:C}=g.webauthn.credential_options.publicKey;C.name||(C.name=`${C.id}:${l}`),C.displayName||(C.displayName=C.name)}switch(g.webauthn.type){case"create":{const C=i0(g.webauthn.credential_options.publicKey,f?.create),{data:N,error:z}=await e0({publicKey:C,signal:w});return N?{data:{factorId:r,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:N}},error:null}:{data:null,error:z}}case"request":{const C=s0(g.webauthn.credential_options.publicKey,f?.request),{data:N,error:z}=await t0(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:C,signal:w}));return N?{data:{factorId:r,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:N}},error:null}:{data:null,error:z}}}}catch(g){return Ke(g)?{data:null,error:g}:{data:null,error:new Fs("Unexpected error in challenge",g)}}}async _verify({challengeId:r,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:l})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},f){if(!s)return{data:null,error:new Ma("rpId is required for WebAuthn authentication")};try{if(!Lf())return{data:null,error:new Fs("Browser does not support WebAuthn",null)};const{data:g,error:_}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:l},signal:h},{request:f});if(!g)return{data:null,error:_};const{webauthn:w}=g;return this._verify({factorId:r,challengeId:g.challengeId,webauthn:{type:w.type,rpId:s,rpOrigins:l,credential_response:w.credential_response}})}catch(g){return Ke(g)?{data:null,error:g}:{data:null,error:new Fs("Unexpected error in authenticate",g)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},f){if(!s)return{data:null,error:new Ma("rpId is required for WebAuthn registration")};try{if(!Lf())return{data:null,error:new Fs("Browser does not support WebAuthn",null)};const{data:g,error:_}=await this._enroll({friendlyName:r});if(!g)return await this.client.mfa.listFactors().then(N=>{var z;return(z=N.data)===null||z===void 0?void 0:z.all.find(B=>B.factor_type==="webauthn"&&B.friendly_name===r&&B.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N?.id}):void 0),{data:null,error:_};const{data:w,error:C}=await this._challenge({factorId:g.id,friendlyName:g.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:h},{create:f});return w?this._verify({factorId:g.id,challengeId:w.challengeId,webauthn:{rpId:s,rpOrigins:l,type:w.webauthn.type,credential_response:w.webauthn.credential_response}}):{data:null,error:C}}catch(g){return Ke(g)?{data:null,error:g}:{data:null,error:new Fs("Unexpected error in register",g)}}}}$v();const a0={url:rv,storageKey:iv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Of(d,r,s){return await s()}const To={};class za{get jwks(){var r,s;return(s=(r=To[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=To[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{cachedAt:r})}constructor(r){var s,l,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},a0),r);if(this.storageKey=f.storageKey,this.instanceID=(s=za.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,za.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&Pn()){const g=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(g),this.logDebugMessages&&console.trace(g)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new Bv({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=Ap(f.fetch),this.lock=f.lock||Of,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,f.lock?this.lock=f.lock:Pn()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=Fv:this.lock=Of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:Rp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),Pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(g){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",g)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async g=>{this._debug("received broadcast notification from other tab or client",g),await this._notifyAllSubscribers(g.data.event,g.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lp}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},l="none";if(Pn()&&(s=_v(window.location.href),this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce")),Pn()&&this.detectSessionInUrl&&l!=="none"){const{data:h,error:f}=await this._getSessionFromURL(s,l);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),dv(f)){const w=(r=f.details)===null||r===void 0?void 0:r.code;if(w==="identity_already_exists"||w==="identity_not_found"||w==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:g,redirectType:_}=h;return this._debug("#_initialize()","detected session in URL",g,"redirect type",_),await this._saveSession(g),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ke(s)?this._returnResult({error:s}):this._returnResult({error:new Fs("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,l,h;try{const f=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=r?.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(h=r?.options)===null||h===void 0?void 0:h.captchaToken}},xform:qr}),{data:g,error:_}=f;if(_||!g)return this._returnResult({data:{user:null,session:null},error:_});const w=g.session,C=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",w)),this._returnResult({data:{user:C,session:w},error:null})}catch(f){if(Ke(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(r){var s,l,h;try{let f;if("email"in r){const{email:N,password:z,options:B}=r;let F=null,V=null;this.flowType==="pkce"&&([F,V]=await Po(this.storage,this.storageKey)),f=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:B?.emailRedirectTo,body:{email:N,password:z,data:(s=B?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:B?.captchaToken},code_challenge:F,code_challenge_method:V},xform:qr})}else if("phone"in r){const{phone:N,password:z,options:B}=r;f=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:z,data:(l=B?.data)!==null&&l!==void 0?l:{},channel:(h=B?.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:B?.captchaToken}},xform:qr})}else throw new eu("You must provide either an email or phone number and a password");const{data:g,error:_}=f;if(_||!g)return this._returnResult({data:{user:null,session:null},error:_});const w=g.session,C=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",w)),this._returnResult({data:{user:C,session:w},error:null})}catch(f){if(Ke(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(r){try{let s;if("email"in r){const{email:f,password:g,options:_}=r;s=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:g,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:jf})}else if("phone"in r){const{phone:f,password:g,options:_}=r;s=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:g,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:jf})}else throw new eu("You must provide either an email or phone number and a password");const{data:l,error:h}=s;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!l||!l.session||!l.user){const f=new Co;return this._returnResult({data:{user:null,session:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:h})}catch(s){if(Ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,l,h,f;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=r.options)===null||l===void 0?void 0:l.scopes,queryParams:(h=r.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(f=r.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,l,h,f,g,_,w,C,N,z,B;let F,V;if("message"in r)F=r.message,V=r.signature;else{const{chain:H,wallet:W,statement:le,options:_e}=r;let Q;if(Pn())if(typeof W=="object")Q=W;else{const Ge=window;if("ethereum"in Ge&&typeof Ge.ethereum=="object"&&"request"in Ge.ethereum&&typeof Ge.ethereum.request=="function")Q=Ge.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof W!="object"||!_e?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=W}const ge=new URL((s=_e?.url)!==null&&s!==void 0?s:window.location.href),be=await Q.request({method:"eth_requestAccounts"}).then(Ge=>Ge).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!be||be.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=zp(be[0]);let j=(l=_e?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!j){const Ge=await Q.request({method:"eth_chainId"});j=Hv(Ge)}const Ye={domain:ge.host,address:O,statement:le,uri:ge.href,version:"1",chainId:j,nonce:(h=_e?.signInWithEthereum)===null||h===void 0?void 0:h.nonce,issuedAt:(g=(f=_e?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&g!==void 0?g:new Date,expirationTime:(_=_e?.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(w=_e?.signInWithEthereum)===null||w===void 0?void 0:w.notBefore,requestId:(C=_e?.signInWithEthereum)===null||C===void 0?void 0:C.requestId,resources:(N=_e?.signInWithEthereum)===null||N===void 0?void 0:N.resources};F=Zv(Ye),V=await Q.request({method:"personal_sign",params:[Wv(F),O]})}try{const{data:H,error:W}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:F,signature:V},!((z=r.options)===null||z===void 0)&&z.captchaToken?{gotrue_meta_security:{captcha_token:(B=r.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:qr});if(W)throw W;if(!H||!H.session||!H.user){const le=new Co;return this._returnResult({data:{user:null,session:null},error:le})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:W})}catch(H){if(Ke(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async signInWithSolana(r){var s,l,h,f,g,_,w,C,N,z,B,F;let V,H;if("message"in r)V=r.message,H=r.signature;else{const{chain:W,wallet:le,statement:_e,options:Q}=r;let ge;if(Pn())if(typeof le=="object")ge=le;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))ge=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof le!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ge=le}const be=new URL((s=Q?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in ge&&ge.signIn){const O=await ge.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Q?.signInWithSolana),{version:"1",domain:be.host,uri:be.href}),_e?{statement:_e}:null));let j;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")j=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)j=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)V=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),H=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ge)||typeof ge.signMessage!="function"||!("publicKey"in ge)||typeof ge!="object"||!ge.publicKey||!("toBase58"in ge.publicKey)||typeof ge.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");V=[`${be.host} wants you to sign in with your Solana account:`,ge.publicKey.toBase58(),..._e?["",_e,""]:[""],"Version: 1",`URI: ${be.href}`,`Issued At: ${(h=(l=Q?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&h!==void 0?h:new Date().toISOString()}`,...!((f=Q?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${Q.signInWithSolana.notBefore}`]:[],...!((g=Q?.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${Q.signInWithSolana.expirationTime}`]:[],...!((_=Q?.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${Q.signInWithSolana.chainId}`]:[],...!((w=Q?.signInWithSolana)===null||w===void 0)&&w.nonce?[`Nonce: ${Q.signInWithSolana.nonce}`]:[],...!((C=Q?.signInWithSolana)===null||C===void 0)&&C.requestId?[`Request ID: ${Q.signInWithSolana.requestId}`]:[],...!((z=(N=Q?.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||z===void 0)&&z.length?["Resources",...Q.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const O=await ge.signMessage(new TextEncoder().encode(V),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");H=O}}try{const{data:W,error:le}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:V,signature:Hs(H)},!((B=r.options)===null||B===void 0)&&B.captchaToken?{gotrue_meta_security:{captcha_token:(F=r.options)===null||F===void 0?void 0:F.captchaToken}}:null),xform:qr});if(le)throw le;if(!W||!W.session||!W.user){const _e=new Co;return this._returnResult({data:{user:null,session:null},error:_e})}return W.session&&(await this._saveSession(W.session),await this._notifyAllSubscribers("SIGNED_IN",W.session)),this._returnResult({data:Object.assign({},W),error:le})}catch(W){if(Ke(W))return this._returnResult({data:{user:null,session:null},error:W});throw W}}async _exchangeCodeForSession(r){const s=await zs(this.storage,`${this.storageKey}-code-verifier`),[l,h]=(s??"").split("/");try{const{data:f,error:g}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:l},xform:qr});if(await cs(this.storage,`${this.storageKey}-code-verifier`),g)throw g;if(!f||!f.session||!f.user){const _=new Co;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:h??null}),error:g})}catch(f){if(Ke(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(r){try{const{options:s,provider:l,token:h,access_token:f,nonce:g}=r,_=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:h,access_token:f,nonce:g,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:qr}),{data:w,error:C}=_;if(C)return this._returnResult({data:{user:null,session:null},error:C});if(!w||!w.session||!w.user){const N=new Co;return this._returnResult({data:{user:null,session:null},error:N})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:w,error:C})}catch(s){if(Ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,l,h,f,g;try{if("email"in r){const{email:_,options:w}=r;let C=null,N=null;this.flowType==="pkce"&&([C,N]=await Po(this.storage,this.storageKey));const{error:z}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(s=w?.data)!==null&&s!==void 0?s:{},create_user:(l=w?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:C,code_challenge_method:N},redirectTo:w?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:z})}if("phone"in r){const{phone:_,options:w}=r,{data:C,error:N}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(h=w?.data)!==null&&h!==void 0?h:{},create_user:(f=w?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:w?.captchaToken},channel:(g=w?.channel)!==null&&g!==void 0?g:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:C?.message_id},error:N})}throw new eu("You must provide either an email or phone number.")}catch(_){if(Ke(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async verifyOtp(r){var s,l;try{let h,f;"options"in r&&(h=(s=r.options)===null||s===void 0?void 0:s.redirectTo,f=(l=r.options)===null||l===void 0?void 0:l.captchaToken);const{data:g,error:_}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:f}}),redirectTo:h,xform:qr});if(_)throw _;if(!g)throw new Error("An error occurred on token verification.");const w=g.session,C=g.user;return w?.access_token&&(await this._saveSession(w),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",w)),this._returnResult({data:{user:C,session:w},error:null})}catch(h){if(Ke(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithSSO(r){var s,l,h,f,g;try{let _=null,w=null;this.flowType==="pkce"&&([_,w]=await Po(this.storage,this.storageKey));const C=await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(l=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((h=r?.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:w}),headers:this.headers,xform:Mv});return!((f=C.data)===null||f===void 0)&&f.url&&Pn()&&!(!((g=r.options)===null||g===void 0)&&g.skipBrowserRedirect)&&window.location.assign(C.data.url),this._returnResult(C)}catch(_){if(Ke(_))return this._returnResult({data:null,error:_});throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;if(l)throw l;if(!s)throw new vr;const{error:h}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:h})})}catch(r){if(Ke(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:l,type:h,options:f}=r,{error:g}=await nt(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}else if("phone"in r){const{phone:l,type:h,options:f}=r,{data:g,error:_}=await nt(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:h,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:_})}throw new eu("You must provide either an email or phone number and a type")}catch(s){if(Ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const l=r.expires_at?r.expires_at*1e3-Date.now()<Fc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",r.expires_at),!l){if(this.userStorage){const g=await zs(this.userStorage,this.storageKey+"-user");g?.user?r.user=g.user:r.user=Wc()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const g={value:this.suppressGetSessionWarning};r.user=Ov(r.user,g),g.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:h,error:f}=await this._callRefreshToken(r.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:h},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:hs}):await this._useSession(async s=>{var l,h,f;const{data:g,error:_}=s;if(_)throw _;return!(!((l=g.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vr}:await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0,xform:hs})})}catch(s){if(Ke(s))return cv(s)&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async l=>{const{data:h,error:f}=l;if(f)throw f;if(!h.session)throw new vr;const g=h.session;let _=null,w=null;this.flowType==="pkce"&&r.email!=null&&([_,w]=await Po(this.storage,this.storageKey));const{data:C,error:N}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:_,code_challenge_method:w}),jwt:g.access_token,xform:hs});if(N)throw N;return g.user=C.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})})}catch(l){if(Ke(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new vr;const s=Date.now()/1e3;let l=s,h=!0,f=null;const{payload:g}=Hc(r.access_token);if(g.exp&&(l=g.exp,h=l<=s),h){const{data:_,error:w}=await this._callRefreshToken(r.refresh_token);if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!_)return{data:{user:null,session:null},error:null};f=_}else{const{data:_,error:w}=await this._getUser(r.access_token);if(w)throw w;f={access_token:r.access_token,refresh_token:r.refresh_token,user:_.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(s){if(Ke(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var l;if(!r){const{data:g,error:_}=s;if(_)throw _;r=(l=g.session)!==null&&l!==void 0?l:void 0}if(!r?.refresh_token)throw new vr;const{data:h,error:f}=await this._callRefreshToken(r.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):h?this._returnResult({data:{user:h.user,session:h},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!Pn())throw new tu("No browser detected.");if(r.error||r.error_description||r.error_code)throw new tu(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tu("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new xf("No code detected.");const{data:_e,error:Q}=await this._exchangeCodeForSession(r.code);if(Q)throw Q;const ge=new URL(window.location.href);return ge.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ge.toString()),{data:{session:_e.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:h,access_token:f,refresh_token:g,expires_in:_,expires_at:w,token_type:C}=r;if(!f||!_||!g||!C)throw new tu("No session defined in URL");const N=Math.round(Date.now()/1e3),z=parseInt(_);let B=N+z;w&&(B=parseInt(w));const F=B-N;F*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${F}s, should have been closer to ${z}s`);const V=B-z;N-V>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",V,B,N):N-V<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",V,B,N);const{data:H,error:W}=await this._getUser(f);if(W)throw W;const le={provider_token:l,provider_refresh_token:h,access_token:f,expires_in:z,expires_at:B,refresh_token:g,token_type:C,user:H.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:le,redirectType:r.type},error:null})}catch(l){if(Ke(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await zs(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:h,error:f}=s;if(f)return this._returnResult({error:f});const g=(l=h.session)===null||l===void 0?void 0:l.access_token;if(g){const{error:_}=await this.admin.signOut(g,r);if(_&&!(uv(_)&&(_.status===404||_.status===401||_.status===403)))return this._returnResult({error:_})}return r!=="others"&&(await this._removeSession(),await cs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=yv(),l={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(r){return await this._useSession(async s=>{var l,h;try{const{data:{session:f},error:g}=s;if(g)throw g;await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",r,"session",f)}catch(f){await((h=this.stateChangeEmitters.get(r))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",f),console.error(f)}})}async resetPasswordForEmail(r,s={}){let l=null,h=null;this.flowType==="pkce"&&([l,h]=await Po(this.storage,this.storageKey,!0));try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:l,code_challenge_method:h,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(f){if(Ke(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var r;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:l,error:h}=await this._useSession(async f=>{var g,_,w,C,N;const{data:z,error:B}=f;if(B)throw B;const F=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(g=r.options)===null||g===void 0?void 0:g.redirectTo,scopes:(_=r.options)===null||_===void 0?void 0:_.scopes,queryParams:(w=r.options)===null||w===void 0?void 0:w.queryParams,skipBrowserRedirect:!0});return await nt(this.fetch,"GET",F,{headers:this.headers,jwt:(N=(C=z.session)===null||C===void 0?void 0:C.access_token)!==null&&N!==void 0?N:void 0})});if(h)throw h;return Pn()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:r.provider,url:l?.url},error:null})}catch(l){if(Ke(l))return this._returnResult({data:{provider:r.provider,url:null},error:l});throw l}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var l;try{const{error:h,data:{session:f}}=s;if(h)throw h;const{options:g,provider:_,token:w,access_token:C,nonce:N}=r,z=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=f?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:_,id_token:w,access_token:C,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:qr}),{data:B,error:F}=z;return F?this._returnResult({data:{user:null,session:null},error:F}):!B||!B.session||!B.user?this._returnResult({data:{user:null,session:null},error:new Co}):(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("USER_UPDATED",B.session)),this._returnResult({data:B,error:F}))}catch(h){if(Ke(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var l,h;const{data:f,error:g}=s;if(g)throw g;return await nt(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(h=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&h!==void 0?h:void 0})})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await bv(async h=>(h>0&&await xv(200*Math.pow(2,h-1)),this._debug(s,"refreshing attempt",h),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:qr})),(h,f)=>{const g=200*Math.pow(2,h);return f&&$c(f)&&Date.now()+g-l<Oo})}catch(l){if(this._debug(s,"error",l),Ke(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",l),Pn()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:r,url:l},error:null}}async _recoverAndRefresh(){var r,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const h=await zs(this.storage,this.storageKey);if(h&&this.userStorage){let g=await zs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!g&&(g={user:h.user},await Io(this.userStorage,this.storageKey+"-user",g)),h.user=(r=g?.user)!==null&&r!==void 0?r:Wc()}else if(h&&!h.user&&!h.user){const g=await zs(this.storage,this.storageKey+"-user");g&&g?.user?(h.user=g.user,await cs(this.storage,this.storageKey+"-user"),await Io(this.storage,this.storageKey,h)):h.user=Wc()}if(this._debug(l,"session from storage",h),!this._isValidSession(h)){this._debug(l,"session is not valid"),h!==null&&await this._removeSession();return}const f=((s=h.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Fc;if(this._debug(l,`session has${f?"":" not"} expired with margin of ${Fc}s`),f){if(this.autoRefreshToken&&h.refresh_token){const{error:g}=await this._callRefreshToken(h.refresh_token);g&&(console.error(g),$c(g)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else if(h.user&&h.user.__isUserNotAvailableProxy===!0)try{const{data:g,error:_}=await this._getUser(h.access_token);!_&&g?.user?(h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(g){console.error("Error getting user data:",g),this._debug(l,"error getting user data, skipping SIGNED_IN notification",g)}else await this._notifyAllSubscribers("SIGNED_IN",h)}catch(h){this._debug(l,"error",h),console.error(h);return}finally{this._debug(l,"end")}}async _callRefreshToken(r){var s,l;if(!r)throw new vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new hu;const{data:f,error:g}=await this._refreshAccessToken(r);if(g)throw g;if(!f.session)throw new vr;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const _={data:f.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(f){if(this._debug(h,"error",f),Ke(f)){const g={data:null,error:f};return $c(f)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(g),g}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(f),f}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(r,s,l=!0){const h=`#_notifyAllSubscribers(${r})`;this._debug(h,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:r,session:s});const f=[],g=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(r,s)}catch(w){f.push(w)}});if(await Promise.all(g),f.length>0){for(let _=0;_<f.length;_+=1)console.error(f[_]);throw f[0]}}finally{this._debug(h,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const s=Object.assign({},r),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await Io(this.userStorage,this.storageKey+"-user",{user:s.user});const h=Object.assign({},s);delete h.user;const f=Cf(h);await Io(this.storage,this.storageKey,f)}else{const h=Cf(s);await Io(this.storage,this.storageKey,h)}}async _removeSession(){this._debug("#_removeSession()"),await cs(this.storage,this.storageKey),await cs(this.storage,this.storageKey+"-code-verifier"),await cs(this.storage,this.storageKey+"-user"),this.userStorage&&await cs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Pn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((l.expires_at*1e3-r)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${Oo}ms, refresh threshold is ${nd} ticks`),h<=nd&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Mp)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,l){const h=[`provider=${encodeURIComponent(s)}`];if(l?.redirectTo&&h.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&h.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[f,g]=await Po(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(g)}`});h.push(_.toString())}if(l?.queryParams){const f=new URLSearchParams(l.queryParams);h.push(f.toString())}return l?.skipBrowserRedirect&&h.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${r}?${h.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var l;const{data:h,error:f}=s;return f?this._returnResult({data:null,error:f}):await nt(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var l,h;const{data:f,error:g}=s;if(g)return this._returnResult({data:null,error:g});const _=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:w,error:C}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(l=f?.session)===null||l===void 0?void 0:l.access_token});return C?this._returnResult({data:null,error:C}):(r.factorType==="totp"&&w.type==="totp"&&(!((h=w?.totp)===null||h===void 0)&&h.qr_code)&&(w.totp.qr_code=`data:image/svg+xml;utf-8,${w.totp.qr_code}`),this._returnResult({data:w,error:null}))})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:h,error:f}=s;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Xv(r.webauthn.credential_response):Qv(r.webauthn.credential_response)})}:{code:r.code}),{data:_,error:w}=await nt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:g,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});return w?this._returnResult({data:null,error:w}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),this._returnResult({data:_,error:w}))})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:h,error:f}=s;if(f)return this._returnResult({data:null,error:f});const g=await nt(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});if(g.error)return g;const{data:_}=g;if(_.type!=="webauthn")return{data:_,error:null};switch(_.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Jv(_.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Yv(_.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:l}=await this._challenge({factorId:r.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const h={all:[],phone:[],totp:[],webauthn:[]};for(const f of(r=s?.factors)!==null&&r!==void 0?r:[])h.all.push(f),f.status==="verified"&&h[f.factor_type].push(f);return{data:h,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:l},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Hc(l.access_token);let g=null;f.aal&&(g=f.aal);let _=g;((s=(r=l.user.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(_="aal2");const C=f.amr||[];return{data:{currentLevel:g,nextLevel:_,currentAuthenticationMethods:C},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:l},error:h}=s;return h?this._returnResult({data:null,error:h}):l?await nt(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:l.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new vr})})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async l=>{const{data:{session:h},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!h)return this._returnResult({data:null,error:new vr});const g=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"approve"},xform:_=>({data:_,error:null})});return g.data&&g.data.redirect_url&&Pn()&&!s?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(l){if(Ke(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(r,s){try{return await this._useSession(async l=>{const{data:{session:h},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!h)return this._returnResult({data:null,error:new vr});const g=await nt(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"deny"},xform:_=>({data:_,error:null})});return g.data&&g.data.redirect_url&&Pn()&&!s?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(l){if(Ke(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:l}=r;return l?this._returnResult({data:null,error:l}):s?await nt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new vr})})}catch(r){if(Ke(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:l},error:h}=s;return h?this._returnResult({data:null,error:h}):l?(await nt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vr})})}catch(s){if(Ke(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let l=s.keys.find(_=>_.kid===r);if(l)return l;const h=Date.now();if(l=this.jwks.keys.find(_=>_.kid===r),l&&this.jwks_cached_at+av>h)return l;const{data:f,error:g}=await nt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=h,l=f.keys.find(_=>_.kid===r),!l)?null:l}async getClaims(r,s={}){try{let l=r;if(!l){const{data:F,error:V}=await this.getSession();if(V||!F.session)return this._returnResult({data:null,error:V});l=F.session.access_token}const{header:h,payload:f,signature:g,raw:{header:_,payload:w}}=Hc(l);s?.allowExpired||Nv(f.exp);const C=!h.alg||h.alg.startsWith("HS")||!h.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(h.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!C){const{error:F}=await this.getUser(l);if(F)throw F;return{data:{claims:f,header:h,signature:g},error:null}}const N=Tv(h.alg),z=await crypto.subtle.importKey("jwk",C,N,!0,["verify"]);if(!await crypto.subtle.verify(N,z,g,gv(`${_}.${w}`)))throw new sd("Invalid JWT signature");return{data:{claims:f,header:h,signature:g},error:null}}catch(l){if(Ke(l))return this._returnResult({data:null,error:l});throw l}}}za.nextInstanceID={};const l0=za;class u0 extends l0{constructor(r){super(r)}}class c0{constructor(r,s,l){var h,f,g;this.supabaseUrl=r,this.supabaseKey=s;const _=nv(r);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const w=`sb-${_.hostname.split(".")[0]}-auth-token`,C={db:Gg,realtime:Jg,auth:Object.assign(Object.assign({},Kg),{storageKey:w}),global:qg},N=tv(l??{},C);this.storageKey=(h=N.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(f=N.global.headers)!==null&&f!==void 0?f:{},N.accessToken?(this.accessToken=N.accessToken,this.auth=new Proxy({},{get:(z,B)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(B)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=N.auth)!==null&&g!==void 0?g:{},this.headers,N.global.fetch),this.fetch=Qg(s,this._getAccessToken.bind(this),N.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},N.realtime)),this.accessToken&&this.accessToken().then(z=>this.realtime.setAuth(z)).catch(z=>console.warn("Failed to set initial Realtime auth token:",z)),this.rest=new Jm(new URL("rest/v1",_).href,{headers:this.headers,schema:N.db.schema,fetch:this.fetch}),this.storage=new Wg(this.storageUrl.href,this.headers,this.fetch,l?.storage),N.accessToken||this._listenForAuthEvents()}get functions(){return new Vm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,s={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,s,l)}channel(r,s={config:{}}){return this.realtime.channel(r,s)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,s;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(s=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:s,detectSessionInUrl:l,storage:h,userStorage:f,storageKey:g,flowType:_,lock:w,debug:C,throwOnError:N},z,B){const F={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u0({url:this.authUrl.href,headers:Object.assign(Object.assign({},F),z),storageKey:g,autoRefreshToken:r,persistSession:s,detectSessionInUrl:l,storage:h,userStorage:f,flowType:_,lock:w,debug:C,throwOnError:N,fetch:B,hasCustomAuthorizationHeader:Object.keys(this.headers).some(V=>V.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new fg(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,l)=>{this._handleTokenChanged(s,"CLIENT",l?.access_token)})}_handleTokenChanged(r,s,l){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d0=(d,r,s)=>new c0(d,r,s);function h0(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const r=d.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}h0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f0="https://gikhiixoeoecipcxcefr.supabase.co",Bp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdpa2hpaXhvZW9lY2lwY3hjZWZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MTQ5MjgsImV4cCI6MjA4MDE5MDkyOH0.5GfEha8NfyqF4KUhI2aCiDcPTMAOTmK3erjRX8BFCZ0",Ca=d0(f0,Bp),p0=()=>!!Bp,Up=ae.createContext(void 0);function m0({children:d}){const[r,s]=ae.useState(null),[l,h]=ae.useState(null),[f,g]=ae.useState(!0),_=p0();ae.useEffect(()=>{if(!_){g(!1);return}Ca.auth.getSession().then(({data:{session:B}})=>{h(B),s(B?.user??null),g(!1)});const{data:{subscription:z}}=Ca.auth.onAuthStateChange((B,F)=>{h(F),s(F?.user??null),g(!1)});return()=>z.unsubscribe()},[_]);const w=async(z,B)=>{const{error:F}=await Ca.auth.signUp({email:z,password:B});return{error:F}},C=async(z,B)=>{const{error:F}=await Ca.auth.signInWithPassword({email:z,password:B});return{error:F}},N=async()=>{await Ca.auth.signOut(),s(null),h(null)};return c.jsx(Up.Provider,{value:{user:r,session:l,loading:f,isConfigured:_,signUp:w,signIn:C,signOut:N},children:d})}function Fo(){const d=ae.useContext(Up);if(d===void 0)throw new Error("useAuth must be used within an AuthProvider");return d}const g0=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fp=(...d)=>d.filter((r,s,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===s).join(" ").trim();var v0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y0=ae.forwardRef(({color:d="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:h="",children:f,iconNode:g,..._},w)=>ae.createElement("svg",{ref:w,...v0,width:r,height:r,stroke:d,strokeWidth:l?Number(s)*24/Number(r):s,className:Fp("lucide",h),..._},[...g.map(([C,N])=>ae.createElement(C,N)),...Array.isArray(f)?f:[f]]));const pt=(d,r)=>{const s=ae.forwardRef(({className:l,...h},f)=>ae.createElement(y0,{ref:f,iconNode:r,className:Fp(`lucide-${g0(d)}`,l),...h}));return s.displayName=`${d}`,s};const _0=pt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const w0=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const $p=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const x0=pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Ws=pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const b0=pt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Hp=pt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const If=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const lu=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Na=pt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Ro=pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const nu=pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const E0=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const od=pt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const zo=pt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Wp=pt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const uu=pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Rf=pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Af=pt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const Zp=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const S0=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Mf=pt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Lo=pt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const zf=pt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const k0=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Pa=pt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const ds=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const di=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const C0=pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Vc=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ia=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vp=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Df=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const $s=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ao=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Bf=pt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Uf=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const qp=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Rr=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const P0=pt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const j0=pt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function N0({activeView:d,onNavigate:r,isBoundaryOpen:s,onToggleBoundary:l,refreshTrigger:h}){const{user:f}=Fo(),[g,_]=ae.useState([]);ae.useEffect(()=>{(async()=>{try{const z=await fetch("/api/sidebar-buttons");if(!z.ok){console.error("Failed to fetch custom buttons:",z.status,z.statusText),_([]);return}const B=await z.json();if(!B.success){console.error("API returned error:",B.error||"Unknown error"),_([]);return}const V=(B.buttons||[]).filter(H=>H.is_enabled).sort((H,W)=>H.order_index-W.order_index);_(V)}catch(z){console.error("Error fetching custom buttons:",z instanceof Error?z.message:z),_([])}})()},[h]);const w=[{id:"panorama",label:"PANORAMA"},{id:"basemap",label:"BASE MAP"},{id:"elevation",label:"ELEVATION MAP"},{id:"evacuation",label:"EVACUATION"},{id:"hazards",label:"HAZARDS"}],C=[{id:"purok",label:"PUROK"},{id:"barangay",label:"BARANGAY"},{id:"municipal",label:"MUNICIPAL"}];return c.jsxs("div",{className:"w-64 bg-[#000080] h-screen fixed left-0 top-0 flex flex-col",children:[c.jsxs("div",{className:"p-4 flex items-center gap-3 border-b border-blue-600",children:[c.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:c.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-8 h-8 object-contain"})}),c.jsxs("div",{className:"text-white",children:[c.jsx("div",{className:"font-bold text-sm",children:"MDRRMO"}),c.jsx("div",{className:"text-xs",children:"PIO DURAN"})]})]}),c.jsxs("nav",{className:"flex-1 p-4 space-y-3 overflow-y-auto",children:[w.map(N=>c.jsx("button",{onClick:()=>r(N.id),"data-testid":`nav-${N.id}`,className:`w-full py-3 px-4 rounded-lg font-medium text-sm transition-all ${d===N.id?"bg-white text-[#000080] shadow-lg":"bg-white/90 text-gray-700 hover:bg-white hover:shadow-md"}`,children:N.label},N.id)),c.jsxs("div",{children:[c.jsxs("button",{onClick:l,"data-testid":"nav-boundary",className:`w-full py-3 px-4 rounded-lg font-medium text-sm transition-all flex items-center justify-between ${s?"bg-white text-[#000080] shadow-lg":"bg-white/90 text-gray-700 hover:bg-white hover:shadow-md"}`,children:["BOUNDARY MAP",c.jsx(x0,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),s&&c.jsx("div",{className:"mt-2 ml-4 space-y-2",children:C.map(N=>c.jsx("button",{onClick:()=>r(N.id),"data-testid":`nav-${N.id}`,className:`w-full py-2 px-4 rounded-lg font-medium text-xs transition-all ${d===N.id?"bg-blue-400 text-white shadow":"bg-blue-300/50 text-white hover:bg-blue-400/70"}`,children:N.label},N.id))})]}),c.jsx("button",{onClick:()=>r("interactive"),"data-testid":"nav-interactive",className:`w-full py-3 px-4 rounded-lg font-medium text-sm transition-all ${d==="interactive"?"bg-white text-[#000080] shadow-lg":"bg-white/90 text-gray-700 hover:bg-white hover:shadow-md"}`,children:"INTERACTIVE"})]}),g.length>0&&c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"space-y-2",children:g.map(N=>c.jsx("button",{onClick:()=>r(N.button_id),"data-testid":`nav-${N.button_id}`,className:`w-full py-3 px-4 rounded-lg font-medium text-sm transition-all ${d===N.button_id?"bg-white text-[#000080] shadow-lg":"bg-white/90 text-[#000080] hover:bg-white hover:shadow-md"}`,children:N.label},N.id))})})]})}function T0({activeView:d,onNavigate:r}){const{user:s,signOut:l}=Fo(),h=async()=>{await l(),r("panorama")};return c.jsxs("div",{className:"h-16 bg-[#1a1a2e] flex items-center justify-between px-8 shadow-lg",children:[c.jsx("h1",{className:"text-white text-xl font-bold tracking-wider",children:"MDRRMO PIO DURAN MAP DIRECTORY"}),s?c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg px-4 py-2",children:[c.jsx(Uf,{className:"w-5 h-5 text-white"}),c.jsx("span",{className:"text-white text-sm font-medium truncate max-w-[200px]",children:s.email})]}),c.jsxs("button",{onClick:()=>r("admin"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all ${d==="admin"?"bg-white text-[#1a1a2e] shadow-lg":"bg-white/20 text-white hover:bg-white/30"}`,children:[c.jsx(Ia,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Admin Panel"})]}),c.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500/80 text-white font-medium text-sm hover:bg-red-500 transition-all",children:[c.jsx(Zp,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}):c.jsxs("button",{onClick:()=>r("login"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 text-white font-medium text-sm hover:bg-white/30 transition-all",children:[c.jsx(Uf,{className:"w-5 h-5"}),c.jsx("span",{className:"hidden sm:inline",children:"Login"})]})]})}function Ff({folderId:d,title:r,type:s="drive",sharedLink:l}){const[h,f]=ae.useState([]),[g,_]=ae.useState(!0),[w,C]=ae.useState(null),[N,z]=ae.useState(null),[B,F]=ae.useState(!1);ae.useEffect(()=>{(async()=>{try{if(_(!0),C(null),s==="photos"&&l){const be=[{id:"gp1",name:"Evacuation Map",url:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/photo1.jpg",thumbnailUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/thumbnail1.jpg",viewUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/view1"},{id:"gp2",name:"Hazards Map",url:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/photo2.jpg",thumbnailUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/thumbnail2.jpg",viewUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/view2"},{id:"gp3",name:"Elevation Map",url:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/photo3.jpg",thumbnailUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/thumbnail3.jpg",viewUrl:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8/view3"}].map(O=>({id:O.id,name:O.name,url:O.url,thumbnailUrl:O.thumbnailUrl,viewUrl:O.viewUrl}));f(be)}else if(d){const ge="AIzaSyCDcthLGNPlbMr4AFzuK5tl0CMTzsQI9EI",j=`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(`'${d}' in parents and mimeType contains 'image/' and trashed=false`)}&fields=${encodeURIComponent("files(id, name, mimeType, thumbnailLink, webViewLink, createdTime)")}&key=${ge}&pageSize=100&orderBy=createdTime desc`,Ye=await fetch(j);if(!Ye.ok){const ve=await Ye.text();throw new Error(`HTTP ${Ye.status}: ${Ye.statusText}. Details: ${ve}`)}const ut=((await Ye.json()).files||[]).map(ve=>{const je=ve.id.trim(),We=`https://drive.google.com/uc?export=view&id=${je}`;let se=ve.thumbnailLink?.replace(/=s\d+$/,"=s500")||`https://drive.google.com/thumbnail?id=${je}&sz=w500`;return{id:je,name:ve.name,url:We,thumbnailUrl:se,viewUrl:`https://drive.google.com/file/d/${je}/view`}});f(ut)}else C("No folder ID or shared link provided")}catch(ge){const be=ge instanceof Error?ge.message:"Unknown error occurred";console.error("Error loading images:",be),C(be),f([])}finally{_(!1)}})()},[d,l,s]);const V=Q=>{z(Q)},H=()=>{z(null),F(!1)},W=async()=>{if(N)try{await navigator.clipboard.writeText(N.url),F(!0),setTimeout(()=>F(!1),2e3)}catch(Q){console.error("Failed to copy:",Q)}},le=()=>{if(!N)return;const Q=document.createElement("a");Q.href=N.url,Q.download=N.name,Q.target="_blank",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},_e=Q=>Q.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ");return c.jsxs("div",{className:"w-full h-full bg-white/40 backdrop-blur-md rounded-3xl shadow-2xl p-8 border border-white/50",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-3xl font-bold text-[#1a1a2e] mb-2",children:r}),c.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-sky-400 to-blue-600 rounded-full"})]}),g?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(uu,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e]/70 font-medium",children:s==="photos"?"Loading images from Google Photos...":"Loading images from Google Drive..."})]})}):w?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx(Ws,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e] font-semibold mb-2",children:"Error Loading Images"}),c.jsx("p",{className:"text-[#1a1a2e]/70 text-sm break-words",children:w})]})}):h.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(od,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e]/70 font-medium text-lg",children:"No images found in this folder"})]})}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(Q=>c.jsxs("div",{className:"group relative aspect-[16/9] rounded-2xl overflow-hidden bg-white/60 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:-translate-y-2",onClick:()=>V(Q),children:[c.jsx("img",{src:Q.thumbnailUrl,alt:Q.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy",onError:ge=>{ge.target.src=`https://placehold.co/600x400/eee/aaa?text=${encodeURIComponent(Q.name)}`}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-black/60",children:c.jsx("h3",{className:"text-white font-semibold text-sm truncate text-center",children:_e(Q.name)})})]},Q.id))}),N&&c.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:H,children:[c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:Q=>{Q.stopPropagation(),W()},title:"Copy image URL",children:B?c.jsx($p,{className:"w-6 h-6 text-green-400"}):c.jsx(Hp,{className:"w-6 h-6 text-white"})}),c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:Q=>{Q.stopPropagation(),le()},title:"Download image",children:c.jsx(lu,{className:"w-6 h-6 text-white"})}),c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:H,title:"Close",children:c.jsx(Rr,{className:"w-6 h-6 text-white"})})]}),c.jsxs("div",{className:"max-w-7xl max-h-[90vh] flex flex-col items-center",onClick:Q=>Q.stopPropagation(),children:[c.jsx("img",{src:N.url,alt:N.name,className:"max-w-full max-h-[80vh] object-contain rounded-2xl shadow-2xl",onError:Q=>{Q.target.src="https://placehold.co/800x600/333/ddd?text=Preview+Unavailable"}}),c.jsx("p",{className:"text-white text-center mt-4 font-medium bg-black/50 px-6 py-3 rounded-xl max-w-2xl",children:_e(N.name)})]})]})]})}window.libpannellum=(function(d,r,s){function l(N){function z(I,D){return I.level==1&&D.level!=1?-1:D.level==1&&I.level!=1?1:D.timestamp-I.timestamp}function B(I,D){return I.level!=D.level?I.level-D.level:I.diff-D.diff}function F(I,D,oe,he,ee,Z){this.vertices=I,this.side=D,this.level=oe,this.x=he,this.y=ee,this.path=Z.replace("%s",D).replace("%l",oe).replace("%x",he).replace("%y",ee)}function V(I,D,oe,he,ee){var Z,Ne=D.vertices;Z=Q(I,Ne.slice(0,3));var J=Q(I,Ne.slice(3,6)),Be=Q(I,Ne.slice(6,9)),Ne=Q(I,Ne.slice(9,12)),Le=Z[0]+J[0]+Be[0]+Ne[0];if(Le==-4||Le==4?Z=!1:(Le=Z[1]+J[1]+Be[1]+Ne[1],Z=Le==-4||Le==4?!1:Z[2]+J[2]+Be[2]+Ne[2]!=4),Z){for(Z=D.vertices,J=Z[0]+Z[3]+Z[6]+Z[9],Be=Z[1]+Z[4]+Z[7]+Z[10],Ne=Z[2]+Z[5]+Z[8]+Z[11],Le=Math.sqrt(J*J+Be*Be+Ne*Ne),Ne=Math.asin(Ne/Le),J=Math.atan2(Be,J)-he,J+=J>Math.PI?-2*Math.PI:J<-Math.PI?2*Math.PI:0,J=Math.abs(J),D.diff=Math.acos(Math.sin(oe)*Math.sin(Ne)+Math.cos(oe)*Math.cos(Ne)*Math.cos(J)),J=!1,Be=0;Be<O.nodeCache.length;Be++)if(O.nodeCache[Be].path==D.path){J=!0,O.nodeCache[Be].timestamp=O.nodeCacheTimestamp++,O.nodeCache[Be].diff=D.diff,O.currentNodes.push(O.nodeCache[Be]);break}if(J||(D.timestamp=O.nodeCacheTimestamp++,O.currentNodes.push(D),O.nodeCache.push(D)),D.level<O.level){var Ne=se.cubeResolution*Math.pow(2,D.level-se.maxLevel),J=Math.ceil(Ne*se.invTileResolution)-1,Be=Ne%se.tileResolution*2,ct=2*Ne%se.tileResolution;ct===0&&(ct=se.tileResolution),Be===0&&(Be=2*se.tileResolution),Le=.5,(D.x==J||D.y==J)&&(Le=1-se.tileResolution/(se.tileResolution+ct));var rt=1-Le,Ne=[],Tt=Le,Et=Le,lt=Le,yt=rt,xe=rt,Je=rt;for(ct<se.tileResolution&&(D.x==J&&D.y!=J?(xe=Et=.5,(D.side=="d"||D.side=="u")&&(Je=lt=.5)):D.x!=J&&D.y==J&&(yt=Tt=.5,D.side=="l"||D.side=="r")&&(Je=lt=.5)),Be<=se.tileResolution&&(D.x==J&&(Tt=0,yt=1,D.side=="l"||D.side=="r")&&(lt=0,Je=1),D.y==J&&(Et=0,xe=1,D.side=="d"||D.side=="u")&&(lt=0,Je=1)),ct=[Z[0],Z[1],Z[2],Z[0]*Tt+Z[3]*yt,Z[1]*Le+Z[4]*rt,Z[2]*lt+Z[5]*Je,Z[0]*Tt+Z[6]*yt,Z[1]*Et+Z[7]*xe,Z[2]*lt+Z[8]*Je,Z[0]*Le+Z[9]*rt,Z[1]*Et+Z[10]*xe,Z[2]*lt+Z[11]*Je],ct=new F(ct,D.side,D.level+1,2*D.x,2*D.y,se.fullpath),Ne.push(ct),D.x==J&&Be<=se.tileResolution||(ct=[Z[0]*Tt+Z[3]*yt,Z[1]*Le+Z[4]*rt,Z[2]*lt+Z[5]*Je,Z[3],Z[4],Z[5],Z[3]*Le+Z[6]*rt,Z[4]*Et+Z[7]*xe,Z[5]*lt+Z[8]*Je,Z[0]*Tt+Z[6]*yt,Z[1]*Et+Z[7]*xe,Z[2]*lt+Z[8]*Je],ct=new F(ct,D.side,D.level+1,2*D.x+1,2*D.y,se.fullpath),Ne.push(ct)),D.x==J&&Be<=se.tileResolution||D.y==J&&Be<=se.tileResolution||(ct=[Z[0]*Tt+Z[6]*yt,Z[1]*Et+Z[7]*xe,Z[2]*lt+Z[8]*Je,Z[3]*Le+Z[6]*rt,Z[4]*Et+Z[7]*xe,Z[5]*lt+Z[8]*Je,Z[6],Z[7],Z[8],Z[9]*Tt+Z[6]*yt,Z[10]*Le+Z[7]*rt,Z[11]*lt+Z[8]*Je],ct=new F(ct,D.side,D.level+1,2*D.x+1,2*D.y+1,se.fullpath),Ne.push(ct)),D.y==J&&Be<=se.tileResolution||(ct=[Z[0]*Le+Z[9]*rt,Z[1]*Et+Z[10]*xe,Z[2]*lt+Z[11]*Je,Z[0]*Tt+Z[6]*yt,Z[1]*Et+Z[7]*xe,Z[2]*lt+Z[8]*Je,Z[9]*Tt+Z[6]*yt,Z[10]*Le+Z[7]*rt,Z[11]*lt+Z[8]*Je,Z[9],Z[10],Z[11]],ct=new F(ct,D.side,D.level+1,2*D.x,2*D.y+1,se.fullpath),Ne.push(ct)),D=0;D<Ne.length;D++)V(I,Ne[D],oe,he)}}}function H(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function W(I,D,oe){var he=Math.sin(D);if(D=Math.cos(D),oe=="x")return[I[0],D*I[1]+he*I[2],D*I[2]-he*I[1],I[3],D*I[4]+he*I[5],D*I[5]-he*I[4],I[6],D*I[7]+he*I[8],D*I[8]-he*I[7]];if(oe=="y")return[D*I[0]-he*I[2],I[1],D*I[2]+he*I[0],D*I[3]-he*I[5],I[4],D*I[5]+he*I[3],D*I[6]-he*I[8],I[7],D*I[8]+he*I[6]];if(oe=="z")return[D*I[0]+he*I[1],D*I[1]-he*I[0],I[2],D*I[3]+he*I[4],D*I[4]-he*I[3],I[5],D*I[6]+he*I[7],D*I[7]-he*I[6],I[8]]}function le(I){return[I[0],I[4],I[8],I[12],I[1],I[5],I[9],I[13],I[2],I[6],I[10],I[14],I[3],I[7],I[11],I[15]]}function _e(I){ze(I,I.path+"."+se.extension,function(D,oe){I.texture=D,I.textureLoaded=oe?2:1},M.crossOrigin)}function Q(I,D){var ee=[I[0]*D[0]+I[1]*D[1]+I[2]*D[2],I[4]*D[0]+I[5]*D[1]+I[6]*D[2],I[11]+I[8]*D[0]+I[9]*D[1]+I[10]*D[2],1/(I[12]*D[0]+I[13]*D[1]+I[14]*D[2])],oe=ee[0]*ee[3],he=ee[1]*ee[3],ee=ee[2]*ee[3],Z=[0,0,0];return-1>oe&&(Z[0]=-1),1<oe&&(Z[0]=1),-1>he&&(Z[1]=-1),1<he&&(Z[1]=1),(-1>ee||1<ee)&&(Z[2]=1),Z}function ge(){console.log("Reducing canvas size due to error 1286!"),be.width=Math.round(be.width/2),be.height=Math.round(be.height/2)}var be=r.createElement("canvas");be.style.width=be.style.height="100%",N.appendChild(be);var O,j,Ye,Ge,ut,ve,je,We,se,ne,we,$e,te,Pe,ie,M;this.init=function(I,D,oe,he,ee,Z,J,Be){function Ne(yt){if(ct){var xe=yt*yt*4,Je=new Uint8ClampedArray(xe),wt=Be.backgroundColor?Be.backgroundColor:[0,0,0];wt[0]*=255,wt[1]*=255,wt[2]*=255;for(var x=0;x<xe;x++)Je[x++]=wt[0],Je[x++]=wt[1],Je[x++]=wt[2];for(yt=new ImageData(Je,yt,yt),Le=0;6>Le;Le++)se[Le].width==0&&(se[Le]=yt)}}if(D===s&&(D="equirectangular"),D!="equirectangular"&&D!="cubemap"&&D!="multires")throw console.log("Error: invalid image type specified!"),{type:"config error"};if(ne=D,se=I,we=oe,M=Be||{},O){if(Ye&&(j.detachShader(O,Ye),j.deleteShader(Ye)),Ge&&(j.detachShader(O,Ge),j.deleteShader(Ge)),j.bindBuffer(j.ARRAY_BUFFER,null),j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,null),O.texture&&j.deleteTexture(O.texture),O.nodeCache)for(I=0;I<O.nodeCache.length;I++)j.deleteTexture(O.nodeCache[I].texture);j.deleteProgram(O),O=s}We=s;var Le,ct=!1,rt;if(ne=="cubemap")for(Le=0;6>Le;Le++)0<se[Le].width?(rt===s&&(rt=se[Le].width),rt!=se[Le].width&&console.log("Cube faces have inconsistent widths: "+rt+" vs. "+se[Le].width)):ct=!0;if(ne=="cubemap"&&(rt&rt-1)!==0&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(j||(j=be.getContext("experimental-webgl",{alpha:!1,depth:!1})),j&&j.getError()==1286&&ge()),!j&&(ne=="multires"&&se.hasOwnProperty("fallbackPath")||ne=="cubemap")&&("WebkitAppearance"in r.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||navigator.appVersion.indexOf("MSIE 10")!==-1)){ve&&N.removeChild(ve),ve=r.createElement("div"),ve.className="pnlm-world",he=se.basePath?se.basePath+se.fallbackPath:se.fallbackPath;var Tt="frblud".split(""),Et=0;ee=function(){var xe=r.createElement("canvas");xe.className="pnlm-face pnlm-"+Tt[this.side]+"face",ve.appendChild(xe);var Je=xe.getContext("2d");xe.style.width=this.width+4+"px",xe.style.height=this.height+4+"px",xe.width=this.width+4,xe.height=this.height+4,Je.drawImage(this,2,2);var wt=Je.getImageData(0,0,xe.width,xe.height),x=wt.data,Ue,Me;for(Ue=2;Ue<xe.width-2;Ue++)for(Me=0;4>Me;Me++)x[4*(Ue+xe.width)+Me]=x[4*(Ue+2*xe.width)+Me],x[4*(Ue+xe.width*(xe.height-2))+Me]=x[4*(Ue+xe.width*(xe.height-3))+Me];for(Ue=2;Ue<xe.height-2;Ue++)for(Me=0;4>Me;Me++)x[4*(Ue*xe.width+1)+Me]=x[4*(Ue*xe.width+2)+Me],x[4*((Ue+1)*xe.width-2)+Me]=x[4*((Ue+1)*xe.width-3)+Me];for(Me=0;4>Me;Me++)x[4*(xe.width+1)+Me]=x[4*(2*xe.width+2)+Me],x[4*(2*xe.width-2)+Me]=x[4*(3*xe.width-3)+Me],x[4*(xe.width*(xe.height-2)+1)+Me]=x[4*(xe.width*(xe.height-3)+2)+Me],x[4*(xe.width*(xe.height-1)-2)+Me]=x[4*(xe.width*(xe.height-2)-3)+Me];for(Ue=1;Ue<xe.width-1;Ue++)for(Me=0;4>Me;Me++)x[4*Ue+Me]=x[4*(Ue+xe.width)+Me],x[4*(Ue+xe.width*(xe.height-1))+Me]=x[4*(Ue+xe.width*(xe.height-2))+Me];for(Ue=1;Ue<xe.height-1;Ue++)for(Me=0;4>Me;Me++)x[Ue*xe.width*4+Me]=x[4*(Ue*xe.width+1)+Me],x[4*((Ue+1)*xe.width-1)+Me]=x[4*((Ue+1)*xe.width-2)+Me];for(Me=0;4>Me;Me++)x[Me]=x[4*(xe.width+1)+Me],x[4*(xe.width-1)+Me]=x[4*(2*xe.width-2)+Me],x[xe.width*(xe.height-1)*4+Me]=x[4*(xe.width*(xe.height-2)+1)+Me],x[4*(xe.width*xe.height-1)+Me]=x[4*(xe.width*(xe.height-1)-2)+Me];Je.putImageData(wt,0,0),lt.call(this)};var lt=function(){0<this.width?(ut===s&&(ut=this.width),ut!=this.width&&console.log("Fallback faces have inconsistent widths: "+ut+" vs. "+this.width)):ct=!0,Et++,Et==6&&(ut=this.width,N.appendChild(ve),J())},ct=!1;for(Le=0;6>Le;Le++)Z=new Image,Z.crossOrigin=M.crossOrigin?M.crossOrigin:"anonymous",Z.side=Le,Z.onload=ee,Z.onerror=lt,Z.src=ne=="multires"?he.replace("%s",Tt[Le])+"."+se.extension:se[Le].src;Ne(ut)}else{if(!j)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};for(ne=="cubemap"&&Ne(rt),se.fullpath=se.basePath?se.basePath+se.path:se.path,se.invTileResolution=1/se.tileResolution,I=H(),je=[],Le=0;6>Le;Le++)je[Le]=I.slice(12*Le,12*Le+12),I=H();if(I=0,ne=="equirectangular"){if(I=j.getParameter(j.MAX_TEXTURE_SIZE),Math.max(se.width/2,se.height)>I)throw console.log("Error: The image is too big; it's "+se.width+"px wide, but this device's maximum supported size is "+2*I+"px."),{type:"webgl size error",width:se.width,maxWidth:2*I}}else if(ne=="cubemap"&&rt>j.getParameter(j.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+rt+"px wide, but this device's maximum supported size is "+I+"px."),{type:"webgl size error",width:rt,maxWidth:I};if(Be===s||Be.horizonPitch===s&&Be.horizonRoll===s||(We=[Be.horizonPitch==s?0:Be.horizonPitch,Be.horizonRoll==s?0:Be.horizonRoll]),rt=j.TEXTURE_2D,j.viewport(0,0,j.drawingBufferWidth,j.drawingBufferHeight),j.getShaderPrecisionFormat&&(D=j.getShaderPrecisionFormat(j.FRAGMENT_SHADER,j.HIGH_FLOAT))&&1>D.precision&&(g=g.replace("highp","mediump")),Ye=j.createShader(j.VERTEX_SHADER),D=h,ne=="multires"&&(D=f),j.shaderSource(Ye,D),j.compileShader(Ye),Ge=j.createShader(j.FRAGMENT_SHADER),D=w,ne=="cubemap"?(rt=j.TEXTURE_CUBE_MAP,D=_):ne=="multires"&&(D=C),j.shaderSource(Ge,D),j.compileShader(Ge),O=j.createProgram(),j.attachShader(O,Ye),j.attachShader(O,Ge),j.linkProgram(O),j.getShaderParameter(Ye,j.COMPILE_STATUS)||console.log(j.getShaderInfoLog(Ye)),j.getShaderParameter(Ge,j.COMPILE_STATUS)||console.log(j.getShaderInfoLog(Ge)),j.getProgramParameter(O,j.LINK_STATUS)||console.log(j.getProgramInfoLog(O)),j.useProgram(O),O.drawInProgress=!1,D=Be.backgroundColor?Be.backgroundColor:[0,0,0],j.clearColor(D[0],D[1],D[2],1),j.clear(j.COLOR_BUFFER_BIT),O.texCoordLocation=j.getAttribLocation(O,"a_texCoord"),j.enableVertexAttribArray(O.texCoordLocation),ne!="multires"?($e||($e=j.createBuffer()),j.bindBuffer(j.ARRAY_BUFFER,$e),j.bufferData(j.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),j.STATIC_DRAW),j.vertexAttribPointer(O.texCoordLocation,2,j.FLOAT,!1,0,0),O.aspectRatio=j.getUniformLocation(O,"u_aspectRatio"),j.uniform1f(O.aspectRatio,j.drawingBufferWidth/j.drawingBufferHeight),O.psi=j.getUniformLocation(O,"u_psi"),O.theta=j.getUniformLocation(O,"u_theta"),O.f=j.getUniformLocation(O,"u_f"),O.h=j.getUniformLocation(O,"u_h"),O.v=j.getUniformLocation(O,"u_v"),O.vo=j.getUniformLocation(O,"u_vo"),O.rot=j.getUniformLocation(O,"u_rot"),j.uniform1f(O.h,he/(2*Math.PI)),j.uniform1f(O.v,ee/Math.PI),j.uniform1f(O.vo,Z/Math.PI*2),ne=="equirectangular"&&(O.backgroundColor=j.getUniformLocation(O,"u_backgroundColor"),j.uniform4fv(O.backgroundColor,D.concat([1]))),O.texture=j.createTexture(),j.bindTexture(rt,O.texture),ne=="cubemap"?(j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[1]),j.texImage2D(j.TEXTURE_CUBE_MAP_NEGATIVE_X,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[3]),j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_Y,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[4]),j.texImage2D(j.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[5]),j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_Z,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[0]),j.texImage2D(j.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se[2])):se.width<=I?(j.uniform1i(j.getUniformLocation(O,"u_splitImage"),0),j.texImage2D(rt,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se)):(j.uniform1i(j.getUniformLocation(O,"u_splitImage"),1),he=r.createElement("canvas"),he.width=se.width/2,he.height=se.height,he=he.getContext("2d"),he.drawImage(se,0,0),ee=he.getImageData(0,0,se.width/2,se.height),j.texImage2D(rt,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,ee),O.texture2=j.createTexture(),j.activeTexture(j.TEXTURE1),j.bindTexture(rt,O.texture2),j.uniform1i(j.getUniformLocation(O,"u_image1"),1),he.drawImage(se,-se.width/2,0),ee=he.getImageData(0,0,se.width/2,se.height),j.texImage2D(rt,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,ee),j.texParameteri(rt,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(rt,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(rt,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(rt,j.TEXTURE_MAG_FILTER,j.LINEAR),j.activeTexture(j.TEXTURE0)),j.texParameteri(rt,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(rt,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(rt,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(rt,j.TEXTURE_MAG_FILTER,j.LINEAR)):(O.vertPosLocation=j.getAttribLocation(O,"a_vertCoord"),j.enableVertexAttribArray(O.vertPosLocation),te||(te=j.createBuffer()),Pe||(Pe=j.createBuffer()),ie||(ie=j.createBuffer()),j.bindBuffer(j.ARRAY_BUFFER,Pe),j.bufferData(j.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),j.STATIC_DRAW),j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,ie),j.bufferData(j.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),j.STATIC_DRAW),O.perspUniform=j.getUniformLocation(O,"u_perspMatrix"),O.cubeUniform=j.getUniformLocation(O,"u_cubeMatrix"),O.level=-1,O.currentNodes=[],O.nodeCache=[],O.nodeCacheTimestamp=0),he=j.getError(),he!==0)throw console.log("Error: Something went wrong with WebGL!",he),{type:"webgl error"};J()}},this.destroy=function(){if(N!==s&&(be!==s&&N.contains(be)&&N.removeChild(be),ve!==s&&N.contains(ve)&&N.removeChild(ve)),j){var I=j.getExtension("WEBGL_lose_context");I&&I.loseContext()}},this.resize=function(){var I=d.devicePixelRatio||1;be.width=be.clientWidth*I,be.height=be.clientHeight*I,j&&(j.getError()==1286&&ge(),j.viewport(0,0,j.drawingBufferWidth,j.drawingBufferHeight),ne!="multires"&&j.uniform1f(O.aspectRatio,be.clientWidth/be.clientHeight))},this.resize(),this.setPose=function(I,D){We=[I,D]},this.render=function(I,D,oe,he){var ee,Z=0;if(he===s&&(he={}),he.roll&&(Z=he.roll),We!==s){ee=We[0];var J=We[1],Be=I,Ne=D,Le=Math.cos(J)*Math.sin(I)*Math.sin(ee)+Math.cos(I)*(Math.cos(ee)*Math.cos(D)+Math.sin(J)*Math.sin(ee)*Math.sin(D)),ct=-Math.sin(I)*Math.sin(J)+Math.cos(I)*Math.cos(J)*Math.sin(D);I=Math.cos(J)*Math.cos(ee)*Math.sin(I)+Math.cos(I)*(-Math.cos(D)*Math.sin(ee)+Math.cos(ee)*Math.sin(J)*Math.sin(D)),I=Math.asin(Math.max(Math.min(I,1),-1)),D=Math.atan2(ct,Le),ee=[Math.cos(Be)*(Math.sin(J)*Math.sin(ee)*Math.cos(Ne)-Math.cos(ee)*Math.sin(Ne)),Math.cos(Be)*Math.cos(J)*Math.cos(Ne),Math.cos(Be)*(Math.cos(ee)*Math.sin(J)*Math.cos(Ne)+Math.sin(Ne)*Math.sin(ee))],J=[-Math.cos(I)*Math.sin(D),Math.cos(I)*Math.cos(D)],J=Math.acos(Math.max(Math.min((ee[0]*J[0]+ee[1]*J[1])/(Math.sqrt(ee[0]*ee[0]+ee[1]*ee[1]+ee[2]*ee[2])*Math.sqrt(J[0]*J[0]+J[1]*J[1])),1),-1)),0>ee[2]&&(J=2*Math.PI-J),Z+=J}if(j||ne!="multires"&&ne!="cubemap"){if(ne!="multires")oe=2*Math.atan(Math.tan(.5*oe)/(j.drawingBufferWidth/j.drawingBufferHeight)),oe=1/Math.tan(.5*oe),j.uniform1f(O.psi,D),j.uniform1f(O.theta,I),j.uniform1f(O.rot,Z),j.uniform1f(O.f,oe),we===!0&&ne=="equirectangular"&&(j.bindTexture(j.TEXTURE_2D,O.texture),j.texImage2D(j.TEXTURE_2D,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,se)),j.drawArrays(j.TRIANGLES,0,6);else{for(ee=j.drawingBufferWidth/j.drawingBufferHeight,J=2*Math.atan(Math.tan(oe/2)*j.drawingBufferHeight/j.drawingBufferWidth),J=1/Math.tan(J/2),ee=[J/ee,0,0,0,0,J,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0],J=1;J<se.maxLevel&&j.drawingBufferWidth>se.tileResolution*Math.pow(2,J-1)*Math.tan(oe/2)*.707;)J++;if(O.level=J,J=[1,0,0,0,1,0,0,0,1],J=W(J,-Z,"z"),J=W(J,-I,"x"),J=W(J,D,"y"),J=[J[0],J[1],J[2],0,J[3],J[4],J[5],0,J[6],J[7],J[8],0,0,0,0,1],j.uniformMatrix4fv(O.perspUniform,!1,new Float32Array(le(ee))),j.uniformMatrix4fv(O.cubeUniform,!1,new Float32Array(le(J))),Z=[ee[0]*J[0],ee[0]*J[1],ee[0]*J[2],0,ee[5]*J[4],ee[5]*J[5],ee[5]*J[6],0,ee[10]*J[8],ee[10]*J[9],ee[10]*J[10],ee[11],-J[8],-J[9],-J[10],0],O.nodeCache.sort(z),200<O.nodeCache.length&&O.nodeCache.length>O.currentNodes.length+50)for(ee=O.nodeCache.splice(200,O.nodeCache.length-200),J=0;J<ee.length;J++)j.deleteTexture(ee[J].texture);for(O.currentNodes=[],J="fbudlr".split(""),ee=0;6>ee;ee++)Be=new F(je[ee],J[ee],1,0,0,se.fullpath),V(Z,Be,I,D);for(O.currentNodes.sort(B),I=re.length-1;0<=I;I--)O.currentNodes.indexOf(re[I].node)===-1&&(re[I].node.textureLoad=!1,re.splice(I,1));if(re.length===0){for(I=0;I<O.currentNodes.length;I++)if(D=O.currentNodes[I],!D.texture&&!D.textureLoad){D.textureLoad=!0,setTimeout(_e,0,D);break}}if(!O.drawInProgress){for(O.drawInProgress=!0,j.clear(j.COLOR_BUFFER_BIT),I=0;I<O.currentNodes.length;I++)1<O.currentNodes[I].textureLoaded&&(j.bindBuffer(j.ARRAY_BUFFER,te),j.bufferData(j.ARRAY_BUFFER,new Float32Array(O.currentNodes[I].vertices),j.STATIC_DRAW),j.vertexAttribPointer(O.vertPosLocation,3,j.FLOAT,!1,0,0),j.bindBuffer(j.ARRAY_BUFFER,Pe),j.vertexAttribPointer(O.texCoordLocation,2,j.FLOAT,!1,0,0),j.bindTexture(j.TEXTURE_2D,O.currentNodes[I].texture),j.drawElements(j.TRIANGLES,6,j.UNSIGNED_SHORT,0));O.drawInProgress=!1}}if(he.returnImage!==s)return be.toDataURL("image/png")}else for(ee=ut/2,he={f:"translate3d(-"+(ee+2)+"px, -"+(ee+2)+"px, -"+ee+"px)",b:"translate3d("+(ee+2)+"px, -"+(ee+2)+"px, "+ee+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(ee+2)+"px, -"+ee+"px, "+(ee+2)+"px) rotateX(270deg)",d:"translate3d(-"+(ee+2)+"px, "+ee+"px, -"+(ee+2)+"px) rotateX(90deg)",l:"translate3d(-"+ee+"px, -"+(ee+2)+"px, "+(ee+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+ee+"px, -"+(ee+2)+"px, -"+(ee+2)+"px) rotateY(270deg)"},oe=1/Math.tan(oe/2),oe=oe*be.clientWidth/2+"px",D="perspective("+oe+") translateZ("+oe+") rotateX("+I+"rad) rotateY("+D+"rad) ",oe=Object.keys(he),I=0;6>I;I++)(Z=ve.querySelector(".pnlm-"+oe[I]+"face"))&&(Z.style.webkitTransform=D+he[oe[I]],Z.style.transform=D+he[oe[I]])},this.isLoading=function(){if(j&&ne=="multires"){for(var I=0;I<O.currentNodes.length;I++)if(!O.currentNodes[I].textureLoaded)return!0}return!1},this.getCanvas=function(){return be};var re=[],ze=(function(){function I(){var J=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=ee||"anonymous";var Be=function(){if(0<J.image.width&&0<J.image.height){var Ne=J.image;j.bindTexture(j.TEXTURE_2D,J.texture),j.texImage2D(j.TEXTURE_2D,0,j.RGB,j.RGB,j.UNSIGNED_BYTE,Ne),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.bindTexture(j.TEXTURE_2D,null),J.callback(J.texture,!0)}else J.callback(J.texture,!1);re.length?(Ne=re.shift(),J.loadTexture(Ne.src,Ne.texture,Ne.callback)):he[oe++]=J};this.image.addEventListener("load",Be),this.image.addEventListener("error",Be)}function D(J,Be,Ne,Le){this.node=J,this.src=Be,this.texture=Ne,this.callback=Le}var oe=4,he={},ee;I.prototype.loadTexture=function(J,Be,Ne){this.texture=Be,this.callback=Ne,this.image.src=J};for(var Z=0;Z<oe;Z++)he[Z]=new I;return function(J,Be,Ne,Le){return ee=Le,Le=j.createTexture(),oe?he[--oe].loadTexture(Be,Le,Ne):re.push(new D(J,Be,Le,Ne)),Le}})()}var h="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",f="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",g=`precision highp float;
uniform float u_aspectRatio;
uniform float u_psi;
uniform float u_theta;
uniform float u_f;
uniform float u_h;
uniform float u_v;
uniform float u_vo;
uniform float u_rot;
const float PI = 3.14159265358979323846264;
uniform sampler2D u_image0;
uniform sampler2D u_image1;
uniform bool u_splitImage;
uniform samplerCube u_imageCube;
varying vec2 v_texCoord;
uniform vec4 u_backgroundColor;
void main() {
float x = v_texCoord.x * u_aspectRatio;
float y = v_texCoord.y;
float sinrot = sin(u_rot);
float cosrot = cos(u_rot);
float rot_x = x * cosrot - y * sinrot;
float rot_y = x * sinrot + y * cosrot;
float sintheta = sin(u_theta);
float costheta = cos(u_theta);
float a = u_f * costheta - rot_y * sintheta;
float root = sqrt(rot_x * rot_x + a * a);
float lambda = atan(rot_x / root, a / root) + u_psi;
float phi = atan((rot_y * costheta + u_f * sintheta) / root);`,_=g+`float cosphi = cos(phi);
gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));
}`,w=g+`lambda = mod(lambda + PI, PI * 2.0) - PI;
vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));
if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)
gl_FragColor = u_backgroundColor;
else {
if(u_splitImage) {
if(coord.x < 0.0)
gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));
else
gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));
} else {
gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));
}
}
}`,C="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(N,z,B,F){return new l(N)}}})(window,document);window.pannellum=(function(d,r,s){function l(h,f){function g(){var b=r.createElement("div");if(b.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",b.getElementsByTagName("i").length==1)N();else{Un=x.hfov,Pt=x.pitch;var P;if(x.type=="cubemap"){for(Ft=[],b=0;6>b;b++)Ft.push(new Image),Ft[b].crossOrigin=x.crossOrigin;Oe.load.lbox.style.display="block",Oe.load.lbar.style.display="none"}else if(x.type=="multires")b=JSON.parse(JSON.stringify(x.multiRes)),x.basePath&&x.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(x.multiRes.basePath)?b.basePath=x.basePath+x.multiRes.basePath:x.multiRes.basePath?b.basePath=x.multiRes.basePath:x.basePath&&(b.basePath=x.basePath),Ft=b;else if(x.dynamic===!0)Ft=x.panorama;else{if(x.panorama===s){N(x.strings.noPanoramaError);return}Ft=new Image}if(x.type=="cubemap")for(var R=6,ue=function(){R--,R===0&&w()},pe=function(hn){var Xt=r.createElement("a");Xt.href=hn.target.src,Xt.textContent=Xt.href,N(x.strings.fileAccessError.replace("%s",Xt.outerHTML))},b=0;b<Ft.length;b++)P=x.cubeMap[b],P=="null"?(console.log("Will use background instead of missing cubemap face "+b),ue()):(x.basePath&&!_(P)&&(P=x.basePath+P),Ft[b].onload=ue,Ft[b].onerror=pe,Ft[b].src=yt(P));else if(x.type=="multires")w();else if(P="",x.basePath&&(P=x.basePath),x.dynamic!==!0){P=_(x.panorama)?x.panorama:P+x.panorama,Ft.onload=function(){d.URL.revokeObjectURL(this.src),w()};var Ee=new XMLHttpRequest;Ee.onloadend=function(){if(Ee.status!=200){var Xe=r.createElement("a");Xe.href=P,Xe.textContent=Xe.href,N(x.strings.fileAccessError.replace("%s",Xe.outerHTML))}C(this.response),Oe.load.msg.innerHTML=""},Ee.onprogress=function(Xe){if(Xe.lengthComputable){Oe.load.lbarFill.style.width=Xe.loaded/Xe.total*100+"%";var hn,Xt;1e6<Xe.total?(hn="MB",Xt=(Xe.loaded/1e6).toFixed(2),Xe=(Xe.total/1e6).toFixed(2)):1e3<Xe.total?(hn="kB",Xt=(Xe.loaded/1e3).toFixed(1),Xe=(Xe.total/1e3).toFixed(1)):(hn="B",Xt=Xe.loaded,Xe=Xe.total),Oe.load.msg.innerHTML=Xt+" / "+Xe+" "+hn}else Oe.load.lbox.style.display="block",Oe.load.lbar.style.display="none"};try{Ee.open("GET",P,!0)}catch{N(x.strings.malformedURLError)}Ee.responseType="blob",Ee.setRequestHeader("Accept","image/*,*/*;q=0.9"),Ee.withCredentials=x.crossOrigin==="use-credentials",Ee.send()}x.draggable&&ke.classList.add("pnlm-grab"),ke.classList.remove("pnlm-grabbing"),sr=x.dynamicUpdate===!0,x.dynamic&&sr&&(Ft=x.panorama,w())}}function _(b){return/^(?:[a-z]+:)?\/\//i.test(b)||b[0]=="/"||b.slice(0,5)=="blob:"}function w(){Ue||(Ue=new libpannellum.renderer(Lt)),tn||(tn=!0,nn.addEventListener("mousedown",F,!1),r.addEventListener("mousemove",W,!1),r.addEventListener("mouseup",le,!1),x.mouseZoom&&(ke.addEventListener("mousewheel",Ye,!1),ke.addEventListener("DOMMouseScroll",Ye,!1)),x.doubleClickZoom&&nn.addEventListener("dblclick",V,!1),h.addEventListener("mozfullscreenchange",J,!1),h.addEventListener("webkitfullscreenchange",J,!1),h.addEventListener("msfullscreenchange",J,!1),h.addEventListener("fullscreenchange",J,!1),d.addEventListener("resize",ne,!1),d.addEventListener("orientationchange",ne,!1),x.disableKeyboardCtrl||(h.addEventListener("keydown",Ge,!1),h.addEventListener("keyup",ve,!1),h.addEventListener("blur",ut,!1)),r.addEventListener("mouseleave",le,!1),r.documentElement.style.pointerAction===""&&r.documentElement.style.touchAction===""?(nn.addEventListener("pointerdown",be,!1),nn.addEventListener("pointermove",O,!1),nn.addEventListener("pointerup",j,!1),nn.addEventListener("pointerleave",j,!1)):(nn.addEventListener("touchstart",_e,!1),nn.addEventListener("touchmove",Q,!1),nn.addEventListener("touchend",ge,!1)),d.navigator.pointerEnabled&&(h.style.touchAction="none")),M(),Ne(x.hfov),setTimeout(function(){},500)}function C(b){var P=new FileReader;P.addEventListener("loadend",function(){var R=P.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var ue=R.indexOf("");(0>ue||65536<ue)&&N(x.strings.iOS8WebGLError)}if(ue=R.indexOf("<x:xmpmeta"),-1<ue&&x.ignoreGPanoXMP!==!0){var pe=R.substring(ue,R.indexOf("</x:xmpmeta>")+12),Bt=function(Qt){var ln;return 0<=pe.indexOf(Qt+'="')?(ln=pe.substring(pe.indexOf(Qt+'="')+Qt.length+2),ln=ln.substring(0,ln.indexOf('"'))):0<=pe.indexOf(Qt+">")&&(ln=pe.substring(pe.indexOf(Qt+">")+Qt.length+1),ln=ln.substring(0,ln.indexOf("<"))),ln!==s?Number(ln):null},R=Bt("GPano:FullPanoWidthPixels"),ue=Bt("GPano:CroppedAreaImageWidthPixels"),Ee=Bt("GPano:FullPanoHeightPixels"),Xe=Bt("GPano:CroppedAreaImageHeightPixels"),hn=Bt("GPano:CroppedAreaTopPixels"),Xt=Bt("GPano:PoseHeadingDegrees"),an=Bt("GPano:PosePitchDegrees"),Bt=Bt("GPano:PoseRollDegrees");R!==null&&ue!==null&&Ee!==null&&Xe!==null&&hn!==null&&(0>on.indexOf("haov")&&(x.haov=ue/R*360),0>on.indexOf("vaov")&&(x.vaov=Xe/Ee*180),0>on.indexOf("vOffset")&&(x.vOffset=-180*((hn+Xe/2)/Ee-.5)),Xt!==null&&0>on.indexOf("northOffset")&&(x.northOffset=Xt,x.compass!==!1&&(x.compass=!0)),an!==null&&Bt!==null&&(0>on.indexOf("horizonPitch")&&(x.horizonPitch=an),0>on.indexOf("horizonRoll")&&(x.horizonRoll=Bt)))}Ft.src=d.URL.createObjectURL(b)}),P.readAsBinaryString!==s?P.readAsBinaryString(b):P.readAsText(b)}function N(b){b===s&&(b=x.strings.genericWebGLError),Oe.errorMsg.innerHTML="<p>"+b+"</p>",Ve.load.style.display="none",Oe.load.box.style.display="none",Oe.errorMsg.style.display="table",Nn=!0,Ct=s,Lt.style.display="none",Je("error",b)}function z(b){var P=B(b);Tn.style.left=P.x+"px",Tn.style.top=P.y+"px",clearTimeout(z.t1),clearTimeout(z.t2),Tn.style.display="block",Tn.style.opacity=1,z.t1=setTimeout(function(){Tn.style.opacity=0},2e3),z.t2=setTimeout(function(){Tn.style.display="none"},2500),b.preventDefault()}function B(b){var P=h.getBoundingClientRect(),R={};return R.x=(b.clientX||b.pageX)-P.left,R.y=(b.clientY||b.pageY)-P.top,R}function F(b){if(b.preventDefault(),h.focus(),Ct&&x.draggable){var P=B(b);if(x.hotSpotDebug){var R=H(b);console.log("Pitch: "+R[0]+", Yaw: "+R[1]+", Center Pitch: "+x.pitch+", Center Yaw: "+x.yaw+", HFOV: "+x.hfov)}Le(),Tt(),x.roll=0,Re.hfov=0,Kt=!0,Rt=Date.now(),xt=P.x,sn=P.y,_n=x.yaw,wr=x.pitch,ke.classList.add("pnlm-grabbing"),ke.classList.remove("pnlm-grab"),Je("mousedown",b),we()}}function V(b){x.minHfov===x.hfov?wt.setHfov(Un,1e3):(b=H(b),wt.lookAt(b[0],b[1],x.minHfov,1e3))}function H(b){var pe=B(b);b=Ue.getCanvas();var Ee=b.clientWidth,Xe=b.clientHeight;b=pe.x/Ee*2-1;var Xe=(1-pe.y/Xe*2)*Xe/Ee,P=1/Math.tan(x.hfov*Math.PI/360),R=Math.sin(x.pitch*Math.PI/180),ue=Math.cos(x.pitch*Math.PI/180),pe=P*ue-Xe*R,Ee=Math.sqrt(b*b+pe*pe),Xe=180*Math.atan((Xe*ue+P*R)/Ee)/Math.PI;return b=180*Math.atan2(b/Ee,pe/Ee)/Math.PI+x.yaw,-180>b&&(b+=360),180<b&&(b-=360),[Xe,b]}function W(b){if(Kt&&Ct){Rt=Date.now();var R=Ue.getCanvas(),P=R.clientWidth,R=R.clientHeight;b=B(b);var ue=180*(Math.atan(xt/P*2-1)-Math.atan(b.x/P*2-1))/Math.PI*x.hfov/90+_n;Re.yaw=(ue-x.yaw)%360*.2,x.yaw=ue,P=360*Math.atan(Math.tan(x.hfov/360*Math.PI)*R/P)/Math.PI,P=180*(Math.atan(b.y/R*2-1)-Math.atan(sn/R*2-1))/Math.PI*P/90+wr,Re.pitch=.2*(P-x.pitch),x.pitch=P}}function le(b){Kt&&(Kt=!1,15<Date.now()-Rt&&(Re.pitch=Re.yaw=0),ke.classList.add("pnlm-grab"),ke.classList.remove("pnlm-grabbing"),Rt=Date.now(),Je("mouseup",b))}function _e(b){if(Ct&&x.draggable){Le(),Tt(),x.roll=0,Re.hfov=0;var P=B(b.targetTouches[0]);if(xt=P.x,sn=P.y,b.targetTouches.length==2){var R=B(b.targetTouches[1]);xt+=.5*(R.x-P.x),sn+=.5*(R.y-P.y),yn=Math.sqrt((P.x-R.x)*(P.x-R.x)+(P.y-R.y)*(P.y-R.y))}Kt=!0,Rt=Date.now(),_n=x.yaw,wr=x.pitch,Je("touchstart",b),we()}}function Q(b){if(x.draggable&&(b.preventDefault(),Ct&&(Rt=Date.now()),Kt&&Ct)){var P=B(b.targetTouches[0]),R=P.x,ue=P.y;b.targetTouches.length==2&&yn!=-1&&(b=B(b.targetTouches[1]),R+=.5*(b.x-P.x),ue+=.5*(b.y-P.y),P=Math.sqrt((P.x-b.x)*(P.x-b.x)+(P.y-b.y)*(P.y-b.y)),Ne(x.hfov+.1*(yn-P)),yn=P),P=x.hfov/360*x.touchPanSpeedCoeffFactor,R=(xt-R)*P+_n,Re.yaw=(R-x.yaw)%360*.2,x.yaw=R,ue=(ue-sn)*P+wr,Re.pitch=.2*(ue-x.pitch),x.pitch=ue}}function ge(){Kt=!1,150<Date.now()-Rt&&(Re.pitch=Re.yaw=0),yn=-1,Rt=Date.now(),Je("touchend",event)}function be(b){b.pointerType=="touch"&&Ct&&x.draggable&&(Kn.push(b.pointerId),Jn.push({clientX:b.clientX,clientY:b.clientY}),b.targetTouches=Jn,_e(b),b.preventDefault())}function O(b){if(b.pointerType=="touch"&&x.draggable){for(var P=0;P<Kn.length;P++)if(b.pointerId==Kn[P]){Jn[P].clientX=b.clientX,Jn[P].clientY=b.clientY,b.targetTouches=Jn,Q(b),b.preventDefault();break}}}function j(b){if(b.pointerType=="touch"){for(var P=!1,R=0;R<Kn.length;R++)b.pointerId==Kn[R]&&(Kn[R]=s),Kn[R]&&(P=!0);P||(Kn=[],Jn=[],ge()),b.preventDefault()}}function Ye(b){Ct&&(x.mouseZoom!="fullscreenonly"||Bn)&&(b.preventDefault(),Le(),Rt=Date.now(),b.wheelDeltaY?(Ne(x.hfov-.05*b.wheelDeltaY),Re.hfov=0>b.wheelDelta?1:-1):b.wheelDelta?(Ne(x.hfov-.05*b.wheelDelta),Re.hfov=0>b.wheelDelta?1:-1):b.detail&&(Ne(x.hfov+1.5*b.detail),Re.hfov=0<b.detail?1:-1),we())}function Ge(b){Le(),Rt=Date.now(),Tt(),x.roll=0;var P=b.which||b.keycode;0>x.capturedKeyNumbers.indexOf(P)||(b.preventDefault(),P==27?Bn&&Z():je(P,!0))}function ut(){for(var b=0;10>b;b++)Ie[b]=!1}function ve(b){var P=b.which||b.keycode;0>x.capturedKeyNumbers.indexOf(P)||(b.preventDefault(),je(P,!1))}function je(b,P){var R=!1;switch(b){case 109:case 189:case 17:case 173:Ie[0]!=P&&(R=!0),Ie[0]=P;break;case 107:case 187:case 16:case 61:Ie[1]!=P&&(R=!0),Ie[1]=P;break;case 38:Ie[2]!=P&&(R=!0),Ie[2]=P;break;case 87:Ie[6]!=P&&(R=!0),Ie[6]=P;break;case 40:Ie[3]!=P&&(R=!0),Ie[3]=P;break;case 83:Ie[7]!=P&&(R=!0),Ie[7]=P;break;case 37:Ie[4]!=P&&(R=!0),Ie[4]=P;break;case 65:Ie[8]!=P&&(R=!0),Ie[8]=P;break;case 39:Ie[5]!=P&&(R=!0),Ie[5]=P;break;case 68:Ie[9]!=P&&(R=!0),Ie[9]=P}R&&P&&(st=typeof performance<"u"&&performance.now()?performance.now():Date.now(),we())}function We(){if(Ct){var b=!1,P=x.pitch,R=x.yaw,ue=x.hfov,pe;pe=typeof performance<"u"&&performance.now()?performance.now():Date.now(),st===s&&(st=pe);var Ee=(pe-st)*x.hfov/1700,Ee=Math.min(Ee,1);if(Ie[0]&&x.keyboardZoom===!0&&(Ne(x.hfov+(.8*Re.hfov+.5)*Ee),b=!0),Ie[1]&&x.keyboardZoom===!0&&(Ne(x.hfov+(.8*Re.hfov-.2)*Ee),b=!0),(Ie[2]||Ie[6])&&(x.pitch+=(.8*Re.pitch+.2)*Ee,b=!0),(Ie[3]||Ie[7])&&(x.pitch+=(.8*Re.pitch-.2)*Ee,b=!0),(Ie[4]||Ie[8])&&(x.yaw+=(.8*Re.yaw-.2)*Ee,b=!0),(Ie[5]||Ie[9])&&(x.yaw+=(.8*Re.yaw+.2)*Ee,b=!0),b&&(Rt=Date.now()),x.autoRotate){if(.001<pe-st){var b=(pe-st)/1e3,Xe=(Re.yaw/b*Ee-.2*x.autoRotate)*b,Xe=(0<-x.autoRotate?1:-1)*Math.min(Math.abs(x.autoRotate*b),Math.abs(Xe));x.yaw+=Xe}x.autoRotateStopDelay&&(x.autoRotateStopDelay-=pe-st,0>=x.autoRotateStopDelay&&(x.autoRotateStopDelay=!1,Wt=x.autoRotate,x.autoRotate=0))}dt.pitch&&(se("pitch"),P=x.pitch),dt.yaw&&(se("yaw"),R=x.yaw),dt.hfov&&(se("hfov"),ue=x.hfov),0<Ee&&!x.autoRotate&&(b=1-x.friction,Ie[4]||Ie[5]||Ie[8]||Ie[9]||dt.yaw||(x.yaw+=Re.yaw*Ee*b),Ie[2]||Ie[3]||Ie[6]||Ie[7]||dt.pitch||(x.pitch+=Re.pitch*Ee*b),Ie[0]||Ie[1]||dt.hfov||Ne(x.hfov+Re.hfov*Ee*b)),st=pe,0<Ee&&(Re.yaw=.8*Re.yaw+(x.yaw-R)/Ee*.2,Re.pitch=.8*Re.pitch+(x.pitch-P)/Ee*.2,Re.hfov=.8*Re.hfov+(x.hfov-ue)/Ee*.2,P=x.autoRotate?Math.abs(x.autoRotate):5,Re.yaw=Math.min(P,Math.max(Re.yaw,-P)),Re.pitch=Math.min(P,Math.max(Re.pitch,-P)),Re.hfov=Math.min(P,Math.max(Re.hfov,-P))),Ie[0]&&Ie[1]&&(Re.hfov=0),(Ie[2]||Ie[6])&&(Ie[3]||Ie[7])&&(Re.pitch=0),(Ie[4]||Ie[8])&&(Ie[5]||Ie[9])&&(Re.yaw=0)}}function se(b){var P=dt[b],R=Math.min(1,Math.max((Date.now()-P.startTime)/1e3/(P.duration/1e3),0)),R=P.startPosition+x.animationTimingFunction(R)*(P.endPosition-P.startPosition);(P.endPosition>P.startPosition&&R>=P.endPosition||P.endPosition<P.startPosition&&R<=P.endPosition||P.endPosition===P.startPosition)&&(R=P.endPosition,Re[b]=0,delete dt[b]),x[b]=R}function ne(){J("resize")}function we(){$t||($t=!0,$e())}function $e(){if(!Ii)if(te(),xr&&clearTimeout(xr),Kt||Dt===!0)requestAnimationFrame($e);else if(Ie[0]||Ie[1]||Ie[2]||Ie[3]||Ie[4]||Ie[5]||Ie[6]||Ie[7]||Ie[8]||Ie[9]||x.autoRotate||dt.pitch||dt.yaw||dt.hfov||.01<Math.abs(Re.yaw)||.01<Math.abs(Re.pitch)||.01<Math.abs(Re.hfov))We(),0<=x.autoRotateInactivityDelay&&Wt&&Date.now()-Rt>x.autoRotateInactivityDelay&&!x.autoRotate&&(x.autoRotate=Wt,wt.lookAt(Pt,s,Un,3e3)),requestAnimationFrame($e);else if(Ue&&(Ue.isLoading()||x.dynamic===!0&&sr))requestAnimationFrame($e);else{Je("animatefinished",{pitch:wt.getPitch(),yaw:wt.getYaw(),hfov:wt.getHfov()}),$t=!1,st=s;var b=x.autoRotateInactivityDelay-(Date.now()-Rt);0<b?xr=setTimeout(function(){x.autoRotate=Wt,wt.lookAt(Pt,s,Un,3e3),we()},b):0<=x.autoRotateInactivityDelay&&Wt&&(x.autoRotate=Wt,wt.lookAt(Pt,s,Un,3e3),we())}}function te(){var b;if(Ct){var P=Ue.getCanvas();x.autoRotate!==!1&&(360<x.yaw?x.yaw-=360:-360>x.yaw&&(x.yaw+=360)),b=x.yaw;var R=0;if(x.avoidShowingBackground){var ue=x.hfov/2,pe=180*Math.atan2(Math.tan(ue/180*Math.PI),P.width/P.height)/Math.PI;x.vaov>x.haov?Math.min(Math.cos((x.pitch-ue)/180*Math.PI),Math.cos((x.pitch+ue)/180*Math.PI)):R=ue*(1-Math.min(Math.cos((x.pitch-pe)/180*Math.PI),Math.cos((x.pitch+pe)/180*Math.PI)))}var ue=x.maxYaw-x.minYaw,pe=-180,Ee=180;360>ue&&(pe=x.minYaw+x.hfov/2+R,Ee=x.maxYaw-x.hfov/2-R,ue<x.hfov&&(pe=Ee=(pe+Ee)/2),x.yaw=Math.max(pe,Math.min(Ee,x.yaw))),x.autoRotate===!1&&(360<x.yaw?x.yaw-=360:-360>x.yaw&&(x.yaw+=360)),x.autoRotate!==!1&&b!=x.yaw&&st!==s&&(x.autoRotate*=-1),b=2*Math.atan(Math.tan(x.hfov/180*Math.PI*.5)/(P.width/P.height))/Math.PI*180,P=x.minPitch+b/2,R=x.maxPitch-b/2,x.maxPitch-x.minPitch<b&&(P=R=(P+R)/2),isNaN(P)&&(P=-90),isNaN(R)&&(R=90),x.pitch=Math.max(P,Math.min(R,x.pitch)),Ue.render(x.pitch*Math.PI/180,x.yaw*Math.PI/180,x.hfov*Math.PI/180,{roll:x.roll*Math.PI/180}),x.hotSpots.forEach(oe),x.compass&&(Gn.style.transform="rotate("+(-x.yaw-x.northOffset)+"deg)",Gn.style.webkitTransform="rotate("+(-x.yaw-x.northOffset)+"deg)")}}function Pe(b,P,R,ue){this.w=b,this.x=P,this.y=R,this.z=ue}function ie(b){var P;P=b.alpha;var R=b.beta;b=b.gamma,R=[R?R*Math.PI/180/2:0,b?b*Math.PI/180/2:0,P?P*Math.PI/180/2:0],P=[Math.cos(R[0]),Math.cos(R[1]),Math.cos(R[2])],R=[Math.sin(R[0]),Math.sin(R[1]),Math.sin(R[2])],P=new Pe(P[0]*P[1]*P[2]-R[0]*R[1]*R[2],R[0]*P[1]*P[2]-P[0]*R[1]*R[2],P[0]*R[1]*P[2]+R[0]*P[1]*R[2],P[0]*P[1]*R[2]+R[0]*R[1]*P[2]),P=P.multiply(new Pe(Math.sqrt(.5),-Math.sqrt(.5),0,0)),R=d.orientation?-d.orientation*Math.PI/180/2:0,P=P.multiply(new Pe(Math.cos(R),0,-Math.sin(R),0)).toEulerAngles(),typeof Dt=="number"&&10>Dt?Dt+=1:Dt===10?(wn=P[2]/Math.PI*180+x.yaw,Dt=!0,requestAnimationFrame($e)):(x.pitch=P[0]/Math.PI*180,x.roll=-P[1]/Math.PI*180,x.yaw=-P[2]/Math.PI*180+wn)}function M(){try{var b={};x.horizonPitch!==s&&(b.horizonPitch=x.horizonPitch*Math.PI/180),x.horizonRoll!==s&&(b.horizonRoll=x.horizonRoll*Math.PI/180),x.backgroundColor!==s&&(b.backgroundColor=x.backgroundColor),Ue.init(Ft,x.type,x.dynamic,x.haov*Math.PI/180,x.vaov*Math.PI/180,x.vOffset*Math.PI/180,re,b),x.dynamic!==!0&&(Ft=s)}catch(P){if(P.type=="webgl error"||P.type=="no webgl")N();else if(P.type=="webgl size error")N(x.strings.textureSizeError.replace("%s",P.width).replace("%s",P.maxWidth));else throw N(x.strings.unknownError),P}}function re(){if(x.sceneFadeDuration&&Ue.fadeImg!==s){Ue.fadeImg.style.opacity=0;var b=Ue.fadeImg;delete Ue.fadeImg,setTimeout(function(){Lt.removeChild(b),Je("scenechangefadedone")},x.sceneFadeDuration)}Gn.style.display=x.compass?"inline":"none",I(),Oe.load.box.style.display="none",Me!==s&&(Lt.removeChild(Me),Me=s),Ct=!0,Je("load"),we()}function ze(b){b.pitch=Number(b.pitch)||0,b.yaw=Number(b.yaw)||0;var P=r.createElement("div");P.className="pnlm-hotspot-base",P.className=b.cssClass?P.className+(" "+b.cssClass):P.className+(" pnlm-hotspot pnlm-sprite pnlm-"+lt(b.type));var R=r.createElement("span");b.text&&(R.innerHTML=lt(b.text));var ue;if(b.video){ue=r.createElement("video");var pe=b.video;x.basePath&&!_(pe)&&(pe=x.basePath+pe),ue.src=yt(pe),ue.controls=!0,ue.style.width=b.width+"px",Lt.appendChild(P),R.appendChild(ue)}else if(b.image){pe=b.image,x.basePath&&!_(pe)&&(pe=x.basePath+pe),ue=r.createElement("a"),ue.href=yt(b.URL?b.URL:pe,!0),ue.target="_blank",R.appendChild(ue);var Ee=r.createElement("img");Ee.src=yt(pe),Ee.style.width=b.width+"px",Ee.style.paddingTop="5px",Lt.appendChild(P),ue.appendChild(Ee),R.style.maxWidth="initial"}else if(b.URL){if(ue=r.createElement("a"),ue.href=yt(b.URL,!0),b.attributes)for(pe in b.attributes)ue.setAttribute(pe,b.attributes[pe]);else ue.target="_blank";Lt.appendChild(ue),P.className+=" pnlm-pointer",R.className+=" pnlm-pointer",ue.appendChild(P)}else b.sceneId&&(P.onclick=P.ontouchend=function(){return P.clicked||(P.clicked=!0,rt(b.sceneId,b.targetPitch,b.targetYaw,b.targetHfov)),!1},P.className+=" pnlm-pointer",R.className+=" pnlm-pointer"),Lt.appendChild(P);b.createTooltipFunc?b.createTooltipFunc(P,b.createTooltipArgs):(b.text||b.video||b.image)&&(P.classList.add("pnlm-tooltip"),P.appendChild(R),R.style.width=R.scrollWidth-20+"px",R.style.marginLeft=-(R.scrollWidth-P.offsetWidth)/2+"px",R.style.marginTop=-R.scrollHeight-12+"px"),b.clickHandlerFunc&&(P.addEventListener("click",function(Xe){b.clickHandlerFunc(Xe,b.clickHandlerArgs)},"false"),P.className+=" pnlm-pointer",R.className+=" pnlm-pointer"),b.div=P}function I(){or||(x.hotSpots?(x.hotSpots=x.hotSpots.sort(function(b,P){return b.pitch<P.pitch}),x.hotSpots.forEach(ze)):x.hotSpots=[],or=!0,x.hotSpots.forEach(oe))}function D(){var b=x.hotSpots;if(or=!1,delete x.hotSpots,b)for(var P=0;P<b.length;P++){var R=b[P].div;if(R){for(;R.parentNode&&R.parentNode!=Lt;)R=R.parentNode;Lt.removeChild(R)}delete b[P].div}}function oe(b){var P=Math.sin(b.pitch*Math.PI/180),R=Math.cos(b.pitch*Math.PI/180),ue=Math.sin(x.pitch*Math.PI/180),pe=Math.cos(x.pitch*Math.PI/180),Ee=Math.cos((-b.yaw+x.yaw)*Math.PI/180),Xe=P*ue+R*Ee*pe;if(90>=b.yaw&&-90<b.yaw&&0>=Xe||(90<b.yaw||-90>=b.yaw)&&0>=Xe)b.div.style.visibility="hidden";else{var hn=Math.sin((-b.yaw+x.yaw)*Math.PI/180),Xt=Math.tan(x.hfov*Math.PI/360);b.div.style.visibility="visible";var Bt=Ue.getCanvas(),an=Bt.clientWidth,Bt=Bt.clientHeight,P=[-an/Xt*hn*R/Xe/2,-an/Xt*(P*pe-R*Ee*ue)/Xe/2],R=Math.sin(x.roll*Math.PI/180),ue=Math.cos(x.roll*Math.PI/180),P=[P[0]*ue-P[1]*R,P[0]*R+P[1]*ue];P[0]+=(an-b.div.offsetWidth)/2,P[1]+=(Bt-b.div.offsetHeight)/2,an="translate("+P[0]+"px, "+P[1]+"px) translateZ(9999px) rotate("+x.roll+"deg)",b.scale&&(an+=" scale("+Un/x.hfov/Xe+")"),b.div.style.webkitTransform=an,b.div.style.MozTransform=an,b.div.style.transform=an}}function he(b){x={};var P,R,ue="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");on=[];for(P in Yt)Yt.hasOwnProperty(P)&&(x[P]=Yt[P]);for(P in f.default)if(f.default.hasOwnProperty(P))if(P=="strings")for(R in f.default.strings)f.default.strings.hasOwnProperty(R)&&(x.strings[R]=lt(f.default.strings[R]));else x[P]=f.default[P],0<=ue.indexOf(P)&&on.push(P);if(b!==null&&b!==""&&f.scenes&&f.scenes[b]){var pe=f.scenes[b];for(P in pe)if(pe.hasOwnProperty(P))if(P=="strings")for(R in pe.strings)pe.strings.hasOwnProperty(R)&&(x.strings[R]=lt(pe.strings[R]));else x[P]=pe[P],0<=ue.indexOf(P)&&on.push(P);x.scene=b}for(P in f)if(f.hasOwnProperty(P))if(P=="strings")for(R in f.strings)f.strings.hasOwnProperty(R)&&(x.strings[R]=lt(f.strings[R]));else x[P]=f[P],0<=ue.indexOf(P)&&on.push(P)}function ee(b){if((b=b||!1)&&"preview"in x){var P=x.preview;x.basePath&&!_(P)&&(P=x.basePath+P),Me=r.createElement("div"),Me.className="pnlm-preview-img",Me.style.backgroundImage="url('"+yt(P).replace(/"/g,"%22").replace(/'/g,"%27")+"')",Lt.appendChild(Me)}var P=x.title,R=x.author;b&&("previewTitle"in x&&(x.title=x.previewTitle),"previewAuthor"in x&&(x.author=x.previewAuthor)),x.hasOwnProperty("title")||(Oe.title.innerHTML=""),x.hasOwnProperty("author")||(Oe.author.innerHTML=""),x.hasOwnProperty("title")||x.hasOwnProperty("author")||(Oe.container.style.display="none"),Ve.load.innerHTML="<p>"+x.strings.loadButtonLabel+"</p>",Oe.load.boxp.innerHTML=x.strings.loadingLabel;for(var ue in x)if(x.hasOwnProperty(ue))switch(ue){case"title":Oe.title.innerHTML=lt(x[ue]),Oe.container.style.display="inline";break;case"author":var pe=lt(x[ue]);x.authorURL&&(pe=r.createElement("a"),pe.href=yt(x.authorURL,!0),pe.target="_blank",pe.innerHTML=lt(x[ue]),pe=pe.outerHTML),Oe.author.innerHTML=x.strings.bylineLabel.replace("%s",pe),Oe.container.style.display="inline";break;case"fallback":pe=r.createElement("a"),pe.href=yt(x[ue],!0),pe.target="_blank",pe.textContent="Click here to view this panorama in an alternative viewer.";var Ee=r.createElement("p");Ee.textContent="Your browser does not support WebGL.",Ee.appendChild(r.createElement("br")),Ee.appendChild(pe),Oe.errorMsg.innerHTML="",Oe.errorMsg.appendChild(Ee);break;case"hfov":Ne(Number(x[ue]));break;case"autoLoad":x[ue]===!0&&Ue===s&&(Oe.load.box.style.display="inline",Ve.load.style.display="none",g());break;case"showZoomCtrl":Ve.zoom.style.display=x[ue]&&x.showControls!=!1?"block":"none";break;case"showFullscreenCtrl":Ve.fullscreen.style.display=x[ue]&&x.showControls!=!1&&("fullscreen"in r||"mozFullScreen"in r||"webkitIsFullScreen"in r||"msFullscreenElement"in r)?"block":"none";break;case"hotSpotDebug":Ar.style.display=x[ue]?"block":"none";break;case"showControls":x[ue]||(Ve.orientation.style.display="none",Ve.zoom.style.display="none",Ve.fullscreen.style.display="none");break;case"orientationOnByDefault":x[ue]&&Et()}b&&(P?x.title=P:delete x.title,R?x.author=R:delete x.author)}function Z(){if(Ct&&!Nn)if(Bn)r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitCancelFullScreen?r.webkitCancelFullScreen():r.msExitFullscreen&&r.msExitFullscreen();else try{h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.msRequestFullscreen?h.msRequestFullscreen():h.webkitRequestFullScreen()}catch{}}function J(b){r.fullscreenElement||r.fullscreen||r.mozFullScreen||r.webkitIsFullScreen||r.msFullscreenElement?(Ve.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Bn=!0):(Ve.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Bn=!1),b!=="resize"&&Je("fullscreenchange",Bn),Ue.resize(),Ne(x.hfov),we()}function Be(b){var P=x.minHfov;if(x.type=="multires"&&Ue&&!x.multiResMinHfov&&(P=Math.min(P,Ue.getCanvas().width/(x.multiRes.cubeResolution/90*.9))),P>x.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),x.hfov;var R=x.hfov,R=b<P?P:b>x.maxHfov?x.maxHfov:b;return x.avoidShowingBackground&&Ue&&(b=Ue.getCanvas(),R=Math.min(R,360*Math.atan(Math.tan((x.maxPitch-x.minPitch)/360*Math.PI)/b.height*b.width)/Math.PI)),R}function Ne(b){x.hfov=Be(b),Je("zoomchange",x.hfov)}function Le(){dt={},Wt=x.autoRotate?x.autoRotate:Wt,x.autoRotate=!1}function ct(){Nn&&(Oe.load.box.style.display="none",Oe.errorMsg.style.display="none",Nn=!1,Lt.style.display="block",Je("errorcleared")),Ct=!1,Ve.load.style.display="none",Oe.load.box.style.display="inline",g()}function rt(b,P,R,ue,pe){Ct||(pe=!0),Ct=!1,dt={};var Ee,Xe;if(x.sceneFadeDuration&&!pe&&(Ee=Ue.render(x.pitch*Math.PI/180,x.yaw*Math.PI/180,x.hfov*Math.PI/180,{returnImage:!0}),Ee!==s)){pe=new Image,pe.className="pnlm-fade-img",pe.style.transition="opacity "+x.sceneFadeDuration/1e3+"s",pe.style.width="100%",pe.style.height="100%",pe.onload=function(){rt(b,P,R,ue,!0)},pe.src=Ee,Lt.appendChild(pe),Ue.fadeImg=pe;return}pe=P==="same"?x.pitch:P,Ee=R==="same"?x.yaw:R==="sameAzimuth"?x.yaw+(x.northOffset||0)-(f.scenes[b].northOffset||0):R,Xe=ue==="same"?x.hfov:ue,D(),he(b),Re.yaw=Re.pitch=Re.hfov=0,ee(),pe!==s&&(x.pitch=pe),Ee!==s&&(x.yaw=Ee),Xe!==s&&(x.hfov=Xe),Je("scenechange",b),ct()}function Tt(){d.removeEventListener("deviceorientation",ie),Ve.orientation.classList.remove("pnlm-orientation-button-active"),Dt=!1}function Et(){typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(b){b=="granted"&&(Dt=1,d.addEventListener("deviceorientation",ie),Ve.orientation.classList.add("pnlm-orientation-button-active"))}):(Dt=1,d.addEventListener("deviceorientation",ie),Ve.orientation.classList.add("pnlm-orientation-button-active"))}function lt(b){return f.escapeHTML?String(b).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split(`
`).join("<br>"):String(b).split(`
`).join("<br>")}function yt(b,P){try{var R=decodeURIComponent(xe(b)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return R.indexOf("javascript:")===0||R.indexOf("vbscript:")===0?(console.log("Script URL removed."),"about:blank"):P&&R.indexOf("data:")===0?(console.log("Data URI removed from link."),"about:blank"):b}function xe(b){return b.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(P,R){return R=R.toLowerCase(),R==="colon"?":":R.charAt(0)==="#"?R.charAt(1)==="x"?String.fromCharCode(parseInt(R.substring(2),16)):String.fromCharCode(+R.substring(1)):""})}function Je(b){if(b in Jt)for(var P=Jt[b].length;0<P;P--)Jt[b][Jt[b].length-P].apply(null,[].slice.call(arguments,1))}var wt=this,x,Ue,Me,Kt=!1,Rt=Date.now(),xt=0,sn=0,yn=-1,_n=0,wr=0,Ie=Array(10),Bn=!1,Ct,Nn=!1,tn=!1,Ft,st,Re={yaw:0,pitch:0,hfov:0},$t=!1,Dt=!1,wn=0,xr,Wt=0,Un,Pt,dt={},Jt={},on=[],sr=!1,or=!1,Ii=!1,Yt={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:s,maxPitch:s,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:s,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(b){return .5>b?2*b*b:-1+(4-2*b)*b},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};h=typeof h=="string"?r.getElementById(h):h,h.classList.add("pnlm-container"),h.tabIndex=0;var ke=r.createElement("div");ke.className="pnlm-ui",h.appendChild(ke);var Lt=r.createElement("div");Lt.className="pnlm-render-container",h.appendChild(Lt);var nn=r.createElement("div");nn.className="pnlm-dragfix",ke.appendChild(nn);var Tn=r.createElement("span");Tn.className="pnlm-about-msg",Tn.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a> 2.5.6',ke.appendChild(Tn),nn.addEventListener("contextmenu",z);var Oe={},Ar=r.createElement("div");Ar.className="pnlm-sprite pnlm-hot-spot-debug-indicator",ke.appendChild(Ar),Oe.container=r.createElement("div"),Oe.container.className="pnlm-panorama-info",Oe.title=r.createElement("div"),Oe.title.className="pnlm-title-box",Oe.container.appendChild(Oe.title),Oe.author=r.createElement("div"),Oe.author.className="pnlm-author-box",Oe.container.appendChild(Oe.author),ke.appendChild(Oe.container),Oe.load={},Oe.load.box=r.createElement("div"),Oe.load.box.className="pnlm-load-box",Oe.load.boxp=r.createElement("p"),Oe.load.box.appendChild(Oe.load.boxp),Oe.load.lbox=r.createElement("div"),Oe.load.lbox.className="pnlm-lbox",Oe.load.lbox.innerHTML='<div class="pnlm-loading"></div>',Oe.load.box.appendChild(Oe.load.lbox),Oe.load.lbar=r.createElement("div"),Oe.load.lbar.className="pnlm-lbar",Oe.load.lbarFill=r.createElement("div"),Oe.load.lbarFill.className="pnlm-lbar-fill",Oe.load.lbar.appendChild(Oe.load.lbarFill),Oe.load.box.appendChild(Oe.load.lbar),Oe.load.msg=r.createElement("p"),Oe.load.msg.className="pnlm-lmsg",Oe.load.box.appendChild(Oe.load.msg),ke.appendChild(Oe.load.box),Oe.errorMsg=r.createElement("div"),Oe.errorMsg.className="pnlm-error-msg pnlm-info-box",ke.appendChild(Oe.errorMsg);var Ve={};Ve.container=r.createElement("div"),Ve.container.className="pnlm-controls-container",ke.appendChild(Ve.container),Ve.load=r.createElement("div"),Ve.load.className="pnlm-load-button",Ve.load.addEventListener("click",function(){ee(),ct()}),ke.appendChild(Ve.load),Ve.zoom=r.createElement("div"),Ve.zoom.className="pnlm-zoom-controls pnlm-controls",Ve.zoomIn=r.createElement("div"),Ve.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",Ve.zoomIn.addEventListener("click",function(){Ct&&(Ne(x.hfov-5),we())}),Ve.zoom.appendChild(Ve.zoomIn),Ve.zoomOut=r.createElement("div"),Ve.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",Ve.zoomOut.addEventListener("click",function(){Ct&&(Ne(x.hfov+5),we())}),Ve.zoom.appendChild(Ve.zoomOut),Ve.container.appendChild(Ve.zoom),Ve.fullscreen=r.createElement("div"),Ve.fullscreen.addEventListener("click",Z),Ve.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(r.fullscreenEnabled||r.mozFullScreenEnabled||r.webkitFullscreenEnabled||r.msFullscreenEnabled)&&Ve.container.appendChild(Ve.fullscreen),Ve.orientation=r.createElement("div"),Ve.orientation.addEventListener("click",function(b){Dt?Tt():Et()}),Ve.orientation.addEventListener("mousedown",function(b){b.stopPropagation()}),Ve.orientation.addEventListener("touchstart",function(b){b.stopPropagation()}),Ve.orientation.addEventListener("pointerdown",function(b){b.stopPropagation()}),Ve.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Fn=!1;d.DeviceOrientationEvent&&location.protocol=="https:"&&0<=navigator.userAgent.toLowerCase().indexOf("mobi")&&(Ve.container.appendChild(Ve.orientation),Fn=!0);var Gn=r.createElement("div");Gn.className="pnlm-compass pnlm-controls pnlm-control",ke.appendChild(Gn),f.firstScene?he(f.firstScene):f.default&&f.default.firstScene?he(f.default.firstScene):he(null),ee(!0);var Kn=[],Jn=[];Pe.prototype.multiply=function(b){return new Pe(this.w*b.w-this.x*b.x-this.y*b.y-this.z*b.z,this.x*b.w+this.w*b.x+this.y*b.z-this.z*b.y,this.y*b.w+this.w*b.y+this.z*b.x-this.x*b.z,this.z*b.w+this.w*b.z+this.x*b.y-this.y*b.x)},Pe.prototype.toEulerAngles=function(){var b=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),P=Math.asin(2*(this.w*this.y-this.z*this.x)),R=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[b,P,R]},this.isLoaded=function(){return!!Ct},this.getPitch=function(){return x.pitch},this.setPitch=function(b,P,R,ue){return Rt=Date.now(),1e-6>=Math.abs(b-x.pitch)?(typeof R=="function"&&R(ue),this):((P=P==s?1e3:Number(P))?(dt.pitch={startTime:Date.now(),startPosition:x.pitch,endPosition:b,duration:P},typeof R=="function"&&setTimeout(function(){R(ue)},P)):x.pitch=b,we(),this)},this.getPitchBounds=function(){return[x.minPitch,x.maxPitch]},this.setPitchBounds=function(b){return x.minPitch=Math.max(-90,Math.min(b[0],90)),x.maxPitch=Math.max(-90,Math.min(b[1],90)),this},this.getYaw=function(){return(x.yaw+540)%360-180},this.setYaw=function(b,P,R,ue){return Rt=Date.now(),1e-6>=Math.abs(b-x.yaw)?(typeof R=="function"&&R(ue),this):(P=P==s?1e3:Number(P),b=(b+180)%360-180,P?(180<x.yaw-b?b+=360:180<b-x.yaw&&(b-=360),dt.yaw={startTime:Date.now(),startPosition:x.yaw,endPosition:b,duration:P},typeof R=="function"&&setTimeout(function(){R(ue)},P)):x.yaw=b,we(),this)},this.getYawBounds=function(){return[x.minYaw,x.maxYaw]},this.setYawBounds=function(b){return x.minYaw=Math.max(-360,Math.min(b[0],360)),x.maxYaw=Math.max(-360,Math.min(b[1],360)),this},this.getHfov=function(){return x.hfov},this.setHfov=function(b,P,R,ue){return Rt=Date.now(),1e-6>=Math.abs(b-x.hfov)?(typeof R=="function"&&R(ue),this):((P=P==s?1e3:Number(P))?(dt.hfov={startTime:Date.now(),startPosition:x.hfov,endPosition:Be(b),duration:P},typeof R=="function"&&setTimeout(function(){R(ue)},P)):Ne(b),we(),this)},this.getHfovBounds=function(){return[x.minHfov,x.maxHfov]},this.setHfovBounds=function(b){return x.minHfov=Math.max(0,b[0]),x.maxHfov=Math.max(0,b[1]),this},this.lookAt=function(b,P,R,ue,pe,Ee){return ue=ue==s?1e3:Number(ue),b!==s&&1e-6<Math.abs(b-x.pitch)&&(this.setPitch(b,ue,pe,Ee),pe=s),P!==s&&1e-6<Math.abs(P-x.yaw)&&(this.setYaw(P,ue,pe,Ee),pe=s),R!==s&&1e-6<Math.abs(R-x.hfov)&&(this.setHfov(R,ue,pe,Ee),pe=s),typeof pe=="function"&&pe(Ee),this},this.getNorthOffset=function(){return x.northOffset},this.setNorthOffset=function(b){return x.northOffset=Math.min(360,Math.max(0,b)),we(),this},this.getHorizonRoll=function(){return x.horizonRoll},this.setHorizonRoll=function(b){return x.horizonRoll=Math.min(90,Math.max(-90,b)),Ue.setPose(x.horizonPitch*Math.PI/180,x.horizonRoll*Math.PI/180),we(),this},this.getHorizonPitch=function(){return x.horizonPitch},this.setHorizonPitch=function(b){return x.horizonPitch=Math.min(90,Math.max(-90,b)),Ue.setPose(x.horizonPitch*Math.PI/180,x.horizonRoll*Math.PI/180),we(),this},this.startAutoRotate=function(b,P){return b=b||Wt||1,P=P===s?Pt:P,x.autoRotate=b,wt.lookAt(P,s,Un,3e3),we(),this},this.stopAutoRotate=function(){return Wt=x.autoRotate?x.autoRotate:Wt,x.autoRotate=!1,x.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){Le(),Re={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return Ue},this.setUpdate=function(b){return sr=b===!0,Ue===s?w():we(),this},this.mouseEventToCoords=function(b){return H(b)},this.loadScene=function(b,P,R,ue){return Ct!==!1&&rt(b,P,R,ue),this},this.getScene=function(){return x.scene},this.addScene=function(b,P){return f.scenes[b]=P,this},this.removeScene=function(b){return x.scene===b||!f.scenes.hasOwnProperty(b)?!1:(delete f.scenes[b],!0)},this.toggleFullscreen=function(){return Z(),this},this.getConfig=function(){return x},this.getContainer=function(){return h},this.addHotSpot=function(b,P){if(P===s&&x.scene===s)x.hotSpots.push(b);else{var R=P!==s?P:x.scene;if(f.scenes.hasOwnProperty(R))f.scenes[R].hasOwnProperty("hotSpots")||(f.scenes[R].hotSpots=[],R==x.scene&&(x.hotSpots=f.scenes[R].hotSpots)),f.scenes[R].hotSpots.push(b);else throw"Invalid scene ID!"}return(P===s||x.scene==P)&&(ze(b),Ct&&oe(b)),this},this.removeHotSpot=function(b,P){if(P===s||x.scene==P){if(!x.hotSpots)return!1;for(var R=0;R<x.hotSpots.length;R++)if(x.hotSpots[R].hasOwnProperty("id")&&x.hotSpots[R].id===b){for(var ue=x.hotSpots[R].div;ue.parentNode!=Lt;)ue=ue.parentNode;return Lt.removeChild(ue),delete x.hotSpots[R].div,x.hotSpots.splice(R,1),!0}}else if(f.scenes.hasOwnProperty(P)){if(!f.scenes[P].hasOwnProperty("hotSpots"))return!1;for(R=0;R<f.scenes[P].hotSpots.length;R++)if(f.scenes[P].hotSpots[R].hasOwnProperty("id")&&f.scenes[P].hotSpots[R].id===b)return f.scenes[P].hotSpots.splice(R,1),!0}else return!1},this.resize=function(){Ue&&ne()},this.isLoaded=function(){return Ct},this.isOrientationSupported=function(){return Fn||!1},this.stopOrientation=function(){Tt()},this.startOrientation=function(){Fn&&Et()},this.isOrientationActive=function(){return!!Dt},this.on=function(b,P){return Jt[b]=Jt[b]||[],Jt[b].push(P),this},this.off=function(b,P){if(!b)return Jt={},this;if(P){var R=Jt[b].indexOf(P);0<=R&&Jt[b].splice(R,1),Jt[b].length==0&&delete Jt[b]}else delete Jt[b];return this},this.destroy=function(){Ii=!0,clearTimeout(xr),Ue&&Ue.destroy(),tn&&(r.removeEventListener("mousemove",W,!1),r.removeEventListener("mouseup",le,!1),h.removeEventListener("mozfullscreenchange",J,!1),h.removeEventListener("webkitfullscreenchange",J,!1),h.removeEventListener("msfullscreenchange",J,!1),h.removeEventListener("fullscreenchange",J,!1),d.removeEventListener("resize",ne,!1),d.removeEventListener("orientationchange",ne,!1),h.removeEventListener("keydown",Ge,!1),h.removeEventListener("keyup",ve,!1),h.removeEventListener("blur",ut,!1),r.removeEventListener("mouseleave",le,!1)),h.innerHTML="",h.classList.remove("pnlm-container")}}return{viewer:function(h,f){return new l(h,f)}}})(window,document);function L0({folderId:d,title:r,useSupabase:s=!0}){const[l,h]=ae.useState([]),[f,g]=ae.useState(!0),[_,w]=ae.useState(null),[C,N]=ae.useState(null),[z,B]=ae.useState(!1),[F,V]=ae.useState(!1),H=ae.useRef(null),W=ae.useRef(null);ae.useEffect(()=>{const O=new AbortController;let j=!0;return(async()=>{g(!0),w(null);try{if(s){const Ge=await fetch("/api/panoramas",{signal:O.signal});if(!j)return;if(!Ge.ok){console.error(`Failed to fetch panoramas: ${Ge.status} ${Ge.statusText}`),h([]),g(!1);return}const ut=await Ge.json();if(!j)return;const ve=(ut.panoramas||[]).map(je=>({id:String(je.id),name:je.name,url:je.image_url,thumbnailUrl:je.thumbnail_url||je.image_url,description:je.description}));h(ve)}else{if(!d){w("No folder ID provided"),g(!1);return}const Ge="AIzaSyCDcthLGNPlbMr4AFzuK5tl0CMTzsQI9EI",ut=encodeURIComponent(`'${d}' in parents and mimeType contains 'image/' and trashed=false`),ve=encodeURIComponent("files(id, name, mimeType, thumbnailLink, webViewLink, createdTime)"),je=`https://www.googleapis.com/drive/v3/files?q=${ut}&fields=${ve}&key=${Ge}&pageSize=100&orderBy=createdTime desc`,We=await fetch(je);if(!We.ok)throw new Error(`Failed to fetch images: ${We.statusText}`);const ne=((await We.json()).files||[]).map(we=>({id:we.id,name:we.name,url:`https://drive.google.com/uc?export=view&id=${we.id}`,thumbnailUrl:we.thumbnailLink||`https://drive.google.com/thumbnail?id=${we.id}&sz=w500`}));h(ne)}}catch(Ge){if(Ge instanceof Error&&Ge.name==="AbortError")return;const ut=Ge instanceof Error?Ge.message:"Unknown error occurred";console.error("Error loading images:",ut),j&&(w(ut),h([]))}finally{j&&g(!1)}})(),()=>{j=!1,O.abort()}},[d,s]),ae.useEffect(()=>{if(!(!C||!H.current)){W.current&&(W.current.destroy(),W.current=null),V(!1);try{W.current=window.pannellum.viewer(H.current,{type:"equirectangular",panorama:C.url,autoLoad:!0,showControls:!0,showFullscreenCtrl:!0,showZoomCtrl:!0,mouseZoom:!0,draggable:!0,keyboardZoom:!0,autoRotate:-2,compass:!0,northOffset:0,hfov:100,pitch:0,yaw:0,onLoad:()=>{V(!0)}});const O=j=>{j.key==="Escape"&&_e()};return window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O),W.current&&(W.current.destroy(),W.current=null)}}catch(O){console.error("Error initializing panorama viewer:",O),w("Failed to initialize panorama viewer")}}},[C]);const le=O=>{N(O)},_e=()=>{N(null),B(!1),V(!1),W.current&&(W.current.destroy(),W.current=null)},Q=async()=>{if(C)try{await navigator.clipboard.writeText(C.url),B(!0),setTimeout(()=>B(!1),2e3)}catch(O){console.error("Failed to copy:",O)}},ge=()=>{if(!C)return;const O=document.createElement("a");O.href=C.url,O.download=C.name,O.target="_blank",document.body.appendChild(O),O.click(),document.body.removeChild(O)},be=O=>O.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ");return c.jsxs("div",{className:"w-full h-full bg-white/40 backdrop-blur-md rounded-3xl shadow-2xl p-8 border border-white/50",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-3xl font-bold text-[#1a1a2e] mb-2",children:r}),c.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-sky-400 to-blue-600 rounded-full"})]}),f?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(uu,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e]/70 font-medium",children:"Loading 360 panorama images..."})]})}):_?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center max-w-md",children:[c.jsx(Ws,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e] font-semibold mb-2",children:"Error Loading Images"}),c.jsx("p",{className:"text-[#1a1a2e]/70 text-sm",children:_})]})}):l.length===0?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsxs("div",{className:"text-center",children:[c.jsx(zo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-[#1a1a2e]/70 font-medium text-lg mb-2",children:"No panorama images found"}),c.jsx("p",{className:"text-[#1a1a2e]/50 text-sm",children:"Panoramas can be added through the Admin Panel"})]})}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(O=>c.jsxs("div",{className:"group relative aspect-video rounded-2xl overflow-hidden bg-white/60 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer transform hover:-translate-y-2",onClick:()=>le(O),"data-testid":`panorama-card-${O.id}`,children:[c.jsx("img",{src:O.thumbnailUrl,alt:O.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[c.jsx("span",{className:"text-white font-semibold text-sm truncate block mb-1",children:be(O.name)}),O.description&&c.jsx("span",{className:"text-white/80 text-xs block truncate",children:O.description}),c.jsx("span",{className:"text-white/70 text-xs mt-1 block",children:"Click to view 360"})]})}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 p-3",children:c.jsx("h3",{className:"text-white font-semibold text-sm truncate text-center",children:be(O.name)})}),c.jsxs("div",{className:"absolute top-3 right-3 bg-sky-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[c.jsx(zo,{className:"w-3 h-3"}),"360"]})]},O.id))}),C&&c.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex flex-col backdrop-blur-sm",onClick:_e,"data-testid":"panorama-viewer-modal",children:[c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-10",children:[c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:O=>{O.stopPropagation(),Q()},title:"Copy image URL","data-testid":"button-copy-url",children:z?c.jsx($p,{className:"w-6 h-6 text-green-400"}):c.jsx(Hp,{className:"w-6 h-6 text-white"})}),c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:O=>{O.stopPropagation(),ge()},title:"Download image","data-testid":"button-download",children:c.jsx(lu,{className:"w-6 h-6 text-white"})}),c.jsx("button",{className:"w-12 h-12 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-md",onClick:_e,title:"Close","data-testid":"button-close-viewer",children:c.jsx(Rr,{className:"w-6 h-6 text-white"})})]}),c.jsxs("div",{className:"flex-1 p-4 relative",onClick:O=>O.stopPropagation(),children:[!F&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 bg-black/50 rounded-2xl",children:c.jsxs("div",{className:"text-center",children:[c.jsx(uu,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-white font-medium",children:"Loading panorama..."})]})}),c.jsx("div",{ref:H,className:"w-full h-full rounded-2xl overflow-hidden"})]}),c.jsxs("div",{className:"bg-black/50 backdrop-blur-md p-4 text-center",children:[c.jsx("p",{className:"text-white font-medium mb-1",children:be(C.name)}),C.description&&c.jsx("p",{className:"text-white/80 text-sm mb-2",children:C.description}),c.jsxs("p",{className:"text-white/70 text-sm flex flex-wrap justify-center gap-4",children:[c.jsx("span",{children:"Drag to look around"}),c.jsx("span",{children:"Scroll to zoom"}),c.jsx("span",{children:"Arrow keys for navigation"}),c.jsx("span",{children:"Click fullscreen for immersive view"})]})]})]})]})}var Ta={exports:{}};var O0=Ta.exports,$f;function I0(){return $f||($f=1,(function(d,r){(function(s,l){l(r)})(O0,(function(s){var l="1.9.4";function h(t){var i,a,p,y;for(a=1,p=arguments.length;a<p;a++){y=arguments[a];for(i in y)t[i]=y[i]}return t}var f=Object.create||(function(){function t(){}return function(i){return t.prototype=i,new t}})();function g(t,i){var a=Array.prototype.slice;if(t.bind)return t.bind.apply(t,a.call(arguments,1));var p=a.call(arguments,2);return function(){return t.apply(i,p.length?p.concat(a.call(arguments)):arguments)}}var _=0;function w(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function C(t,i,a){var p,y,k,A;return A=function(){p=!1,y&&(k.apply(a,y),y=!1)},k=function(){p?y=arguments:(t.apply(a,arguments),setTimeout(A,i),p=!0)},k}function N(t,i,a){var p=i[1],y=i[0],k=p-y;return t===p&&a?t:((t-y)%k+k)%k+y}function z(){return!1}function B(t,i){if(i===!1)return t;var a=Math.pow(10,i===void 0?6:i);return Math.round(t*a)/a}function F(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return F(t).split(/\s+/)}function H(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var a in i)t.options[a]=i[a];return t.options}function W(t,i,a){var p=[];for(var y in t)p.push(encodeURIComponent(a?y.toUpperCase():y)+"="+encodeURIComponent(t[y]));return(!i||i.indexOf("?")===-1?"?":"&")+p.join("&")}var le=/\{ *([\w_ -]+) *\}/g;function _e(t,i){return t.replace(le,function(a,p){var y=i[p];if(y===void 0)throw new Error("No value provided for variable "+a);return typeof y=="function"&&(y=y(i)),y})}var Q=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ge(t,i){for(var a=0;a<t.length;a++)if(t[a]===i)return a;return-1}var be="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var j=0;function Ye(t){var i=+new Date,a=Math.max(0,16-(i-j));return j=i+a,window.setTimeout(t,a)}var Ge=window.requestAnimationFrame||O("RequestAnimationFrame")||Ye,ut=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ve(t,i,a){if(a&&Ge===Ye)t.call(i);else return Ge.call(window,g(t,i))}function je(t){t&&ut.call(window,t)}var We={__proto__:null,extend:h,create:f,bind:g,get lastId(){return _},stamp:w,throttle:C,wrapNum:N,falseFn:z,formatNum:B,trim:F,splitWords:V,setOptions:H,getParamString:W,template:_e,isArray:Q,indexOf:ge,emptyImageUrl:be,requestFn:Ge,cancelFn:ut,requestAnimFrame:ve,cancelAnimFrame:je};function se(){}se.extend=function(t){var i=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=i.__super__=this.prototype,p=f(a);p.constructor=i,i.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(i[y]=this[y]);return t.statics&&h(i,t.statics),t.includes&&(ne(t.includes),h.apply(null,[p].concat(t.includes))),h(p,t),delete p.statics,delete p.includes,p.options&&(p.options=a.options?f(a.options):{},h(p.options,t.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var k=0,A=p._initHooks.length;k<A;k++)p._initHooks[k].call(this)}},i},se.include=function(t){var i=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},se.mergeOptions=function(t){return h(this.prototype.options,t),this},se.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),a=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function ne(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Q(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var we={on:function(t,i,a){if(typeof t=="object")for(var p in t)this._on(p,t[p],i);else{t=V(t);for(var y=0,k=t.length;y<k;y++)this._on(t[y],i,a)}return this},off:function(t,i,a){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var p in t)this._off(p,t[p],i);else{t=V(t);for(var y=arguments.length===1,k=0,A=t.length;k<A;k++)y?this._off(t[k]):this._off(t[k],i,a)}return this},_on:function(t,i,a,p){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,a)===!1){a===this&&(a=void 0);var y={fn:i,ctx:a};p&&(y.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(y)}},_off:function(t,i,a){var p,y,k;if(this._events&&(p=this._events[t],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,k=p.length;y<k;y++)p[y].fn=z;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var A=this._listens(t,i,a);if(A!==!1){var q=p[A];this._firingCount&&(q.fn=z,this._events[t]=p=p.slice()),p.splice(A,1)}}},fire:function(t,i,a){if(!this.listens(t,a))return this;var p=h({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var y=this._events[t];if(y){this._firingCount=this._firingCount+1||1;for(var k=0,A=y.length;k<A;k++){var q=y[k],Y=q.fn;q.once&&this.off(t,Y,q.ctx),Y.call(q.ctx||this,p)}this._firingCount--}}return a&&this._propagateEvent(p),this},listens:function(t,i,a,p){typeof t!="string"&&console.warn('"string" type argument expected');var y=i;typeof i!="function"&&(p=!!i,y=void 0,a=void 0);var k=this._events&&this._events[t];if(k&&k.length&&this._listens(t,y,a)!==!1)return!0;if(p){for(var A in this._eventParents)if(this._eventParents[A].listens(t,i,a,p))return!0}return!1},_listens:function(t,i,a){if(!this._events)return!1;var p=this._events[t]||[];if(!i)return!!p.length;a===this&&(a=void 0);for(var y=0,k=p.length;y<k;y++)if(p[y].fn===i&&p[y].ctx===a)return y;return!1},once:function(t,i,a){if(typeof t=="object")for(var p in t)this._on(p,t[p],i,!0);else{t=V(t);for(var y=0,k=t.length;y<k;y++)this._on(t[y],i,a,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[w(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[w(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};we.addEventListener=we.on,we.removeEventListener=we.clearAllEventListeners=we.off,we.addOneTimeEventListener=we.once,we.fireEvent=we.fire,we.hasEventListeners=we.listens;var $e=se.extend(we);function te(t,i,a){this.x=a?Math.round(t):t,this.y=a?Math.round(i):i}var Pe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(t){return this.clone()._add(ie(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(ie(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new te(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new te(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pe(this.x),this.y=Pe(this.y),this},distanceTo:function(t){t=ie(t);var i=t.x-this.x,a=t.y-this.y;return Math.sqrt(i*i+a*a)},equals:function(t){return t=ie(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=ie(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+B(this.x)+", "+B(this.y)+")"}};function ie(t,i,a){return t instanceof te?t:Q(t)?new te(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new te(t.x,t.y):new te(t,i,a)}function M(t,i){if(t)for(var a=i?[t,i]:t,p=0,y=a.length;p<y;p++)this.extend(a[p])}M.prototype={extend:function(t){var i,a;if(!t)return this;if(t instanceof te||typeof t[0]=="number"||"x"in t)i=a=ie(t);else if(t=re(t),i=t.min,a=t.max,!i||!a)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=a.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(t){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,a;return typeof t[0]=="number"||t instanceof te?t=ie(t):t=re(t),t instanceof M?(i=t.min,a=t.max):i=a=t,i.x>=this.min.x&&a.x<=this.max.x&&i.y>=this.min.y&&a.y<=this.max.y},intersects:function(t){t=re(t);var i=this.min,a=this.max,p=t.min,y=t.max,k=y.x>=i.x&&p.x<=a.x,A=y.y>=i.y&&p.y<=a.y;return k&&A},overlaps:function(t){t=re(t);var i=this.min,a=this.max,p=t.min,y=t.max,k=y.x>i.x&&p.x<a.x,A=y.y>i.y&&p.y<a.y;return k&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,a=this.max,p=Math.abs(i.x-a.x)*t,y=Math.abs(i.y-a.y)*t;return re(ie(i.x-p,i.y-y),ie(a.x+p,a.y+y))},equals:function(t){return t?(t=re(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function re(t,i){return!t||t instanceof M?t:new M(t,i)}function ze(t,i){if(t)for(var a=i?[t,i]:t,p=0,y=a.length;p<y;p++)this.extend(a[p])}ze.prototype={extend:function(t){var i=this._southWest,a=this._northEast,p,y;if(t instanceof D)p=t,y=t;else if(t instanceof ze){if(p=t._southWest,y=t._northEast,!p||!y)return this}else return t?this.extend(oe(t)||I(t)):this;return!i&&!a?(this._southWest=new D(p.lat,p.lng),this._northEast=new D(y.lat,y.lng)):(i.lat=Math.min(p.lat,i.lat),i.lng=Math.min(p.lng,i.lng),a.lat=Math.max(y.lat,a.lat),a.lng=Math.max(y.lng,a.lng)),this},pad:function(t){var i=this._southWest,a=this._northEast,p=Math.abs(i.lat-a.lat)*t,y=Math.abs(i.lng-a.lng)*t;return new ze(new D(i.lat-p,i.lng-y),new D(a.lat+p,a.lng+y))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof D||"lat"in t?t=oe(t):t=I(t);var i=this._southWest,a=this._northEast,p,y;return t instanceof ze?(p=t.getSouthWest(),y=t.getNorthEast()):p=y=t,p.lat>=i.lat&&y.lat<=a.lat&&p.lng>=i.lng&&y.lng<=a.lng},intersects:function(t){t=I(t);var i=this._southWest,a=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),k=y.lat>=i.lat&&p.lat<=a.lat,A=y.lng>=i.lng&&p.lng<=a.lng;return k&&A},overlaps:function(t){t=I(t);var i=this._southWest,a=this._northEast,p=t.getSouthWest(),y=t.getNorthEast(),k=y.lat>i.lat&&p.lat<a.lat,A=y.lng>i.lng&&p.lng<a.lng;return k&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=I(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function I(t,i){return t instanceof ze?t:new ze(t,i)}function D(t,i,a){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,a!==void 0&&(this.alt=+a)}D.prototype={equals:function(t,i){if(!t)return!1;t=oe(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+B(this.lat,t)+", "+B(this.lng,t)+")"},distanceTo:function(t){return ee.distance(this,oe(t))},wrap:function(){return ee.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,a=i/Math.cos(Math.PI/180*this.lat);return I([this.lat-i,this.lng-a],[this.lat+i,this.lng+a])},clone:function(){return new D(this.lat,this.lng,this.alt)}};function oe(t,i,a){return t instanceof D?t:Q(t)&&typeof t[0]!="object"?t.length===3?new D(t[0],t[1],t[2]):t.length===2?new D(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new D(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new D(t,i,a)}var he={latLngToPoint:function(t,i){var a=this.projection.project(t),p=this.scale(i);return this.transformation._transform(a,p)},pointToLatLng:function(t,i){var a=this.scale(i),p=this.transformation.untransform(t,a);return this.projection.unproject(p)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,a=this.scale(t),p=this.transformation.transform(i.min,a),y=this.transformation.transform(i.max,a);return new M(p,y)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?N(t.lng,this.wrapLng,!0):t.lng,a=this.wrapLat?N(t.lat,this.wrapLat,!0):t.lat,p=t.alt;return new D(a,i,p)},wrapLatLngBounds:function(t){var i=t.getCenter(),a=this.wrapLatLng(i),p=i.lat-a.lat,y=i.lng-a.lng;if(p===0&&y===0)return t;var k=t.getSouthWest(),A=t.getNorthEast(),q=new D(k.lat-p,k.lng-y),Y=new D(A.lat-p,A.lng-y);return new ze(q,Y)}},ee=h({},he,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var a=Math.PI/180,p=t.lat*a,y=i.lat*a,k=Math.sin((i.lat-t.lat)*a/2),A=Math.sin((i.lng-t.lng)*a/2),q=k*k+Math.cos(p)*Math.cos(y)*A*A,Y=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*Y}}),Z=6378137,J={R:Z,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,a=this.MAX_LATITUDE,p=Math.max(Math.min(a,t.lat),-a),y=Math.sin(p*i);return new te(this.R*t.lng*i,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(t){var i=180/Math.PI;return new D((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:(function(){var t=Z*Math.PI;return new M([-t,-t],[t,t])})()};function Be(t,i,a,p){if(Q(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=a,this._d=p}Be.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new te((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function Ne(t,i,a,p){return new Be(t,i,a,p)}var Le=h({},ee,{code:"EPSG:3857",projection:J,transformation:(function(){var t=.5/(Math.PI*J.R);return Ne(t,.5,-t,.5)})()}),ct=h({},Le,{code:"EPSG:900913"});function rt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Tt(t,i){var a="",p,y,k,A,q,Y;for(p=0,k=t.length;p<k;p++){for(q=t[p],y=0,A=q.length;y<A;y++)Y=q[y],a+=(y?"L":"M")+Y.x+" "+Y.y;a+=i?ke.svg?"z":"x":""}return a||"M0 0"}var Et=document.documentElement.style,lt="ActiveXObject"in window,yt=lt&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),Je=Yt("webkit"),wt=Yt("android"),x=Yt("android 2")||Yt("android 3"),Ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Me=wt&&Yt("Google")&&Ue<537&&!("AudioNode"in window),Kt=!!window.opera,Rt=!xe&&Yt("chrome"),xt=Yt("gecko")&&!Je&&!Kt&&!lt,sn=!Rt&&Yt("safari"),yn=Yt("phantom"),_n="OTransition"in Et,wr=navigator.platform.indexOf("Win")===0,Ie=lt&&"transition"in Et,Bn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!x,Ct="MozPerspective"in Et,Nn=!window.L_DISABLE_3D&&(Ie||Bn||Ct)&&!_n&&!yn,tn=typeof orientation<"u"||Yt("mobile"),Ft=tn&&Je,st=tn&&Bn,Re=!window.PointerEvent&&window.MSPointerEvent,$t=!!(window.PointerEvent||Re),Dt="ontouchstart"in window||!!window.TouchEvent,wn=!window.L_NO_TOUCH&&(Dt||$t),xr=tn&&Kt,Wt=tn&&xt,Un=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pt=(function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",z,i),window.removeEventListener("testPassiveEventSupport",z,i)}catch{}return t})(),dt=(function(){return!!document.createElement("canvas").getContext})(),Jt=!!(document.createElementNS&&rt("svg").createSVGRect),on=!!Jt&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sr=!Jt&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}})(),or=navigator.platform.indexOf("Mac")===0,Ii=navigator.platform.indexOf("Linux")===0;function Yt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ke={ie:lt,ielt9:yt,edge:xe,webkit:Je,android:wt,android23:x,androidStock:Me,opera:Kt,chrome:Rt,gecko:xt,safari:sn,phantom:yn,opera12:_n,win:wr,ie3d:Ie,webkit3d:Bn,gecko3d:Ct,any3d:Nn,mobile:tn,mobileWebkit:Ft,mobileWebkit3d:st,msPointer:Re,pointer:$t,touch:wn,touchNative:Dt,mobileOpera:xr,mobileGecko:Wt,retina:Un,passiveEvents:Pt,canvas:dt,svg:Jt,vml:sr,inlineSvg:on,mac:or,linux:Ii},Lt=ke.msPointer?"MSPointerDown":"pointerdown",nn=ke.msPointer?"MSPointerMove":"pointermove",Tn=ke.msPointer?"MSPointerUp":"pointerup",Oe=ke.msPointer?"MSPointerCancel":"pointercancel",Ar={touchstart:Lt,touchmove:nn,touchend:Tn,touchcancel:Oe},Ve={touchstart:Ee,touchmove:pe,touchend:pe,touchcancel:pe},Fn={},Gn=!1;function Kn(t,i,a){return i==="touchstart"&&ue(),Ve[i]?(a=Ve[i].bind(this,a),t.addEventListener(Ar[i],a,!1),a):(console.warn("wrong event specified:",i),z)}function Jn(t,i,a){if(!Ar[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(Ar[i],a,!1)}function b(t){Fn[t.pointerId]=t}function P(t){Fn[t.pointerId]&&(Fn[t.pointerId]=t)}function R(t){delete Fn[t.pointerId]}function ue(){Gn||(document.addEventListener(Lt,b,!0),document.addEventListener(nn,P,!0),document.addEventListener(Tn,R,!0),document.addEventListener(Oe,R,!0),Gn=!0)}function pe(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var a in Fn)i.touches.push(Fn[a]);i.changedTouches=[i],t(i)}}function Ee(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Zt(i),pe(t,i)}function Xe(t){var i={},a,p;for(p in t)a=t[p],i[p]=a&&a.bind?a.bind(t):a;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var hn=200;function Xt(t,i){t.addEventListener("dblclick",i);var a=0,p;function y(k){if(k.detail!==1){p=k.detail;return}if(!(k.pointerType==="mouse"||k.sourceCapabilities&&!k.sourceCapabilities.firesTouchEvents)){var A=mi(k);if(!(A.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!A.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var q=Date.now();q-a<=hn?(p++,p===2&&i(Xe(k))):p=1,a=q}}}return t.addEventListener("click",y),{dblclick:i,simDblclick:y}}function an(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var Bt=Xr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Jr=Xr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Yr=Jr==="webkitTransition"||Jr==="OTransition"?Jr+"End":"transitionend";function Qt(t){return typeof t=="string"?document.getElementById(t):t}function ln(t,i){var a=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!a||a==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(t,null);a=p?p[i]:null}return a==="auto"?null:a}function at(t,i,a){var p=document.createElement(t);return p.className=i||"",a&&a.appendChild(p),p}function Ot(t){var i=t.parentNode;i&&i.removeChild(t)}function hi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Mr(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function S(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function ce(t,i){if(t.classList!==void 0)return t.classList.contains(i);var a=St(t);return a.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(a)}function Ce(t,i){if(t.classList!==void 0)for(var a=V(i),p=0,y=a.length;p<y;p++)t.classList.add(a[p]);else if(!ce(t,i)){var k=St(t);$n(t,(k?k+" ":"")+i)}}function ht(t,i){t.classList!==void 0?t.classList.remove(i):$n(t,F((" "+St(t)+" ").replace(" "+i+" "," ")))}function $n(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function St(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function At(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Zs(t,i)}function Zs(t,i){var a=!1,p="DXImageTransform.Microsoft.Alpha";try{a=t.filters.item(p)}catch{if(i===1)return}i=Math.round(i*100),a?(a.Enabled=i!==100,a.Opacity=i):t.style.filter+=" progid:"+p+"(opacity="+i+")"}function Xr(t){for(var i=document.documentElement.style,a=0;a<t.length;a++)if(t[a]in i)return t[a];return!1}function Ln(t,i,a){var p=i||new te(0,0);t.style[Bt]=(ke.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(a?" scale("+a+")":"")}function It(t,i){t._leaflet_pos=i,ke.any3d?Ln(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function ar(t){return t._leaflet_pos||new te(0,0)}var gt,Qr,zr;if("onselectstart"in document)gt=function(){it(window,"selectstart",Zt)},Qr=function(){jt(window,"selectstart",Zt)};else{var Sn=Xr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);gt=function(){if(Sn){var t=document.documentElement.style;zr=t[Sn],t[Sn]="none"}},Qr=function(){Sn&&(document.documentElement.style[Sn]=zr,zr=void 0)}}function Ri(){it(window,"dragstart",Zt)}function Ai(){jt(window,"dragstart",Zt)}var fi,ps;function Mi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(lr(),fi=t,ps=t.style.outlineStyle,t.style.outlineStyle="none",it(window,"keydown",lr))}function lr(){fi&&(fi.style.outlineStyle=ps,fi=void 0,ps=void 0,jt(window,"keydown",lr))}function Dr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function br(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var ms={__proto__:null,TRANSFORM:Bt,TRANSITION:Jr,TRANSITION_END:Yr,get:Qt,getStyle:ln,create:at,remove:Ot,empty:hi,toFront:Mr,toBack:S,hasClass:ce,addClass:Ce,removeClass:ht,setClass:$n,getClass:St,setOpacity:At,testProp:Xr,setTransform:Ln,setPosition:It,getPosition:ar,get disableTextSelection(){return gt},get enableTextSelection(){return Qr},disableImageDrag:Ri,enableImageDrag:Ai,preventOutline:Mi,restoreOutline:lr,getSizedParentNode:Dr,getScale:br};function it(t,i,a,p){if(i&&typeof i=="object")for(var y in i)Ho(t,y,i[y],a);else{i=V(i);for(var k=0,A=i.length;k<A;k++)Ho(t,i[k],a,p)}return this}var fn="_leaflet_events";function jt(t,i,a,p){if(arguments.length===1)$o(t),delete t[fn];else if(i&&typeof i=="object")for(var y in i)Vs(t,y,i[y],a);else if(i=V(i),arguments.length===2)$o(t,function(q){return ge(i,q)!==-1});else for(var k=0,A=i.length;k<A;k++)Vs(t,i[k],a,p);return this}function $o(t,i){for(var a in t[fn]){var p=a.split(/\d/)[0];(!i||i(p))&&Vs(t,p,null,null,a)}}var pi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ho(t,i,a,p){var y=i+w(a)+(p?"_"+w(p):"");if(t[fn]&&t[fn][y])return this;var k=function(q){return a.call(p||t,q||window.event)},A=k;!ke.touchNative&&ke.pointer&&i.indexOf("touch")===0?k=Kn(t,i,k):ke.touch&&i==="dblclick"?k=Xt(t,k):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(pi[i]||i,k,ke.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(k=function(q){q=q||window.event,ys(t,q)&&A(q)},t.addEventListener(pi[i],k,!1)):t.addEventListener(i,A,!1):t.attachEvent("on"+i,k),t[fn]=t[fn]||{},t[fn][y]=k}function Vs(t,i,a,p,y){y=y||i+w(a)+(p?"_"+w(p):"");var k=t[fn]&&t[fn][y];if(!k)return this;!ke.touchNative&&ke.pointer&&i.indexOf("touch")===0?Jn(t,i,k):ke.touch&&i==="dblclick"?an(t,k):"removeEventListener"in t?t.removeEventListener(pi[i]||i,k,!1):t.detachEvent("on"+i,k),t[fn][y]=null}function Er(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function qs(t){return Ho(t,"wheel",Er),this}function gs(t){return it(t,"mousedown touchstart dblclick contextmenu",Er),t._leaflet_disable_click=!0,this}function Zt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ur(t){return Zt(t),Er(t),this}function mi(t){if(t.composedPath)return t.composedPath();for(var i=[],a=t.target;a;)i.push(a),a=a.parentNode;return i}function vs(t,i){if(!i)return new te(t.clientX,t.clientY);var a=br(i),p=a.boundingClientRect;return new te((t.clientX-p.left)/a.x-i.clientLeft,(t.clientY-p.top)/a.y-i.clientTop)}var fu=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ba(t){return ke.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/fu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ys(t,i){var a=i.relatedTarget;if(!a)return!0;try{for(;a&&a!==t;)a=a.parentNode}catch{return!1}return a!==t}var Gs={__proto__:null,on:it,off:jt,stopPropagation:Er,disableScrollPropagation:qs,disableClickPropagation:gs,preventDefault:Zt,stop:ur,getPropagationPath:mi,getMousePosition:vs,getWheelDelta:Ba,isExternalTarget:ys,addListener:it,removeListener:jt},Ks=$e.extend({run:function(t,i,a,p){this.stop(),this._el=t,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=ar(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ve(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,a=this._duration*1e3;i<a?this._runFrame(this._easeOut(i/a),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var a=this._startPos.add(this._offset.multiplyBy(t));i&&a._round(),It(this._el,a),this.fire("step")},_complete:function(){je(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),vt=$e.extend({options:{crs:Le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=H(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=g(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(oe(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Jr&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),it(this._proxy,Yr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,a){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(oe(t),i,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=h({animate:a.animate},a.zoom),a.pan=h({animate:a.animate,duration:a.duration},a.pan));var p=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,a.zoom):this._tryAnimatedPan(t,a.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,a.pan&&a.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,a){var p=this.getZoomScale(i),y=this.getSize().divideBy(2),k=t instanceof te?t:this.latLngToContainerPoint(t),A=k.subtract(y).multiplyBy(1-1/p),q=this.containerPointToLatLng(y.add(A));return this.setView(q,i,{zoom:a})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():I(t);var a=ie(i.paddingTopLeft||i.padding||[0,0]),p=ie(i.paddingBottomRight||i.padding||[0,0]),y=this.getBoundsZoom(t,!1,a.add(p));if(y=typeof i.maxZoom=="number"?Math.min(i.maxZoom,y):y,y===1/0)return{center:t.getCenter(),zoom:y};var k=p.subtract(a).divideBy(2),A=this.project(t.getSouthWest(),y),q=this.project(t.getNorthEast(),y),Y=this.unproject(A.add(q).divideBy(2).add(k),y);return{center:Y,zoom:y}},fitBounds:function(t,i){if(t=I(t),!t.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(t,i);return this.setView(a.center,a.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=ie(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ks,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Ce(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,a,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,a){if(a=a||{},a.animate===!1||!ke.any3d)return this.setView(t,i,a);this._stop();var p=this.project(this.getCenter()),y=this.project(t),k=this.getSize(),A=this._zoom;t=oe(t),i=i===void 0?A:i;var q=Math.max(k.x,k.y),Y=q*this.getZoomScale(A,i),de=y.distanceTo(p)||1,Te=1.42,Qe=Te*Te;function ft(kt){var Yi=kt?-1:1,Pu=kt?Y:q,ju=Y*Y-q*q+Yi*Qe*Qe*de*de,bi=2*Pu*Qe*de,Ei=ju/bi,Si=Math.sqrt(Ei*Ei+1)-Ei,uo=Si<1e-9?-18:Math.log(Si);return uo}function pn(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function un(kt){return(Math.exp(kt)+Math.exp(-kt))/2}function Zn(kt){return pn(kt)/un(kt)}var In=ft(0);function Ki(kt){return q*(un(In)/un(In+Te*kt))}function ca(kt){return q*(un(In)*Zn(In+Te*kt)-pn(In))/Qe}function ai(kt){return 1-Math.pow(1-kt,1.5)}var ol=Date.now(),xi=(ft(1)-In)/Te,Pr=a.duration?1e3*a.duration:1e3*xi*.8;function Ji(){var kt=(Date.now()-ol)/Pr,Yi=ai(kt)*xi;kt<=1?(this._flyToFrame=ve(Ji,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(ca(Yi)/de)),A),this.getScaleZoom(q/Ki(Yi),A),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),Ji.call(this),this},flyToBounds:function(t,i){var a=this._getBoundsCenterZoom(t,i);return this.flyTo(a.center,a.zoom,i)},setMaxBounds:function(t){return t=I(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var a=this.getCenter(),p=this._limitCenter(a,this._zoom,I(t));return a.equals(p)||this.panTo(p,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var a=ie(i.paddingTopLeft||i.padding||[0,0]),p=ie(i.paddingBottomRight||i.padding||[0,0]),y=this.project(this.getCenter()),k=this.project(t),A=this.getPixelBounds(),q=re([A.min.add(a),A.max.subtract(p)]),Y=q.getSize();if(!q.contains(k)){this._enforcingBounds=!0;var de=k.subtract(q.getCenter()),Te=q.extend(k).getSize().subtract(Y);y.x+=de.x<0?-Te.x:Te.x,y.y+=de.y<0?-Te.y:Te.y,this.panTo(this.unproject(y),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),p=i.divideBy(2).round(),y=a.divideBy(2).round(),k=p.subtract(y);return!k.x&&!k.y?this:(t.animate&&t.pan?this.panBy(k):(t.pan&&this._rawPanBy(k),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(g(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=g(this._handleGeolocationResponse,this),a=g(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,a,t):navigator.geolocation.getCurrentPosition(i,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,a=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,a=t.coords.longitude,p=new D(i,a),y=p.toBounds(t.coords.accuracy*2),k=this._locateOptions;if(k.setView){var A=this.getBoundsZoom(y);this.setView(p,k.maxZoom?Math.min(A,k.maxZoom):A)}var q={latlng:p,bounds:y,timestamp:t.timestamp};for(var Y in t.coords)typeof t.coords[Y]=="number"&&(q[Y]=t.coords[Y]);this.fire("locationfound",q)}},addHandler:function(t,i){if(!i)return this;var a=this[t]=new i(this);return this._handlers.push(a),this.options[t]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(je(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ot(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var a="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),p=at("div",a,i||this._mapPane);return t&&(this._panes[t]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),a=this.unproject(t.getTopRight());return new ze(i,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,a){t=I(t),a=ie(a||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),k=this.getMaxZoom(),A=t.getNorthWest(),q=t.getSouthEast(),Y=this.getSize().subtract(a),de=re(this.project(q,p),this.project(A,p)).getSize(),Te=ke.any3d?this.options.zoomSnap:1,Qe=Y.x/de.x,ft=Y.y/de.y,pn=i?Math.max(Qe,ft):Math.min(Qe,ft);return p=this.getScaleZoom(pn,p),Te&&(p=Math.round(p/(Te/100))*(Te/100),p=i?Math.ceil(p/Te)*Te:Math.floor(p/Te)*Te),Math.max(y,Math.min(k,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var a=this._getTopLeftPoint(t,i);return new M(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var a=this.options.crs;return i=i===void 0?this._zoom:i,a.scale(t)/a.scale(i)},getScaleZoom:function(t,i){var a=this.options.crs;i=i===void 0?this._zoom:i;var p=a.zoom(t*a.scale(i));return isNaN(p)?1/0:p},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(oe(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(ie(t),i)},layerPointToLatLng:function(t){var i=ie(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(oe(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(oe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(I(t))},distance:function(t,i){return this.options.crs.distance(oe(t),oe(i))},containerPointToLayerPoint:function(t){return ie(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return ie(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(ie(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(oe(t)))},mouseEventToContainerPoint:function(t){return vs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Qt(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");it(i,"scroll",this._onScroll,this),this._containerId=w(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,Ce(t,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=ln(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ce(t.markerPane,"leaflet-zoom-hide"),Ce(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,a){It(this._mapPane,new te(0,0));var p=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var y=this._zoom!==i;this._moveStart(y,a)._move(t,i)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,a,p){i===void 0&&(i=this._zoom);var y=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),p?a&&a.pinch&&this.fire("zoom",a):((y||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return je(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){It(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[w(this._container)]=this;var i=t?jt:it;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){je(this._resizeRequest),this._resizeRequest=ve(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var a=[],p,y=i==="mouseout"||i==="mouseover",k=t.target||t.srcElement,A=!1;k;){if(p=this._targets[w(k)],p&&(i==="click"||i==="preclick")&&this._draggableMoved(p)){A=!0;break}if(p&&p.listens(i,!0)&&(y&&!ys(k,t)||(a.push(p),y))||k===this._container)break;k=k.parentNode}return!a.length&&!A&&!y&&this.listens(i,!0)&&(a=[this]),a},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var a=t.type;a==="mousedown"&&Mi(i),this._fireDOMEvent(t,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,a){if(t.type==="click"){var p=h({},t);p.type="preclick",this._fireDOMEvent(p,p.type,a)}var y=this._findEventTargets(t,i);if(a){for(var k=[],A=0;A<a.length;A++)a[A].listens(i,!0)&&k.push(a[A]);y=k.concat(y)}if(y.length){i==="contextmenu"&&Zt(t);var q=y[0],Y={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var de=q.getLatLng&&(!q._radius||q._radius<=10);Y.containerPoint=de?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(t),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=de?q.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(A=0;A<y.length;A++)if(y[A].fire(i,Y,!0),Y.originalEvent._stopped||y[A].options.bubblingMouseEvents===!1&&ge(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return ar(this._mapPane)||new te(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var a=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var a=this.getSize()._divideBy(2);return this.project(t,i)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,a){var p=this._getNewPixelOrigin(a,i);return this.project(t,i)._subtract(p)},_latLngBoundsToNewLayerBounds:function(t,i,a){var p=this._getNewPixelOrigin(a,i);return re([this.project(t.getSouthWest(),i)._subtract(p),this.project(t.getNorthWest(),i)._subtract(p),this.project(t.getSouthEast(),i)._subtract(p),this.project(t.getNorthEast(),i)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,a){if(!a)return t;var p=this.project(t,i),y=this.getSize().divideBy(2),k=new M(p.subtract(y),p.add(y)),A=this._getBoundsOffset(k,a,i);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?t:this.unproject(p.add(A),i)},_limitOffset:function(t,i){if(!i)return t;var a=this.getPixelBounds(),p=new M(a.min.add(t),a.max.add(t));return t.add(this._getBoundsOffset(p,i))},_getBoundsOffset:function(t,i,a){var p=re(this.project(i.getNorthEast(),a),this.project(i.getSouthWest(),a)),y=p.min.subtract(t.min),k=p.max.subtract(t.max),A=this._rebound(y.x,-k.x),q=this._rebound(y.y,-k.y);return new te(A,q)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),a=this.getMaxZoom(),p=ke.any3d?this.options.zoomSnap:1;return p&&(t=Math.round(t/p)*p),Math.max(i,Math.min(a,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ht(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var a=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,i),!0)},_createAnimProxy:function(){var t=this._proxy=at("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var a=Bt,p=this._proxy.style[a];Ln(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),p===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Ln(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(i),y=this._getCenterOffset(t)._divideBy(1-1/p);return a.animate!==!0&&!this.getSize().contains(y)?!1:(ve(function(){this._moveStart(!0,a.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,a,p){this._mapPane&&(a&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(g(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ht(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ei(t,i){return new vt(t,i)}var Hn=se.extend({options:{position:"topright"},initialize:function(t){H(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),a=this.getPosition(),p=t._controlCorners[a];return Ce(i,"leaflet-control"),a.indexOf("bottom")!==-1?p.insertBefore(i,p.firstChild):p.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ti=function(t){return new Hn(t)};vt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",a=this._controlContainer=at("div",i+"control-container",this._container);function p(y,k){var A=i+y+" "+i+k;t[y+k]=at("div",A,a)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ot(this._controlCorners[t]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Wo=Hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,a,p){return a<p?-1:p<a?1:0}},initialize:function(t,i,a){H(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in t)this._addLayer(t[p],p);for(p in i)this._addLayer(i[p],p,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Hn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(w(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ht(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ht(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=at("div",t),a=this.options.collapsed;i.setAttribute("aria-haspopup",!0),gs(i),qs(i);var p=this._section=at("section",t+"-list");a&&(this._map.on("click",this.collapse,this),it(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=at("a",t+"-toggle",i);y.href="#",y.title="Layers",y.setAttribute("role","button"),it(y,{keydown:function(k){k.keyCode===13&&this._expandSafely()},click:function(k){Zt(k),this._expandSafely()}},this),a||this.expand(),this._baseLayersList=at("div",t+"-base",p),this._separator=at("div",t+"-separator",p),this._overlaysList=at("div",t+"-overlays",p),i.appendChild(p)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&w(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,a){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:a}),this.options.sortLayers&&this._layers.sort(g(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hi(this._baseLayersList),hi(this._overlaysList),this._layerControlInputs=[];var t,i,a,p,y=0;for(a=0;a<this._layers.length;a++)p=this._layers[a],this._addItem(p),i=i||p.overlay,t=t||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(t=t&&y>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(w(t.target)),a=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;a&&this._map.fire(a,i)},_createRadioElement:function(t,i){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=a,p.firstChild},_addItem:function(t){var i=document.createElement("label"),a=this._map.hasLayer(t.layer),p;t.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=a):p=this._createRadioElement("leaflet-base-layers_"+w(this),a),this._layerControlInputs.push(p),p.layerId=w(t.layer),it(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+t.name;var k=document.createElement("span");i.appendChild(k),k.appendChild(p),k.appendChild(y);var A=t.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,a,p=[],y=[];this._handlingClick=!0;for(var k=t.length-1;k>=0;k--)i=t[k],a=this._getLayer(i.layerId).layer,i.checked?p.push(a):i.checked||y.push(a);for(k=0;k<y.length;k++)this._map.hasLayer(y[k])&&this._map.removeLayer(y[k]);for(k=0;k<p.length;k++)this._map.hasLayer(p[k])||this._map.addLayer(p[k]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,a,p=this._map.getZoom(),y=t.length-1;y>=0;y--)i=t[y],a=this._getLayer(i.layerId).layer,i.disabled=a.options.minZoom!==void 0&&p<a.options.minZoom||a.options.maxZoom!==void 0&&p>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,it(t,"click",Zt),this.expand();var i=this;setTimeout(function(){jt(t,"click",Zt),i._preventClick=!1})}}),Js=function(t,i,a){return new Wo(t,i,a)},zi=Hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",a=at("div",i+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,i+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,i+"-out",a,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,a,p,y){var k=at("a",a,p);return k.innerHTML=t,k.href="#",k.title=i,k.setAttribute("role","button"),k.setAttribute("aria-label",i),gs(k),it(k,"click",ur),it(k,"click",y,this),it(k,"click",this._refocusOnMap,this),k},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";ht(this._zoomInButton,i),ht(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ce(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ce(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zi,this.addControl(this.zoomControl))});var Ua=function(t){return new zi(t)},On=Hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",a=at("div",i),p=this.options;return this._addScales(p,i+"-line",a),t.on(p.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),a},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,a){t.metric&&(this._mScale=at("div",i,a)),t.imperial&&(this._iScale=at("div",i,a))},_update:function(){var t=this._map,i=t.getSize().y/2,a=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(a)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),a=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,a,i/t)},_updateImperial:function(t){var i=t*3.2808399,a,p,y;i>5280?(a=i/5280,p=this._getRoundNum(a),this._updateScale(this._iScale,p+" mi",p/a)):(y=this._getRoundNum(i),this._updateScale(this._iScale,y+" ft",y/i))},_updateScale:function(t,i,a){t.style.width=Math.round(this.options.maxWidth*a)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),a=t/i;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,i*a}}),Di=function(t){return new On(t)},Zo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gi=Hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?Zo+" ":"")+"Leaflet</a>"},initialize:function(t){H(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=at("div","leaflet-control-attribution"),gs(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var a=[];this.options.prefix&&a.push(this.options.prefix),t.length&&a.push(t.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new gi().addTo(this)});var pu=function(t){return new gi(t)};Hn.Layers=Wo,Hn.Zoom=zi,Hn.Scale=On,Hn.Attribution=gi,ti.layers=Js,ti.zoom=Ua,ti.scale=Di,ti.attribution=pu;var Yn=se.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yn.addTo=function(t,i){return t.addHandler(i,this),this};var Vo={Events:we},Bi=ke.touch?"touchstart mousedown":"mousedown",cr=$e.extend({options:{clickTolerance:3},initialize:function(t,i,a,p){H(this,p),this._element=t,this._dragStartTarget=i||t,this._preventOutline=a},enable:function(){this._enabled||(it(this._dragStartTarget,Bi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cr._dragging===this&&this.finishDrag(!0),jt(this._dragStartTarget,Bi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ce(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){cr._dragging===this&&this.finishDrag();return}if(!(cr._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(cr._dragging=this,this._preventOutline&&Mi(this._element),Ri(),gt(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,a=Dr(this._element);this._startPoint=new te(i.clientX,i.clientY),this._startPos=ar(this._element),this._parentScale=br(a);var p=t.type==="mousedown";it(document,p?"mousemove":"touchmove",this._onMove,this),it(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,a=new te(i.clientX,i.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,Zt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ce(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),It(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ht(document.body,"leaflet-dragging"),this._lastTarget&&(ht(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),jt(document,"mousemove touchmove",this._onMove,this),jt(document,"mouseup touchend touchcancel",this._onUp,this),Ai(),Qr();var i=this._moved&&this._moving;this._moving=!1,cr._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function qo(t,i,a){var p,y=[1,4,2,8],k,A,q,Y,de,Te,Qe,ft;for(k=0,Te=t.length;k<Te;k++)t[k]._code=vi(t[k],i);for(q=0;q<4;q++){for(Qe=y[q],p=[],k=0,Te=t.length,A=Te-1;k<Te;A=k++)Y=t[k],de=t[A],Y._code&Qe?de._code&Qe||(ft=Xs(de,Y,Qe,i,a),ft._code=vi(ft,i),p.push(ft)):(de._code&Qe&&(ft=Xs(de,Y,Qe,i,a),ft._code=vi(ft,i),p.push(ft)),p.push(Y));t=p}return t}function Fa(t,i){var a,p,y,k,A,q,Y,de,Te;if(!t||t.length===0)throw new Error("latlngs not passed");Xn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Qe=oe([0,0]),ft=I(t),pn=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());pn<1700&&(Qe=Go(t));var un=t.length,Zn=[];for(a=0;a<un;a++){var In=oe(t[a]);Zn.push(i.project(oe([In.lat-Qe.lat,In.lng-Qe.lng])))}for(q=Y=de=0,a=0,p=un-1;a<un;p=a++)y=Zn[a],k=Zn[p],A=y.y*k.x-k.y*y.x,Y+=(y.x+k.x)*A,de+=(y.y+k.y)*A,q+=A*3;q===0?Te=Zn[0]:Te=[Y/q,de/q];var Ki=i.unproject(ie(Te));return oe([Ki.lat+Qe.lat,Ki.lng+Qe.lng])}function Go(t){for(var i=0,a=0,p=0,y=0;y<t.length;y++){var k=oe(t[y]);i+=k.lat,a+=k.lng,p++}return oe([i/p,a/p])}var mu={__proto__:null,clipPolygon:qo,polygonCenter:Fa,centroid:Go};function Ys(t,i){if(!i||!t.length)return t.slice();var a=i*i;return t=yu(t,a),t=vu(t,a),t}function $a(t,i,a){return Math.sqrt(yi(t,i,a,!0))}function gu(t,i,a){return yi(t,i,a)}function vu(t,i){var a=t.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(a);y[0]=y[a-1]=1,Ko(t,y,i,0,a-1);var k,A=[];for(k=0;k<a;k++)y[k]&&A.push(t[k]);return A}function Ko(t,i,a,p,y){var k=0,A,q,Y;for(q=p+1;q<=y-1;q++)Y=yi(t[q],t[p],t[y],!0),Y>k&&(A=q,k=Y);k>a&&(i[A]=1,Ko(t,i,a,p,A),Ko(t,i,a,A,y))}function yu(t,i){for(var a=[t[0]],p=1,y=0,k=t.length;p<k;p++)_u(t[p],t[y])>i&&(a.push(t[p]),y=p);return y<k-1&&a.push(t[k-1]),a}var Jo;function Ha(t,i,a,p,y){var k=p?Jo:vi(t,a),A=vi(i,a),q,Y,de;for(Jo=A;;){if(!(k|A))return[t,i];if(k&A)return!1;q=k||A,Y=Xs(t,i,q,a,y),de=vi(Y,a),q===k?(t=Y,k=de):(i=Y,A=de)}}function Xs(t,i,a,p,y){var k=i.x-t.x,A=i.y-t.y,q=p.min,Y=p.max,de,Te;return a&8?(de=t.x+k*(Y.y-t.y)/A,Te=Y.y):a&4?(de=t.x+k*(q.y-t.y)/A,Te=q.y):a&2?(de=Y.x,Te=t.y+A*(Y.x-t.x)/k):a&1&&(de=q.x,Te=t.y+A*(q.x-t.x)/k),new te(de,Te,y)}function vi(t,i){var a=0;return t.x<i.min.x?a|=1:t.x>i.max.x&&(a|=2),t.y<i.min.y?a|=4:t.y>i.max.y&&(a|=8),a}function _u(t,i){var a=i.x-t.x,p=i.y-t.y;return a*a+p*p}function yi(t,i,a,p){var y=i.x,k=i.y,A=a.x-y,q=a.y-k,Y=A*A+q*q,de;return Y>0&&(de=((t.x-y)*A+(t.y-k)*q)/Y,de>1?(y=a.x,k=a.y):de>0&&(y+=A*de,k+=q*de)),A=t.x-y,q=t.y-k,p?A*A+q*q:new te(y,k)}function Xn(t){return!Q(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Wa(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xn(t)}function Za(t,i){var a,p,y,k,A,q,Y,de;if(!t||t.length===0)throw new Error("latlngs not passed");Xn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Te=oe([0,0]),Qe=I(t),ft=Qe.getNorthWest().distanceTo(Qe.getSouthWest())*Qe.getNorthEast().distanceTo(Qe.getNorthWest());ft<1700&&(Te=Go(t));var pn=t.length,un=[];for(a=0;a<pn;a++){var Zn=oe(t[a]);un.push(i.project(oe([Zn.lat-Te.lat,Zn.lng-Te.lng])))}for(a=0,p=0;a<pn-1;a++)p+=un[a].distanceTo(un[a+1])/2;if(p===0)de=un[0];else for(a=0,k=0;a<pn-1;a++)if(A=un[a],q=un[a+1],y=A.distanceTo(q),k+=y,k>p){Y=(k-p)/y,de=[q.x-Y*(q.x-A.x),q.y-Y*(q.y-A.y)];break}var In=i.unproject(ie(de));return oe([In.lat+Te.lat,In.lng+Te.lng])}var Va={__proto__:null,simplify:Ys,pointToSegmentDistance:$a,closestPointOnSegment:gu,clipSegment:Ha,_getEdgeIntersection:Xs,_getBitCode:vi,_sqClosestPointOnSegment:yi,isFlat:Xn,_flat:Wa,polylineCenter:Za},Yo={project:function(t){return new te(t.lng,t.lat)},unproject:function(t){return new D(t.y,t.x)},bounds:new M([-180,-90],[180,90])},Xo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new M([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,a=this.R,p=t.lat*i,y=this.R_MINOR/a,k=Math.sqrt(1-y*y),A=k*Math.sin(p),q=Math.tan(Math.PI/4-p/2)/Math.pow((1-A)/(1+A),k/2);return p=-a*Math.log(Math.max(q,1e-10)),new te(t.lng*i*a,p)},unproject:function(t){for(var i=180/Math.PI,a=this.R,p=this.R_MINOR/a,y=Math.sqrt(1-p*p),k=Math.exp(-t.y/a),A=Math.PI/2-2*Math.atan(k),q=0,Y=.1,de;q<15&&Math.abs(Y)>1e-7;q++)de=y*Math.sin(A),de=Math.pow((1-de)/(1+de),y/2),Y=Math.PI/2-2*Math.atan(k*de)-A,A+=Y;return new D(A*i,t.x*i/a)}},wu={__proto__:null,LonLat:Yo,Mercator:Xo,SphericalMercator:J},xu=h({},ee,{code:"EPSG:3395",projection:Xo,transformation:(function(){var t=.5/(Math.PI*Xo.R);return Ne(t,.5,-t,.5)})()}),qa=h({},ee,{code:"EPSG:4326",projection:Yo,transformation:Ne(1/180,1,-1/180,.5)}),bu=h({},he,{projection:Yo,transformation:Ne(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var a=i.lng-t.lng,p=i.lat-t.lat;return Math.sqrt(a*a+p*p)},infinite:!0});he.Earth=ee,he.EPSG3395=xu,he.EPSG3857=Le,he.EPSG900913=ct,he.EPSG4326=qa,he.Simple=bu;var dr=$e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[w(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[w(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var a=this.getEvents();i.on(a,this),this.once("remove",function(){i.off(a,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=w(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=w(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return w(t)in this._layers},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},_addLayers:function(t){t=t?Q(t)?t:[t]:[];for(var i=0,a=t.length;i<a;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[w(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=w(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,a=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;t=y.minZoom===void 0?t:Math.min(t,y.minZoom),i=y.maxZoom===void 0?i:Math.max(i,y.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ni=dr.extend({initialize:function(t,i){H(this,i),this._layers={};var a,p;if(t)for(a=0,p=t.length;a<p;a++)this.addLayer(t[a])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),a,p;for(a in this._layers)p=this._layers[a],p[t]&&p[t].apply(p,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return w(t)}}),_s=function(t,i){return new ni(t,i)},Br=ni.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ni.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ni.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ze;for(var i in this._layers){var a=this._layers[i];t.extend(a.getBounds?a.getBounds():a.getLatLng())}return t}}),Ga=function(t,i){return new Br(t,i)},_i=se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){H(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var a=this._getIconUrl(t);if(!a){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(a,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(p,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(t,i){var a=this.options,p=a[i+"Size"];typeof p=="number"&&(p=[p,p]);var y=ie(p),k=ie(i==="shadow"&&a.shadowAnchor||a.iconAnchor||y&&y.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(a.className||""),k&&(t.style.marginLeft=-k.x+"px",t.style.marginTop=-k.y+"px"),y&&(t.style.width=y.x+"px",t.style.height=y.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return ke.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ka(t){return new _i(t)}var Ui=_i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Ui.imagePath!="string"&&(Ui.imagePath=this._detectIconPath()),(this.options.imagePath||Ui.imagePath)+_i.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(a,p,y){var k=p.exec(a);return k&&k[y]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=at("div","leaflet-default-icon-path",document.body),i=ln(t,"background-image")||ln(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Qo=Yn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new cr(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ce(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ht(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,a=i._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,k=ar(i._icon),A=a.getPixelBounds(),q=a.getPixelOrigin(),Y=re(A.min._subtract(q).add(y),A.max._subtract(q).subtract(y));if(!Y.contains(k)){var de=ie((Math.max(Y.max.x,k.x)-Y.max.x)/(A.max.x-Y.max.x)-(Math.min(Y.min.x,k.x)-Y.min.x)/(A.min.x-Y.min.x),(Math.max(Y.max.y,k.y)-Y.max.y)/(A.max.y-Y.max.y)-(Math.min(Y.min.y,k.y)-Y.min.y)/(A.min.y-Y.min.y)).multiplyBy(p);a.panBy(de,{animate:!1}),this._draggable._newPos._add(de),this._draggable._startPos._add(de),It(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ve(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(je(this._panRequest),this._panRequest=ve(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,a=i._shadow,p=ar(i._icon),y=i._map.layerPointToLatLng(p);a&&It(a,p),i._latlng=y,t.latlng=y,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){je(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ur=dr.extend({options:{icon:new Ui,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){H(this,i),this._latlng=oe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=oe(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=t.icon.createIcon(this._icon),p=!1;a!==this._icon&&(this._icon&&this._removeIcon(),p=!0,t.title&&(a.title=t.title),a.tagName==="IMG"&&(a.alt=t.alt||"")),Ce(a,i),t.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(a,"focus",this._panOnFocus,this);var y=t.icon.createShadow(this._shadow),k=!1;y!==this._shadow&&(this._removeShadow(),k=!0),y&&(Ce(y,i),y.alt=""),this._shadow=y,t.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&k&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(this._icon,"focus",this._panOnFocus,this),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&It(this._icon,t),this._shadow&&It(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&At(this._icon,t),this._shadow&&At(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,a=i.iconSize?ie(i.iconSize):ie(0,0),p=i.iconAnchor?ie(i.iconAnchor):ie(0,0);t.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:a.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Eu(t,i){return new Ur(t,i)}var ri=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return H(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qs=ri.extend({options:{fill:!0,radius:10},initialize:function(t,i){H(this,i),this._latlng=oe(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=oe(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return ri.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,a=this._clickTolerance(),p=[t+a,i+a];this._pxBounds=new M(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ja(t,i){return new Qs(t,i)}var eo=Qs.extend({initialize:function(t,i,a){if(typeof i=="number"&&(i=h({},a,{radius:i})),H(this,i),this._latlng=oe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ze(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ri.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,a=this._map,p=a.options.crs;if(p.distance===ee.distance){var y=Math.PI/180,k=this._mRadius/ee.R/y,A=a.project([i+k,t]),q=a.project([i-k,t]),Y=A.add(q).divideBy(2),de=a.unproject(Y).lat,Te=Math.acos((Math.cos(k*y)-Math.sin(i*y)*Math.sin(de*y))/(Math.cos(i*y)*Math.cos(de*y)))/y;(isNaN(Te)||Te===0)&&(Te=k/Math.cos(Math.PI/180*i)),this._point=Y.subtract(a.getPixelOrigin()),this._radius=isNaN(Te)?0:Y.x-a.project([de,t-Te]).x,this._radiusY=Y.y-A.y}else{var Qe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(Qe).x}this._updateBounds()}});function ws(t,i,a){return new eo(t,i,a)}var Wn=ri.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){H(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,a=null,p=yi,y,k,A=0,q=this._parts.length;A<q;A++)for(var Y=this._parts[A],de=1,Te=Y.length;de<Te;de++){y=Y[de-1],k=Y[de];var Qe=p(t,y,k,!0);Qe<i&&(i=Qe,a=p(t,y,k))}return a&&(a.distance=Math.sqrt(i)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Za(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=oe(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ze,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Xn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],a=Xn(t),p=0,y=t.length;p<y;p++)a?(i[p]=oe(t[p]),this._bounds.extend(i[p])):i[p]=this._convertLatLngs(t[p]);return i},_project:function(){var t=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new te(t,t);this._rawPxBounds&&(this._pxBounds=new M([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,a){var p=t[0]instanceof D,y=t.length,k,A;if(p){for(A=[],k=0;k<y;k++)A[k]=this._map.latLngToLayerPoint(t[k]),a.extend(A[k]);i.push(A)}else for(k=0;k<y;k++)this._projectLatlngs(t[k],i,a)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,a,p,y,k,A,q,Y;for(a=0,y=0,k=this._rings.length;a<k;a++)for(Y=this._rings[a],p=0,A=Y.length;p<A-1;p++)q=Ha(Y[p],Y[p+1],t,p,!0),q&&(i[y]=i[y]||[],i[y].push(q[0]),(q[1]!==Y[p+1]||p===A-2)&&(i[y].push(q[1]),y++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,a=0,p=t.length;a<p;a++)t[a]=Ys(t[a],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var a,p,y,k,A,q,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,k=this._parts.length;a<k;a++)for(q=this._parts[a],p=0,A=q.length,y=A-1;p<A;y=p++)if(!(!i&&p===0)&&$a(t,q[y],q[p])<=Y)return!0;return!1}});function Su(t,i){return new Wn(t,i)}Wn._flat=Wa;var Fr=Wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Wn.prototype._convertLatLngs.call(this,t),a=i.length;return a>=2&&i[0]instanceof D&&i[0].equals(i[a-1])&&i.pop(),i},_setLatLngs:function(t){Wn.prototype._setLatLngs.call(this,t),Xn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,a=new te(i,i);if(t=new M(t.min.subtract(a),t.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,k;p<y;p++)k=qo(this._rings[p],t,!0),k.length&&this._parts.push(k)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,a,p,y,k,A,q,Y,de;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(k=0,Y=this._parts.length;k<Y;k++)for(a=this._parts[k],A=0,de=a.length,q=de-1;A<de;q=A++)p=a[A],y=a[q],p.y>t.y!=y.y>t.y&&t.x<(y.x-p.x)*(t.y-p.y)/(y.y-p.y)+p.x&&(i=!i);return i||Wn.prototype._containsPoint.call(this,t,!0)}});function ku(t,i){return new Fr(t,i)}var Sr=Br.extend({initialize:function(t,i){H(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=Q(t)?t:t.features,a,p,y;if(i){for(a=0,p=i.length;a<p;a++)y=i[a],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var k=this.options;if(k.filter&&!k.filter(t))return this;var A=Fi(t,k);return A?(A.feature=so(t),A.defaultOptions=A.options,this.resetStyle(A),k.onEachFeature&&k.onEachFeature(t,A),this.addLayer(A)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Fi(t,i){var a=t.type==="Feature"?t.geometry:t,p=a?a.coordinates:null,y=[],k=i&&i.pointToLayer,A=i&&i.coordsToLatLng||no,q,Y,de,Te;if(!p&&!a)return null;switch(a.type){case"Point":return q=A(p),to(k,t,q,i);case"MultiPoint":for(de=0,Te=p.length;de<Te;de++)q=A(p[de]),y.push(to(k,t,q,i));return new Br(y);case"LineString":case"MultiLineString":return Y=xs(p,a.type==="LineString"?0:1,A),new Wn(Y,i);case"Polygon":case"MultiPolygon":return Y=xs(p,a.type==="Polygon"?1:2,A),new Fr(Y,i);case"GeometryCollection":for(de=0,Te=a.geometries.length;de<Te;de++){var Qe=Fi({geometry:a.geometries[de],type:"Feature",properties:t.properties},i);Qe&&y.push(Qe)}return new Br(y);case"FeatureCollection":for(de=0,Te=a.features.length;de<Te;de++){var ft=Fi(a.features[de],i);ft&&y.push(ft)}return new Br(y);default:throw new Error("Invalid GeoJSON object.")}}function to(t,i,a,p){return t?t(i,a):new Ur(a,p&&p.markersInheritOptions&&p)}function no(t){return new D(t[1],t[0],t[2])}function xs(t,i,a){for(var p=[],y=0,k=t.length,A;y<k;y++)A=i?xs(t[y],i-1,a):(a||no)(t[y]),p.push(A);return p}function ro(t,i){return t=oe(t),t.alt!==void 0?[B(t.lng,i),B(t.lat,i),B(t.alt,i)]:[B(t.lng,i),B(t.lat,i)]}function io(t,i,a,p){for(var y=[],k=0,A=t.length;k<A;k++)y.push(i?io(t[k],Xn(t[k])?0:i-1,a,p):ro(t[k],p));return!i&&a&&y.length>0&&y.push(y[0].slice()),y}function $i(t,i){return t.feature?h({},t.feature,{geometry:i}):so(i)}function so(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ea={toGeoJSON:function(t){return $i(this,{type:"Point",coordinates:ro(this.getLatLng(),t)})}};Ur.include(ea),eo.include(ea),Qs.include(ea),Wn.include({toGeoJSON:function(t){var i=!Xn(this._latlngs),a=io(this._latlngs,i?1:0,!1,t);return $i(this,{type:(i?"Multi":"")+"LineString",coordinates:a})}}),Fr.include({toGeoJSON:function(t){var i=!Xn(this._latlngs),a=i&&!Xn(this._latlngs[0]),p=io(this._latlngs,a?2:i?1:0,!0,t);return i||(p=[p]),$i(this,{type:(a?"Multi":"")+"Polygon",coordinates:p})}}),ni.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(a){i.push(a.toGeoJSON(t).geometry.coordinates)}),$i(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var a=i==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var k=y.toGeoJSON(t);if(a)p.push(k.geometry);else{var A=so(k);A.type==="FeatureCollection"?p.push.apply(p,A.features):p.push(A)}}}),a?$i(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Ya(t,i){return new Sr(t,i)}var hr=Ya,ii=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,a){this._url=t,this._bounds=I(i),H(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Mr(this._image),this},bringToBack:function(){return this._map&&S(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=I(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:at("img");if(Ce(i,"leaflet-image-layer"),this._zoomAnimated&&Ce(i,"leaflet-zoom-animated"),this.options.className&&Ce(i,this.options.className),i.onselectstart=z,i.onmousemove=z,i.onload=g(this.fire,this,"load"),i.onerror=g(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ln(this._image,a,i)},_reset:function(){var t=this._image,i=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=i.getSize();It(t,i.min),t.style.width=a.x+"px",t.style.height=a.y+"px"},_updateOpacity:function(){At(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Xa=function(t,i,a){return new ii(t,i,a)},ta=ii.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:at("video");if(Ce(i,"leaflet-image-layer"),this._zoomAnimated&&Ce(i,"leaflet-zoom-animated"),this.options.className&&Ce(i,this.options.className),i.onselectstart=z,i.onmousemove=z,i.onloadeddata=g(this.fire,this,"load"),t){for(var a=i.getElementsByTagName("source"),p=[],y=0;y<a.length;y++)p.push(a[y].src);this._url=a.length>0?p:[i.src];return}Q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var k=0;k<this._url.length;k++){var A=at("source");A.src=this._url[k],i.appendChild(A)}}});function Qa(t,i,a){return new ta(t,i,a)}var na=ii.extend({_initImage:function(){var t=this._image=this._url;Ce(t,"leaflet-image-layer"),this._zoomAnimated&&Ce(t,"leaflet-zoom-animated"),this.options.className&&Ce(t,this.options.className),t.onselectstart=z,t.onmousemove=z}});function ra(t,i,a){return new na(t,i,a)}var kr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof D||Q(t))?(this._latlng=oe(t),H(this,i)):(H(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&At(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&At(this._container,1),this.bringToFront(),this.options.interactive&&(Ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(At(this._container,0),this._removeTimeout=setTimeout(g(Ot,void 0,this._container),200)):Ot(this._container),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=oe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mr(this._container),this},bringToBack:function(){return this._map&&S(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof Br){i=null;var a=this._source._layers;for(var p in a)if(a[p]._map){i=a[p];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=ie(this.options.offset),a=this._getAnchor();this._zoomAnimated?It(this._container,t.add(a)):i=i.add(t).add(a);var p=this._containerBottom=-i.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(t,i,a,p){var y=i;return y instanceof t||(y=new t(p).setContent(i)),a&&y.setLatLng(a),y}}),dr.include({_initOverlay:function(t,i,a,p){var y=a;return y instanceof t?(H(y,p),y._source=this):(y=i&&!p?i:new t(p,this),y.setContent(a)),y}});var oo=kr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,kr.prototype.openOn.call(this,t)},onAdd:function(t){kr.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ri||this._source.on("preclick",Er))},onRemove:function(t){kr.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ri||this._source.off("preclick",Er))},getEvents:function(){var t=kr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=at("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=at("div",t+"-content-wrapper",i);if(this._contentNode=at("div",t+"-content",a),gs(i),qs(this._contentNode),it(i,"contextmenu",Er),this._tipContainer=at("div",t+"-tip-container",i),this._tip=at("div",t+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=at("a",t+"-close-button",i);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',it(p,"click",function(y){Zt(y),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var a=t.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),i.width=a+1+"px",i.whiteSpace="",i.height="";var p=t.offsetHeight,y=this.options.maxHeight,k="leaflet-popup-scrolled";y&&p>y?(i.height=y+"px",Ce(t,k)):ht(t,k),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),a=this._getAnchor();It(this._container,i.add(a))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(ln(this._container,"marginBottom"),10)||0,a=this._container.offsetHeight+i,p=this._containerWidth,y=new te(this._containerLeft,-a-this._containerBottom);y._add(ar(this._container));var k=t.layerPointToContainerPoint(y),A=ie(this.options.autoPanPadding),q=ie(this.options.autoPanPaddingTopLeft||A),Y=ie(this.options.autoPanPaddingBottomRight||A),de=t.getSize(),Te=0,Qe=0;k.x+p+Y.x>de.x&&(Te=k.x+p-de.x+Y.x),k.x-Te-q.x<0&&(Te=k.x-q.x),k.y+a+Y.y>de.y&&(Qe=k.y+a-de.y+Y.y),k.y-Qe-q.y<0&&(Qe=k.y-q.y),(Te||Qe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Te,Qe]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hi=function(t,i){return new oo(t,i)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(t,i,a){return this._initOverlay(oo,t,i,a).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),dr.include({bindPopup:function(t,i){return this._popup=this._initOverlay(oo,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Br||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ur(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof ri)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Wi=kr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){kr.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){kr.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=kr.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=at("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,a,p=this._map,y=this._container,k=p.latLngToContainerPoint(p.getCenter()),A=p.layerPointToContainerPoint(t),q=this.options.direction,Y=y.offsetWidth,de=y.offsetHeight,Te=ie(this.options.offset),Qe=this._getAnchor();q==="top"?(i=Y/2,a=de):q==="bottom"?(i=Y/2,a=0):q==="center"?(i=Y/2,a=de/2):q==="right"?(i=0,a=de/2):q==="left"?(i=Y,a=de/2):A.x<k.x?(q="right",i=0,a=de/2):(q="left",i=Y+(Te.x+Qe.x)*2,a=de/2),t=t.subtract(ie(i,a,!0)).add(Te).add(Qe),ht(y,"leaflet-tooltip-right"),ht(y,"leaflet-tooltip-left"),ht(y,"leaflet-tooltip-top"),ht(y,"leaflet-tooltip-bottom"),Ce(y,"leaflet-tooltip-"+q),It(y,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&At(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bs=function(t,i){return new Wi(t,i)};vt.include({openTooltip:function(t,i,a){return this._initOverlay(Wi,t,i,a).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),dr.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Wi,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[i](a),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Br||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(it(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),it(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,a,p;this._tooltip.options.sticky&&t.originalEvent&&(a=this._map.mouseEventToContainerPoint(t.originalEvent),p=this._map.containerPointToLayerPoint(a),i=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(i)}});var ao=_i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),a=this.options;if(a.html instanceof Element?(hi(i),i.appendChild(a.html)):i.innerHTML=a.html!==!1?a.html:"",a.bgPos){var p=ie(a.bgPos);i.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function el(t){return new ao(t)}_i.Default=Ui;var si=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){H(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ot(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(S(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof te?t:new te(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,a=-t(-1/0,1/0),p=0,y=i.length,k;p<y;p++)k=i[p].style.zIndex,i[p]!==this._container&&k&&(a=t(a,+k));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){At(this._container,this.options.opacity);var t=+new Date,i=!1,a=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var k=Math.min(1,(t-y.loaded)/200);At(y.el,k),k<1?i=!0:(y.active?a=!0:this._onOpaqueTile(y),y.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),i&&(je(this._fadeFrame),this._fadeFrame=ve(this._updateOpacity,this))}},_onOpaqueTile:z,_initContainer:function(){this._container||(this._container=at("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===t?(this._levels[a].el.style.zIndex=i-Math.abs(t-a),this._onUpdateLevel(a)):(Ot(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var p=this._levels[t],y=this._map;return p||(p=this._levels[t]={},p.el=at("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=i,p.origin=y.project(y.unproject(y.getPixelOrigin()),t).round(),p.zoom=t,this._setZoomTransform(p,y.getCenter(),y.getZoom()),z(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:z,_onRemoveLevel:z,_onCreateLevel:z,_pruneTiles:function(){if(this._map){var t,i,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var p=i.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ot(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,a,p){var y=Math.floor(t/2),k=Math.floor(i/2),A=a-1,q=new te(+y,+k);q.z=+A;var Y=this._tileCoordsToKey(q),de=this._tiles[Y];return de&&de.active?(de.retain=!0,!0):(de&&de.loaded&&(de.retain=!0),A>p?this._retainParent(y,k,A,p):!1)},_retainChildren:function(t,i,a,p){for(var y=2*t;y<2*t+2;y++)for(var k=2*i;k<2*i+2;k++){var A=new te(y,k);A.z=a+1;var q=this._tileCoordsToKey(A),Y=this._tiles[q];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);a+1<p&&this._retainChildren(y,k,a+1,p)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,a,p){var y=Math.round(i);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var k=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||k)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(t),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var a in this._levels)this._setZoomTransform(this._levels[a],t,i)},_setZoomTransform:function(t,i,a){var p=this._map.getZoomScale(a,t.zoom),y=t.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(i,a)).round();ke.any3d?Ln(t.el,y,p):It(t.el,y)},_resetGrid:function(){var t=this._map,i=t.options.crs,a=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],p).x/a.x),Math.ceil(t.project([0,i.wrapLng[1]],p).x/a.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],p).y/a.x),Math.ceil(t.project([i.wrapLat[1],0],p).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,a=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),p=i.getZoomScale(a,this._tileZoom),y=i.project(t,this._tileZoom).floor(),k=i.getSize().divideBy(p*2);return new M(y.subtract(k),y.add(k))},_update:function(t){var i=this._map;if(i){var a=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(t),y=this._pxBoundsToTileRange(p),k=y.getCenter(),A=[],q=this.options.keepBuffer,Y=new M(y.getBottomLeft().subtract([q,-q]),y.getTopRight().add([q,-q]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var de in this._tiles){var Te=this._tiles[de].coords;(Te.z!==this._tileZoom||!Y.contains(new te(Te.x,Te.y)))&&(this._tiles[de].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(t,a);return}for(var Qe=y.min.y;Qe<=y.max.y;Qe++)for(var ft=y.min.x;ft<=y.max.x;ft++){var pn=new te(ft,Qe);if(pn.z=this._tileZoom,!!this._isValidTile(pn)){var un=this._tiles[this._tileCoordsToKey(pn)];un?un.current=!0:A.push(pn)}}if(A.sort(function(In,Ki){return In.distanceTo(k)-Ki.distanceTo(k)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zn=document.createDocumentFragment();for(ft=0;ft<A.length;ft++)this._addTile(A[ft],Zn);this._level.el.appendChild(Zn)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var a=this._globalTileRange;if(!i.wrapLng&&(t.x<a.min.x||t.x>a.max.x)||!i.wrapLat&&(t.y<a.min.y||t.y>a.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(t);return I(this.options.bounds).overlaps(p)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,a=this.getTileSize(),p=t.scaleBy(a),y=p.add(a),k=i.unproject(p,t.z),A=i.unproject(y,t.z);return[k,A]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),a=new ze(i[0],i[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),a=new te(+i[0],+i[1]);return a.z=+i[2],a},_removeTile:function(t){var i=this._tiles[t];i&&(Ot(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ce(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=z,t.onmousemove=z,ke.ielt9&&this.options.opacity<1&&At(t,this.options.opacity)},_addTile:function(t,i){var a=this._getTilePos(t),p=this._tileCoordsToKey(t),y=this.createTile(this._wrapCoords(t),g(this._tileReady,this,t));this._initTile(y),this.createTile.length<2&&ve(g(this._tileReady,this,t,null,y)),It(y,a),this._tiles[p]={el:y,coords:t,current:!0},i.appendChild(y),this.fire("tileloadstart",{tile:y,coords:t})},_tileReady:function(t,i,a){i&&this.fire("tileerror",{error:i,tile:a,coords:t});var p=this._tileCoordsToKey(t);a=this._tiles[p],a&&(a.loaded=+new Date,this._map._fadeAnimated?(At(a.el,0),je(this._fadeFrame),this._fadeFrame=ve(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),i||(Ce(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?ve(this._pruneTiles,this):setTimeout(g(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new te(this._wrapX?N(t.x,this._wrapX):t.x,this._wrapY?N(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new M(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Zi(t){return new si(t)}var oi=si.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=H(this,i),i.detectRetina&&ke.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var a=document.createElement("img");return it(a,"load",g(this._tileOnLoad,this,i,a)),it(a,"error",g(this._tileOnError,this,i,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(t),a},getTileUrl:function(t){var i={r:ke.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=a),i["-y"]=a}return _e(this._url,h(i,this.options))},_tileOnLoad:function(t,i){ke.ielt9?setTimeout(g(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,a){var p=this.options.errorTileUrl;p&&i.getAttribute("src")!==p&&(i.src=p),t(a,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,a=this.options.zoomReverse,p=this.options.zoomOffset;return a&&(t=i-t),t+p},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=z,i.onerror=z,!i.complete)){i.src=be;var a=this._tiles[t].coords;Ot(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:a})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",be),si.prototype._removeTile.call(this,t)},_tileReady:function(t,i,a){if(!(!this._map||a&&a.getAttribute("src")===be))return si.prototype._tileReady.call(this,t,i,a)}});function ia(t,i){return new oi(t,i)}var Es=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var a=h({},this.defaultWmsParams);for(var p in i)p in this.options||(a[p]=i[p]);i=H(this,i);var y=i.detectRetina&&ke.retina?2:1,k=this.getTileSize();a.width=k.x*y,a.height=k.y*y,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),a=this._crs,p=re(a.project(i[0]),a.project(i[1])),y=p.min,k=p.max,A=(this._wmsVersion>=1.3&&this._crs===qa?[y.y,y.x,k.y,k.x]:[y.x,y.y,k.x,k.y]).join(","),q=oi.prototype.getTileUrl.call(this,t);return q+W(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(t,i){return h(this.wmsParams,t),i||this.redraw(),this}});function tl(t,i){return new Es(t,i)}oi.WMS=Es,ia.wms=tl;var Cr=dr.extend({options:{padding:.1},initialize:function(t){H(this,t),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var a=this._map.getZoomScale(i,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,i),k=p.multiplyBy(-a).add(y).subtract(this._map._getNewPixelOrigin(t,i));ke.any3d?Ln(this._container,k,a):It(this._container,k)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),a=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new M(a,a.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),sa=Cr.extend({options:{tolerance:0},getEvents:function(){var t=Cr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Cr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");it(t,"mousemove",this._onMouseMove,this),it(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),it(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){je(this._redrawRequest),delete this._ctx,Ot(this._container),jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var t=this._bounds,i=this._container,a=t.getSize(),p=ke.retina?2:1;It(i,t.min),i.width=p*a.x,i.height=p*a.y,i.style.width=a.x+"px",i.style.height=a.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Cr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[w(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,a=i.next,p=i.prev;a?a.prev=p:this._drawLast=p,p?p.next=a:this._drawFirst=a,delete t._order,delete this._layers[w(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),a=[],p,y;for(y=0;y<i.length;y++){if(p=Number(i[y]),isNaN(p))return;a.push(p)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ve(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var a=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)t=p.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var a,p,y,k,A=t._parts,q=A.length,Y=this._ctx;if(q){for(Y.beginPath(),a=0;a<q;a++){for(p=0,y=A[a].length;p<y;p++)k=A[a][p],Y[p?"lineTo":"moveTo"](k.x,k.y);i&&Y.closePath()}this._fillStroke(Y,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,a=this._ctx,p=Math.max(Math.round(t._radius),1),y=(Math.max(Math.round(t._radiusY),1)||p)/p;y!==1&&(a.save(),a.scale(1,y)),a.beginPath(),a.arc(i.x,i.y/y,p,0,Math.PI*2,!1),y!==1&&a.restore(),this._fillStroke(a,t)}},_fillStroke:function(t,i){var a=i.options;a.fill&&(t.globalAlpha=a.fillOpacity,t.fillStyle=a.fillColor||a.color,t.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=a.opacity,t.lineWidth=a.weight,t.strokeStyle=a.color,t.lineCap=a.lineCap,t.lineJoin=a.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),a,p,y=this._drawFirst;y;y=y.next)a=y.layer,a.options.interactive&&a._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(a))&&(p=a);this._fireEvent(p?[p]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(ht(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var a,p,y=this._drawFirst;y;y=y.next)a=y.layer,a.options.interactive&&a._containsPoint(i)&&(p=a);p!==this._hoveredLayer&&(this._handleMouseOut(t),p&&(Ce(this._container,"leaflet-interactive"),this._fireEvent([p],t,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(g(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,a){this._map._fireDOMEvent(i,a||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var a=i.next,p=i.prev;if(a)a.prev=p;else return;p?p.next=a:a&&(this._drawFirst=a),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var a=i.next,p=i.prev;if(p)p.next=a;else return;a?a.prev=p:p&&(this._drawLast=p),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function oa(t){return ke.canvas?new sa(t):null}var Vi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),nl={_initContainer:function(){this._container=at("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Cr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Vi("shape");Ce(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Vi("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;Ot(i),t.removeInteractiveTarget(i),delete this._layers[w(t)]},_updateStyle:function(t){var i=t._stroke,a=t._fill,p=t.options,y=t._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(i||(i=t._stroke=Vi("stroke")),y.appendChild(i),i.weight=p.weight+"px",i.color=p.color,i.opacity=p.opacity,p.dashArray?i.dashStyle=Q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=p.lineCap.replace("butt","flat"),i.joinstyle=p.lineJoin):i&&(y.removeChild(i),t._stroke=null),p.fill?(a||(a=t._fill=Vi("fill")),y.appendChild(a),a.color=p.fillColor||p.color,a.opacity=p.fillOpacity):a&&(y.removeChild(a),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),a=Math.round(t._radius),p=Math.round(t._radiusY||a);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+a+","+p+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Mr(t._container)},_bringToBack:function(t){S(t._container)}},fr=ke.vml?Vi:rt,wi=Cr.extend({_initContainer:function(){this._container=fr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Cr.prototype._update.call(this);var t=this._bounds,i=t.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,a.setAttribute("width",i.x),a.setAttribute("height",i.y)),It(a,t.min),a.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=fr("path");t.options.className&&Ce(i,t.options.className),t.options.interactive&&Ce(i,"leaflet-interactive"),this._updateStyle(t),this._layers[w(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ot(t._path),t.removeInteractiveTarget(t._path),delete this._layers[w(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,a=t.options;i&&(a.stroke?(i.setAttribute("stroke",a.color),i.setAttribute("stroke-opacity",a.opacity),i.setAttribute("stroke-width",a.weight),i.setAttribute("stroke-linecap",a.lineCap),i.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?i.setAttribute("stroke-dasharray",a.dashArray):i.removeAttribute("stroke-dasharray"),a.dashOffset?i.setAttribute("stroke-dashoffset",a.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),a.fill?(i.setAttribute("fill",a.fillColor||a.color),i.setAttribute("fill-opacity",a.fillOpacity),i.setAttribute("fill-rule",a.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Tt(t._parts,i))},_updateCircle:function(t){var i=t._point,a=Math.max(Math.round(t._radius),1),p=Math.max(Math.round(t._radiusY),1)||a,y="a"+a+","+p+" 0 1,0 ",k=t._empty()?"M0 0":"M"+(i.x-a)+","+i.y+y+a*2+",0 "+y+-a*2+",0 ";this._setPath(t,k)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Mr(t._path)},_bringToBack:function(t){S(t._path)}});ke.vml&&wi.include(nl);function lo(t){return ke.svg||ke.vml?new wi(t):null}vt.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&oa(t)||lo(t)}});var rl=Fr.extend({initialize:function(t,i){Fr.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=I(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Cu(t,i){return new rl(t,i)}wi.create=fr,wi.pointsToPath=Tt,Sr.geometryToLayer=Fi,Sr.coordsToLatLng=no,Sr.coordsToLatLngs=xs,Sr.latLngToCoords=ro,Sr.latLngsToCoords=io,Sr.getFeature=$i,Sr.asFeature=so,vt.mergeOptions({boxZoom:!0});var qi=Yn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),gt(),Ri(),this._startPoint=this._map.mouseEventToContainerPoint(t),it(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=at("div","leaflet-zoom-box",this._container),Ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new M(this._point,this._startPoint),a=i.getSize();It(this._box,i.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(Ot(this._box),ht(this._container,"leaflet-crosshair")),Qr(),Ai(),jt(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(g(this._resetState,this),0);var i=new ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",qi),vt.mergeOptions({doubleClickZoom:!0});var il=Yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,a=i.getZoom(),p=i.options.zoomDelta,y=t.originalEvent.shiftKey?a-p:a+p;i.options.doubleClickZoom==="center"?i.setZoom(y):i.setZoomAround(t.containerPoint,y)}});vt.addInitHook("addHandler","doubleClickZoom",il),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var aa=Yn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new cr(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ht(this._map._container,"leaflet-grab"),ht(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=I(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),a=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-i+a)%t+i-a,k=(p+i+a)%t-i-a,A=Math.abs(y+a)<Math.abs(k+a)?y:k;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(t){var i=this._map,a=i.options,p=!a.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),p)i.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),k=(this._lastTime-this._times[0])/1e3,A=a.easeLinearity,q=y.multiplyBy(A/k),Y=q.distanceTo([0,0]),de=Math.min(a.inertiaMaxSpeed,Y),Te=q.multiplyBy(de/Y),Qe=de/(a.inertiaDeceleration*A),ft=Te.multiplyBy(-Qe/2).round();!ft.x&&!ft.y?i.fire("moveend"):(ft=i._limitOffset(ft,i.options.maxBounds),ve(function(){i.panBy(ft,{duration:Qe,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",aa),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var la=Yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),it(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,a=t.scrollTop||i.scrollTop,p=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(p,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},a=this.keyCodes,p,y;for(p=0,y=a.left.length;p<y;p++)i[a.left[p]]=[-1*t,0];for(p=0,y=a.right.length;p<y;p++)i[a.right[p]]=[t,0];for(p=0,y=a.down.length;p<y;p++)i[a.down[p]]=[0,t];for(p=0,y=a.up.length;p<y;p++)i[a.up[p]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},a=this.keyCodes,p,y;for(p=0,y=a.zoomIn.length;p<y;p++)i[a.zoomIn[p]]=t;for(p=0,y=a.zoomOut.length;p<y;p++)i[a.zoomOut[p]]=-t},_addHooks:function(){it(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,a=this._map,p;if(i in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(p=this._panKeys[i],t.shiftKey&&(p=ie(p).multiplyBy(3)),a.options.maxBounds&&(p=a._limitOffset(ie(p),a.options.maxBounds)),a.options.worldCopyJump){var y=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(p)));a.panTo(y)}else a.panBy(p)}else if(i in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;ur(t)}}});vt.addInitHook("addHandler","keyboard",la),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Nt=Yn.extend({addHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Ba(t),a=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var p=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(g(this._performZoom,this),p),ur(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),a=this._map.options.zoomSnap||0;t._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,k=a?Math.ceil(y/a)*a:y,A=t._limitZoom(i+(this._delta>0?k:-k))-i;this._delta=0,this._startTime=null,A&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+A):t.setZoomAround(this._lastMousePos,i+A))}});vt.addInitHook("addHandler","scrollWheelZoom",Nt);var ua=600;vt.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var Ss=Yn.extend({addHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new te(i.clientX,i.clientY),this._holdTimeout=setTimeout(g(function(){this._cancel(),this._isTapValid()&&(it(document,"touchend",Zt),it(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),ua),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){jt(document,"touchend",Zt),jt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new te(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var a=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});a._simulated=!0,i.target.dispatchEvent(a)}});vt.addInitHook("addHandler","tapHold",Ss),vt.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var Gi=Yn.extend({addHooks:function(){Ce(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var a=i.mouseEventToContainerPoint(t.touches[0]),p=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(a.add(p)._divideBy(2))),this._startDist=a.distanceTo(p),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),Zt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,a=i.mouseEventToContainerPoint(t.touches[0]),p=i.mouseEventToContainerPoint(t.touches[1]),y=a.distanceTo(p)/this._startDist;if(this._zoom=i.getScaleZoom(y,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&y<1||this._zoom>i.getMaxZoom()&&y>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var k=a._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&k.x===0&&k.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(k),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),je(this._animRequest);var A=g(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ve(A,this,!0),Zt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,je(this._animRequest),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",Gi),vt.BoxZoom=qi,vt.DoubleClickZoom=il,vt.Drag=aa,vt.Keyboard=la,vt.ScrollWheelZoom=Nt,vt.TapHold=Ss,vt.TouchZoom=Gi,s.Bounds=M,s.Browser=ke,s.CRS=he,s.Canvas=sa,s.Circle=eo,s.CircleMarker=Qs,s.Class=se,s.Control=Hn,s.DivIcon=ao,s.DivOverlay=kr,s.DomEvent=Gs,s.DomUtil=ms,s.Draggable=cr,s.Evented=$e,s.FeatureGroup=Br,s.GeoJSON=Sr,s.GridLayer=si,s.Handler=Yn,s.Icon=_i,s.ImageOverlay=ii,s.LatLng=D,s.LatLngBounds=ze,s.Layer=dr,s.LayerGroup=ni,s.LineUtil=Va,s.Map=vt,s.Marker=Ur,s.Mixin=Vo,s.Path=ri,s.Point=te,s.PolyUtil=mu,s.Polygon=Fr,s.Polyline=Wn,s.Popup=oo,s.PosAnimation=Ks,s.Projection=wu,s.Rectangle=rl,s.Renderer=Cr,s.SVG=wi,s.SVGOverlay=na,s.TileLayer=oi,s.Tooltip=Wi,s.Transformation=Be,s.Util=We,s.VideoOverlay=ta,s.bind=g,s.bounds=re,s.canvas=oa,s.circle=ws,s.circleMarker=Ja,s.control=ti,s.divIcon=el,s.extend=h,s.featureGroup=Ga,s.geoJSON=Ya,s.geoJson=hr,s.gridLayer=Zi,s.icon=Ka,s.imageOverlay=Xa,s.latLng=oe,s.latLngBounds=I,s.layerGroup=_s,s.map=ei,s.marker=Eu,s.point=ie,s.polygon=ku,s.polyline=Su,s.popup=Hi,s.rectangle=Cu,s.setOptions=H,s.stamp=w,s.svg=lo,s.svgOverlay=ra,s.tileLayer=ia,s.tooltip=bs,s.transformation=Ne,s.version=l,s.videoOverlay=Qa;var sl=window.L;s.noConflict=function(){return window.L=sl,this},window.L=s}))})(Ta,Ta.exports)),Ta.exports}var R0=I0();const jn=Zf(R0);delete jn.Icon.Default.prototype._getIconUrl;jn.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const A0=`WKT,name,description
"POINT (123.446605 13.03076)",SLTCFPDI,"SCHOOL (Private) 

FID 0 
Id 1 
Evac_Code
EvacCenter SLTCFPDI 
Location 0 
Capacity 190 
Category SCHOOL
Latitude 13.03076 
Longitude 123.446605"
"POINT (123.450466 13.037648)",West Coast College,"SCHOOL (Private) 

FID 1 
Id 2 
Evac_Code 
EvacCenter West Coast College 
Location 0 
Capacity 250 
Category 0 
Latitude 13.037648 
Longitude 123.450466"
"POINT (123.459913 13.066302)",PDNHS,"SCHOOL (Public) 

FID 2 
Id 3 
Evac_Code 
EvacCenter Pio Duran National High School 
Location 0 
Capacity 200 
Category 0 
Latitude 13.066302 
Longitude 123.459913"
"POINT (123.458171 13.061385)",Binodegahan ES,"SCHOOL (Public) 

FID 3 
Id 4 
Evac_Code 
EvacCenter Binodegahan Elementary School 
Location 0 
Capacity 200 
Category 0 
Latitude 13.061385 
Longitude 123.458171"
"POINT (123.45316 13.044291)",SLA,"SCHOOL (Public) 

FID 4 
Id 5 
Evac_Code 
EvacCenter San Lorenzo Academy 
Location 0 
Capacity 200 
Category 0 
Latitude 13.044291 
Longitude 123.45316"
"POINT (123.457286 13.044403)",PECS,"SCHOOL (Public) 

FID 5 
Id 6 
Evac_Code 
EvacCenter Pio Duran East Central School 
Location 0 
Capacity 250 
Category 0 
Latitude 13.044403 
Longitude 123.457286"
"POINT (123.444675 13.047211)",BINODEGAHAN ES,"SCHOOL (Public) 

FID 6 
Id 7 
Evac_Code 
EvacCenter La Medalla Elementary School 
Location 0 
Capacity 140 
Category 0 
Latitude 13.047211 
Longitude 123.444675"
"POINT (123.514811 13.067618)",SUKIP ES,"SCHOOL (Public) 

FID 7 
Id 8 
Evac_Code 
EvacCenter Sukip Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.067618 
Longitude 123.514811"
"POINT (123.490586 13.072097)",MALAPAY HS,"SCHOOL (Public) 

FID 8 
Id 9 
Evac_Code 
EvacCenter Malapay Elementary School 
Location 0 
Capacity 125 
Category 0 
Latitude 13.072097 
Longitude 123.490586"
"POINT (123.461864 13.086464)",AGOL ES,"SCHOOL (Public)

FID 9 
Id 10 
Evac_Code 
EvacCenter Agol Elementary School 
Location 0 
Capacity 100 
Category 0 
Latitude 13.086464 
Longitude 123.461864"
"POINT (123.500205 13.026739)",MAMLAD ES,"SCHOOL (Public) 

FID 10 
Id 11 
Evac_Code 
EvacCenter Mamlad Elementary School 
Location 0 
Capacity 100 
Category 0 
Latitude 13.026739 
Longitude 123.500205"
"POINT (123.485698 13.050347)",ALABANGPURO HS,"SCHOOL (Public) 

FID 11 
Id 12 
Evac_Code 
EvacCenter Alabangpuro Elementary School 
Location 0 
Capacity 100 
Category 0 
Latitude 13.049767 
Longitude 123.485905"
"POINT (123.404682 13.047222)",BASICAO COASTAL ES,"SCHOOL (Public) 

FID 12 
Id 13 
Evac_Code 
EvacCenter Basicao Coastal Elementary School 
Location 0 
Capacity 120 
Category 0 
Latitude 13.047222 
Longitude 123.404682"
"POINT (123.511542 13.040754)",RAWIS ES,"SCHOOL (Public) 

FID 13 
Id 14 
Evac_Code 
EvacCenter Rawis Elementary School 
Location 0 
Capacity 90 
Category 0 
Latitude 13.040754 
Longitude 123.511542"
"POINT (123.496518 13.05592)",MACASITAS ES,"SCHOOL (Public) 

FID 14 
Id 15 
Evac_Code 
EvacCenter Macasitas Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.05592 
Longitude 123.496518"
"POINT (123.505548 13.083624)",Salvacion ES,"SCHOOL (Public) 

FID 15 
Id 16 
Evac_Code 
EvacCenter Salvacion Elementary School 
Location 0 
Capacity 70 
Category 0 
Latitude 13.083624 
Longitude 123.505548"
"POINT (123.491935 13.102897)",Tibabo ES,"SCHOOL (Public) 

FID 16 
Id 17 
Evac_Code 
EvacCenter Tibabo Elementary School 
Location 0 
Capacity 140 
Category 0 
Latitude 13.102897 
Longitude 123.491935"
"POINT (123.410157 13.087033)",Panganiran ES,"SCHOOL (Public) 

FID 17 
Id 18 
Evac_Code 
EvacCenter Panganiran Elementary School 
Location 0 
Capacity 150 
Category 0 
Latitude 13.087033 
Longitude 123.410157"
"POINT (123.529638 13.050375)",Buyo ES,"SCHOOL (Public) 

FID 18 
Id 19 
Evac_Code 
EvacCenter Buyo Elementary School 
Location 0 
Capacity 55 
Category 0 
Latitude 13.050375 
Longitude 123.529638"
"POINT (123.476396 13.059784)",Nablangbulod ES,"SCHOOL (Public) 

FID 19 
Id 20 
Evac_Code 
EvacCenter Nablangbulod Elementary School 
Location 0 
Capacity 55 
Category 0 
Latitude 13.059784 
Longitude 123.476396"
"POINT (123.439386 13.091788)",Flores ES,"SCHOOL (Public) 

FID 20 
Id 21 
Evac_Code 
EvacCenter Flores Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.091788 
Longitude 123.439386"
"POINT (123.487848 13.080943)",Basicao Interior ES,"SCHOOL (Public) 

FID 21 
Id 22 
Evac_Code 
EvacCenter Basicao Interior Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.080943 
Longitude 123.487848"
"POINT (123.469715 13.111998)",Palapas ES,"SCHOOL (Public) 

FID 22 
Id 23 
Evac_Code 
EvacCenter Palapas Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.111998 
Longitude 123.469715"
"POINT (123.491552 13.011444)",Lawinon ES,"SCHOOL (Public) 

FID 23 
Id 24 
Evac_Code 
EvacCenter Lawinon Elementary School 
Location 0 
Capacity 70 
Category 0 
Latitude 13.011444 
Longitude 123.491552"
"POINT (123.532203 13.077718)",Matanglad ES,"SCHOOL (Public) 

FID 24 
Id 25 
Evac_Code 
EvacCenter Matanglad Elementary School 
Location 0 
Capacity 80 
Category 0 
Latitude 13.077718 
Longitude 123.532203"
"POINT (123.480805 12.989386)",Buenavista EC,"SCHOOL (Public) 

FID 25 
Id 26 
Evac_Code 
EvacCenter Buenavista Evac. Center 
Location 0 
Capacity 120 
Category 0 
Latitude 12.989386 
Longitude 123.480805"
"POINT (123.465327 13.109744)",Sitio Papantayan,"SCHOOL (Public) 

FID 26 
Id 27 
Evac_Code 
EvacCenter Sitio Papantayan (Palapas) DDC 
Location 0 
Capacity 100 
Category 0 
Latitude 13.109744 
Longitude 123.458335"
"POINT (123.453052 13.043625)",Caratagan BH,"SCHOOL (Public) 

FID 27 
Id 28 
Evac_Code 
EvacCenter Caratagan Barangay Hall 
Location 0 
Capacity 30 
Category 0 
Latitude 13.043625 
Longitude 123.453052"
"POINT (123.455219 13.046383)",Seventh Day Adventist,"SCHOOL (Public) 

FID 28 
Id 29 
Evac_Code 
EvacCenter Seventh Day Adventist Church 
Location 0 
Capacity 70 
Category 0 
Latitude 13.046383 
Longitude 123.455219"
"POINT (123.453556 13.043838)",Mormons,"SCHOOL (Public) 

FID 29 
Id 30 
Evac_Code 
EvacCenter Mormons 
Location 0 
Capacity 60 
Category 0 
Latitude 13.043838 
Longitude 123.453556"
"POINT (123.446361 13.028495)",Our Lady Of Salvation,"SCHOOL (Public) 

FID 30 
Id 31 
Evac_Code 
EvacCenter Our Lady Of Salvation Parish Church 
Location 0 
Capacity 50 
Category 0 
Latitude 13.028495 
Longitude 123.446361"
"POINT (123.517172 13.066563)",Sukip Day Care,"SCHOOL (Public) 

FID 31 
Id 32 
Evac_Code 
EvacCenter Sukip Day Care Center 
Location 0 
Capacity 20 
Category 0 
Latitude 13.066563 
Longitude 123.517172"
"POINT (123.517455 13.066594)",Sukip BH,"SCHOOL (Public) 

FID 32 
Id 33 
Evac_Code 
EvacCenter Sukip Barangay Hall 
Location 0 
Capacity 45 
Category 0 
Latitude 13.066594 
Longitude 123.517455"
"POINT (123.404362 13.046048)",Basicao Coastal Day Care,"SCHOOL (Public) 

FID 33 
Id 34 
Evac_Code 
EvacCenter Basicao Coastal Day Care Center 
Location 0 
Capacity 20 
Category 0 
Latitude 13.046048 
Longitude 123.404362"
"POINT (123.495147 13.056612)",Macasitas Day care,"SCHOOL (Public) 

FID 34 
Id 35 
Evac_Code 
EvacCenter Macasitas Day care 
Location 0 
Capacity 35 
Category 0 
Latitude 13.056612 
Longitude 123.495147"
"POINT (123.456376 13.044222)",Municipal Multi-Purpose Hall,"SCHOOL (Public) 

FID 35 
Id 36 
Evac_Code 
EvacCenter Municipal Multi-Purpose Hall 
Location 0 
Capacity 120 
Category 0 
Latitude 13.044222 
Longitude 123.456376"
"POINT (123.44409 13.047189)",La Medalla Day Care,"SCHOOL (Public) 

FID 36 
Id 37 
Evac_Code 
EvacCenter La Medalla Day Care 
Location 0 
Capacity 36 
Category 0 
Latitude 13.047189 
Longitude 123.44409"`,M0=d=>{const r=d.split(`
`),s=r[0].split(",").map(h=>h.trim().replace(/"/g,"")),l=[];for(let h=1;h<r.length;h++){if(r[h].trim()==="")continue;const f=r[h].split(","),g={};for(let _=0;_<s.length;_++){let w=f[_]?.trim()||"";w.startsWith('"')&&w.endsWith('"')&&(w=w.slice(1,-1)),g[s[_]]=w}l.push(g)}return l},z0=d=>{const r=d.match(/POINT\s*\(\s*([0-9.]+)\s+([0-9.]+)\s*\)/i);return r?[parseFloat(r[1]),parseFloat(r[2])]:null};function D0(){const d=ae.useRef(null),r=ae.useRef(null),[s,l]=ae.useState([]),[h,f]=ae.useState(!1),[g,_]=ae.useState(null),[w,C]=ae.useState(null),N=ae.useRef(null),[z,B]=ae.useState(!1),[F,V]=ae.useState([13.037063508747957,123.45890718599736]),H=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#84cc16","#06b6d4","#7c3aed","#f43f5e"];ae.useEffect(()=>{const ve=()=>{B(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",ve),()=>{document.removeEventListener("fullscreenchange",ve)}},[]),ae.useEffect(()=>{if(!d.current||r.current)return;const ve=jn.map(d.current,{center:F,zoom:14,zoomControl:!1,attributionControl:!1});jn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(ve),jn.control.attribution({position:"bottomright"}).addTo(ve),jn.control.zoom({position:"topright"}).addTo(ve),jn.marker(F).addTo(ve).bindPopup("Primary Location<br>Lat: 13.03706...<br>Lng: 123.45890...").openPopup(),jn.circle(F,{color:"#3b82f6",fillColor:"#3b82f6",fillOpacity:.1,radius:1e3}).addTo(ve),r.current=ve;const je=()=>{if(r.current){const We=r.current.getCenter();V([We.lat,We.lng])}};return ve.on("moveend",je),ve.on("zoomend",je),()=>{r.current&&(r.current.off("moveend",je),r.current.off("zoomend",je),r.current.remove(),r.current=null)}},[F]),ae.useEffect(()=>{W()},[]),ae.useEffect(()=>{if(w){const ve=setTimeout(()=>C(null),5e3);return()=>clearTimeout(ve)}},[w]);const W=()=>{try{const ve=M0(A0),je=jn.layerGroup();ve.forEach((ne,we)=>{const $e=z0(ne.WKT);if($e){const[te,Pe]=$e,ie=jn.marker([Pe,te]),M=`
            <div class="font-semibold text-blue-800">${ne.name}</div>
            <div class="text-sm mt-1">${ne.description.replace(/\n/g,"<br>")}</div>
          `;ie.bindPopup(M),je.addLayer(ie)}});const We={id:`csv-${Date.now()}`,name:"Evacuation Centers",layer:je,visible:!0,color:"#3b82f6",fileName:"evacuation_centers.csv",type:"csv"};l([We]),je.addTo(r.current);const se=new jn.FeatureGroup(Array.from(je.getLayers()));r.current.fitBounds(se.getBounds().pad(.1)),C("CSV data loaded successfully")}catch(ve){console.error("Error loading CSV data:",ve),_("Failed to load CSV data")}},le=ae.useCallback(async ve=>{const je=ve.target.files;if(!je||je.length===0||!r.current)return;f(!0),_(null),C(null);const We=[];try{for(let se=0;se<je.length;se++){const ne=je[se];if(!ne.name.toLowerCase().endsWith(".kml")){_(`${ne.name} is not a KML file`);continue}const we=new FileReader;await new Promise(($e,te)=>{we.onload=Pe=>{try{const ie=Pe.target?.result,M=new Blob([ie],{type:"application/vnd.google-earth.kml+xml"}),re=URL.createObjectURL(M),ze=jn.layerGroup(),I=[jn.marker([13.037063508747957,123.45890718599736],{properties:{name:"Primary Location",description:"Main operational site"}}),jn.marker([13.1391,123.7437],{properties:{name:"Secondary Site",description:"Backup facility"}})],D=jn.polyline([[13.037063508747957,123.45890718599736],[13.1391,123.7437]],{color:"#3b82f6",weight:3,properties:{name:"Route Alpha",description:"Main transportation route"}}),oe=jn.polygon([[13.03,123.45],[13.04,123.45],[13.04,123.46],[13.03,123.46]],{color:"#ef4444",weight:2,fillColor:"#ef4444",fillOpacity:.3,properties:{name:"Exclusion Zone",description:"Restricted area"}});I.forEach(ee=>{ee.options.properties&&ee.bindPopup(`<b>${ee.options.properties.name}</b><br>${ee.options.properties.description}`),ze.addLayer(ee)}),ze.addLayer(D),ze.addLayer(oe);const he={id:`${Date.now()}-${se}-${Math.random().toString(36).substr(2,9)}`,name:ne.name.replace(".kml",""),layer:ze,visible:!0,color:H[We.length%H.length],fileName:ne.name,type:"kml"};We.push(he),ze.addTo(r.current),$e()}catch(ie){console.error("Error processing KML:",ie),_(`Error processing ${ne.name}`),te(ie)}},we.onerror=()=>{_(`Failed to read ${ne.name}`),te(new Error(`Failed to read ${ne.name}`))},we.readAsText(ne)})}We.length>0&&(l(se=>[...se,...We]),C(`Successfully loaded ${We.length} file${We.length>1?"s":""}`))}catch(se){console.error("Upload error:",se)}finally{f(!1),N.current&&(N.current.value="")}},[]),_e=ae.useCallback(ve=>{l(je=>je.map(We=>{if(We.id===ve){const se=!We.visible;return se?r.current?.addLayer(We.layer):r.current?.removeLayer(We.layer),{...We,visible:se}}return We}))},[]),Q=ae.useCallback(ve=>{l(je=>{const We=je.find(se=>se.id===ve);return We&&r.current&&r.current.removeLayer(We.layer),je.filter(se=>se.id!==ve)})},[]),ge=ae.useCallback(ve=>{const je=s.find(We=>We.id===ve);if(je&&r.current){const se=new jn.FeatureGroup(Array.from(je.layer.getLayers())).getBounds();se.isValid()&&r.current.flyToBounds(se,{padding:[50,50],duration:1})}},[s]),be=()=>r.current?.zoomIn(),O=()=>r.current?.zoomOut(),j=()=>{d.current&&(document.fullscreenElement?document.exitFullscreen():d.current.requestFullscreen())},Ye=()=>{r.current&&r.current.flyTo(F,14,{animate:!0,duration:1.5})},Ge=()=>{r.current&&r.current.setView(F,14)},ut=()=>{if(!r.current)return;const ve=r.current.getCenter(),je=r.current.getZoom(),We={center:[ve.lat,ve.lng],zoom:je,timestamp:new Date().toISOString()},se=new Blob([JSON.stringify(We,null,2)],{type:"application/json"}),ne=URL.createObjectURL(se),we=document.createElement("a");we.href=ne,we.download="map-view.json",document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(ne)};return c.jsxs("div",{className:"w-full h-screen bg-white/40 backdrop-blur-md rounded-3xl shadow-2xl border border-white/50 flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"p-4 border-b border-white/50",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#1a1a2e]",children:"Interactive Map"}),c.jsxs("div",{className:"relative group",children:[c.jsx(zo,{className:"w-4 h-4 text-gray-500 cursor-help"}),c.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block w-64 bg-gray-800 text-white text-xs p-2 rounded-lg z-10",children:"Upload KML files to visualize geographic data. Layers will appear in the sidebar."})]})]}),c.jsx("p",{className:"text-sm text-[#1a1a2e]/70 mt-1",children:"Upload and visualize KML files with advanced controls"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[c.jsxs("button",{onClick:Ge,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg shadow transition-all text-sm",title:"Reset view",children:[c.jsx(C0,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),c.jsxs("button",{onClick:ut,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-lg shadow transition-all text-sm",title:"Export current view",children:[c.jsx(lu,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Export View"})]}),c.jsxs("button",{onClick:Ye,className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white font-medium rounded-lg shadow transition-all text-sm",title:"Go to primary location",children:[c.jsx(Mf,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Go to Location"})]}),c.jsx("button",{onClick:()=>N.current?.click(),disabled:h,className:"flex items-center gap-2 px-5 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg shadow transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:h?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"hidden sm:inline",children:"Uploading..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Ao,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Upload KML"})]})})]}),c.jsx("input",{ref:N,type:"file",accept:".kml",multiple:!0,onChange:le,className:"hidden"})]}),(g||w)&&c.jsxs("div",{className:`flex items-center gap-2 p-3 mt-3 rounded-lg text-sm ${g?"bg-red-100 border border-red-300 text-red-700":"bg-green-100 border border-green-300 text-green-700"}`,children:[g?c.jsx(Rr,{className:"w-4 h-4"}):c.jsx(lu,{className:"w-4 h-4"}),g||w]})]}),c.jsxs("div",{className:"flex-1 relative flex",children:[c.jsxs("div",{ref:d,className:"flex-1 relative",style:{height:"100%"},children:[c.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-2",children:[c.jsx("button",{onClick:be,className:"w-9 h-9 bg-white hover:bg-gray-100 rounded-lg shadow-md flex items-center justify-center transition-all border border-gray-200",title:"Zoom In",children:c.jsx(P0,{className:"w-4 h-4 text-gray-700"})}),c.jsx("button",{onClick:O,className:"w-9 h-9 bg-white hover:bg-gray-100 rounded-lg shadow-md flex items-center justify-center transition-all border border-gray-200",title:"Zoom Out",children:c.jsx(j0,{className:"w-4 h-4 text-gray-700"})}),c.jsx("button",{onClick:j,className:"w-9 h-9 bg-white hover:bg-gray-100 rounded-lg shadow-md flex items-center justify-center transition-all border border-gray-200",title:z?"Exit Fullscreen":"Fullscreen",children:c.jsx(zf,{className:"w-4 h-4 text-gray-700"})}),c.jsx("button",{onClick:Ye,className:"w-9 h-9 bg-white hover:bg-gray-100 rounded-lg shadow-md flex items-center justify-center transition-all border border-gray-200",title:"Go to primary location",children:c.jsx(Mf,{className:"w-4 h-4 text-gray-700"})})]}),r.current&&c.jsxs("div",{className:"absolute bottom-4 left-4 z-[1000] bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg text-sm font-medium text-gray-700 border border-white/50",children:[c.jsxs("div",{children:["Lat: ",F[0].toFixed(6)]}),c.jsxs("div",{children:["Lng: ",F[1].toFixed(6)]})]})]}),s.length>0&&c.jsxs("div",{className:"w-72 bg-white/95 backdrop-blur-sm border-l border-white/50 p-4 overflow-y-auto max-h-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Wp,{className:"w-5 h-5 text-gray-700"}),c.jsxs("h3",{className:"font-bold text-gray-800",children:["Layers (",s.length,")"]})]}),c.jsxs("button",{onClick:()=>s.forEach(ve=>Q(ve.id)),className:"text-xs text-red-600 hover:text-red-800 flex items-center gap-1",title:"Remove all layers",children:[c.jsx($s,{className:"w-3 h-3"}),"Clear All"]})]}),c.jsx("div",{className:"space-y-2 max-h-[calc(100vh-200px)] overflow-y-auto pr-1",children:s.map(ve=>c.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200 hover:shadow-md transition-all",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded mt-1.5 flex-shrink-0",style:{backgroundColor:ve.color}}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",title:ve.fileName,children:ve.name}),ve.type==="csv"&&c.jsx(nu,{className:"w-3 h-3 text-blue-500"})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-1",title:ve.fileName,children:ve.fileName}),c.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[c.jsx("button",{onClick:()=>_e(ve.id),className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:ve.visible?"Hide layer":"Show layer",children:ve.visible?c.jsx(Ro,{className:"w-3.5 h-3.5 text-blue-600"}):c.jsx(Na,{className:"w-3.5 h-3.5 text-gray-400"})}),c.jsx("button",{onClick:()=>ge(ve.id),className:"p-1.5 hover:bg-gray-100 rounded transition-colors",title:"Zoom to layer",children:c.jsx(zf,{className:"w-3.5 h-3.5 text-gray-600"})}),c.jsx("button",{onClick:()=>Q(ve.id),className:"p-1.5 hover:bg-red-100 rounded transition-colors ml-auto",title:"Remove layer",children:c.jsx($s,{className:"w-3.5 h-3.5 text-red-600"})})]})]})]})},ve.id))})]})]}),s.length===0&&!h&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsxs("div",{className:"text-center bg-white/80 backdrop-blur-sm p-6 rounded-2xl shadow-lg max-w-md",children:[c.jsx(Ao,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No KML files loaded"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Upload KML files to visualize geographic data on the map"}),c.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-left mt-2",children:[c.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Primary Location:"}),c.jsxs("p",{className:"text-xs text-blue-700",children:["Latitude: ",F[0].toFixed(6)]}),c.jsxs("p",{className:"text-xs text-blue-700",children:["Longitude: ",F[1].toFixed(6)]})]})]})})]})}function B0(){const{user:d}=Fo(),[r,s]=ae.useState("users"),[l,h]=ae.useState([]),[f,g]=ae.useState([]),[_,w]=ae.useState([]),[C,N]=ae.useState(!1),[z,B]=ae.useState(null),[F,V]=ae.useState(!1),[H,W]=ae.useState(!1),[le,_e]=ae.useState(null),[Q,ge]=ae.useState(null),[be,O]=ae.useState({email:"",name:"",role_id:0}),[j,Ye]=ae.useState({name:"",description:"",permissions:[]}),Ge=["manage_pages","manage_files","manage_settings","manage_users","manage_roles","view_audit_logs","manage_map_pages","delete_resources","upload_files","edit_own_content","view_pages","view_files","view_map_pages"];ae.useEffect(()=>{ut()},[r]);const ut=async()=>{N(!0),B(null);try{const ne={"x-user-id":d?.email||""};if(r==="users"){const $e=await fetch("/api/rbac/users",{headers:ne});if($e.ok){const te=await $e.json();h(te.users||[])}}else if(r==="roles"){const $e=await fetch("/api/rbac/roles",{headers:ne});if($e.ok){const te=await $e.json();g(te.roles||[])}}else if(r==="audit"){const $e=await fetch("/api/rbac/audit-logs",{headers:ne});if($e.ok){const te=await $e.json();w(te.logs||[])}}const we=await fetch("/api/rbac/roles",{headers:ne});if(we.ok){const $e=await we.json();g($e.roles||[])}}catch(ne){B(ne instanceof Error?ne.message:"Failed to load data")}finally{N(!1)}},ve=async()=>{try{const ne=await fetch("/api/rbac/users",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":d?.email||""},body:JSON.stringify(be)});if(ne.ok)V(!1),O({email:"",name:"",role_id:0}),ut();else{const we=await ne.json();B(we.error||"Failed to create user")}}catch(ne){B(ne instanceof Error?ne.message:"Failed to create user")}},je=async(ne,we)=>{try{const $e=await fetch(`/api/rbac/users/${ne}`,{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":d?.email||""},body:JSON.stringify(we)});if($e.ok)ut();else{const te=await $e.json();B(te.error||"Failed to update user")}}catch($e){B($e instanceof Error?$e.message:"Failed to update user")}},We=async()=>{try{const ne=await fetch("/api/rbac/roles",{method:"POST",headers:{"Content-Type":"application/json","x-user-id":d?.email||""},body:JSON.stringify(j)});if(ne.ok)W(!1),Ye({name:"",description:"",permissions:[]}),ut();else{const we=await ne.json();B(we.error||"Failed to create role")}}catch(ne){B(ne instanceof Error?ne.message:"Failed to create role")}},se=ne=>{Ye(we=>({...we,permissions:we.permissions.includes(ne)?we.permissions.filter($e=>$e!==ne):[...we.permissions,ne]}))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>s("users"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${r==="users"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:[c.jsx(qp,{size:18}),"Users"]}),c.jsxs("button",{onClick:()=>s("roles"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${r==="roles"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:[c.jsx(Vp,{size:18}),"Roles"]}),c.jsxs("button",{onClick:()=>s("audit"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${r==="audit"?"bg-blue-500 text-white":"bg-white text-gray-700"}`,children:[c.jsx(_0,{size:18}),"Audit Log"]})]}),z&&c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded flex items-center gap-2",children:[c.jsx(Ws,{size:18}),z,c.jsx("button",{onClick:()=>B(null),className:"ml-auto",children:c.jsx(Rr,{size:18})})]}),r==="users"&&c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold",children:"User Management"}),c.jsxs("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg flex items-center gap-2",children:[c.jsx(ds,{size:18}),"Add User"]})]}),F&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[c.jsx("h4",{className:"font-bold mb-4",children:"Create New User"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{type:"email",placeholder:"Email",value:be.email,onChange:ne=>O({...be,email:ne.target.value}),className:"px-3 py-2 border rounded"}),c.jsx("input",{type:"text",placeholder:"Name",value:be.name,onChange:ne=>O({...be,name:ne.target.value}),className:"px-3 py-2 border rounded"}),c.jsxs("select",{value:be.role_id,onChange:ne=>O({...be,role_id:parseInt(ne.target.value)}),className:"px-3 py-2 border rounded",children:[c.jsx("option",{value:0,children:"Select Role"}),f.map(ne=>c.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:ve,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Create"}),c.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"})]})]}),c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Role"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),c.jsx("tbody",{children:l.map(ne=>c.jsxs("tr",{className:"border-t",children:[c.jsx("td",{className:"px-4 py-3",children:ne.email}),c.jsx("td",{className:"px-4 py-3",children:ne.name}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:ne.role_name||"No Role"})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:`px-2 py-1 rounded text-sm ${ne.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.is_active?"Active":"Inactive"})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("button",{onClick:()=>je(ne.id,{is_active:!ne.is_active}),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:ne.is_active?"Deactivate":"Activate"})})]},ne.id))})]})]}),r==="roles"&&c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold",children:"Role Management"}),c.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg flex items-center gap-2",children:[c.jsx(ds,{size:18}),"Add Role"]})]}),H&&c.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[c.jsx("h4",{className:"font-bold mb-4",children:"Create New Role"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{type:"text",placeholder:"Role Name",value:j.name,onChange:ne=>Ye({...j,name:ne.target.value}),className:"w-full px-3 py-2 border rounded"}),c.jsx("textarea",{placeholder:"Description",value:j.description,onChange:ne=>Ye({...j,description:ne.target.value}),className:"w-full px-3 py-2 border rounded",rows:2}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold mb-2",children:"Permissions:"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ge.map(ne=>c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:j.permissions.includes(ne),onChange:()=>se(ne)}),c.jsx("span",{className:"text-sm",children:ne.replace(/_/g," ")})]},ne))})]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:We,className:"px-4 py-2 bg-green-500 text-white rounded",children:"Create"}),c.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"Cancel"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(ne=>c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsx("h4",{className:"font-bold text-lg mb-2",children:ne.name}),c.jsx("p",{className:"text-gray-600 text-sm mb-3",children:ne.description}),c.jsx("div",{className:"flex flex-wrap gap-1",children:(Array.isArray(ne.permissions)?ne.permissions:JSON.parse(ne.permissions||"[]")).map(we=>c.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:we.replace(/_/g," ")},we))})]},ne.id))})]}),r==="audit"&&c.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[c.jsx("h3",{className:"text-xl font-bold mb-6",children:"Audit Log"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left",children:"Time"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"User"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Action"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"Resource"}),c.jsx("th",{className:"px-4 py-3 text-left",children:"IP"})]})}),c.jsx("tbody",{children:_.map(ne=>c.jsxs("tr",{className:"border-t",children:[c.jsx("td",{className:"px-4 py-3",children:new Date(ne.created_at).toLocaleString()}),c.jsx("td",{className:"px-4 py-3",children:ne.user_name}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:ne.action})}),c.jsx("td",{className:"px-4 py-3",children:ne.resource}),c.jsx("td",{className:"px-4 py-3 text-gray-500",children:ne.ip_address})]},ne.id))})]})})]})]})}function U0({onNavigate:d,onSidebarUpdate:r}){const{user:s,signOut:l,isConfigured:h}=Fo(),[f,g]=ae.useState("pages"),[_,w]=ae.useState("map"),[C,N]=ae.useState([]),[z,B]=ae.useState([]),[F,V]=ae.useState([]),[H,W]=ae.useState(null),[le,_e]=ae.useState({}),[Q,ge]=ae.useState(!0),[be,O]=ae.useState(null),[j,Ye]=ae.useState(null),[Ge,ut]=ae.useState(null),[ve,je]=ae.useState(""),[We,se]=ae.useState(""),[ne,we]=ae.useState(!1),[$e,te]=ae.useState(!1),[Pe,ie]=ae.useState(null),[M,re]=ae.useState({slug:"",title:"",description:"",is_published:!1,layers:[],center_lat:13.037,center_lng:123.4589,zoom_level:12}),[ze,I]=ae.useState(!1),[D,oe]=ae.useState(!1),he=ae.useRef(null),[ee,Z]=ae.useState("all"),[J,Be]=ae.useState([]),[Ne,Le]=ae.useState("light"),[ct,rt]=ae.useState([]),[Tt,Et]=ae.useState(!1),[lt,yt]=ae.useState(null),[xe,Je]=ae.useState({button_id:"",label:"",folder_id:"",is_enabled:!0,order_index:0}),[wt,x]=ae.useState([]),[Ue,Me]=ae.useState(!1),[Kt,Rt]=ae.useState(null),[xt,sn]=ae.useState({name:"",description:"",image_url:"",thumbnail_url:"",is_active:!0,order_index:0}),[yn,_n]=ae.useState(!1),wr=ae.useRef(null),[Ie,Bn]=ae.useState([]),[Ct,Nn]=ae.useState(!1),[tn,Ft]=ae.useState(null),[st,Re]=ae.useState({config_name:"",description:"",default_center_lat:13.037063,default_center_lng:123.458907,default_zoom:14,max_zoom:19,min_zoom:1,tile_layer_url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tile_layer_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',enable_location_marker:!0,enable_reference_circle:!0,reference_circle_radius:1e3,reference_circle_color:"#3b82f6",allowed_file_types:[".kml",".geojson",".csv"],max_file_size_mb:10,is_active:!1}),[$t,Dt]=ae.useState(""),[wn,xr]=ae.useState("created_at"),[Wt,Un]=ae.useState("desc"),Pt=S=>{Ye(S),setTimeout(()=>Ye(null),3e3)},dt=ae.useCallback(async()=>{ge(!0),O(null);try{if(f==="pages")if(_==="system"){const S=await fetch("/api/pages");if(S.ok){const ce=await S.json();N(ce.pages||[])}else throw new Error("Failed to load system pages")}else{const S=await fetch("/api/map-pages");if(S.ok){const ce=await S.json();B(ce.pages||[])}else throw new Error("Failed to load map pages")}else if(f==="database"){const[S,ce]=await Promise.all([fetch("/api/db-info"),fetch("/api/spatial-files")]);if(S.ok){const Ce=await S.json();W(Ce)}if(ce.ok){const Ce=await ce.json();V(Ce.files||[])}}else if(f==="settings"){const S=await fetch("/api/settings");if(S.ok){const ce=await S.json();_e(ce.settings||{})}}else if(f==="sidebar"){const S=await fetch("/api/sidebar-buttons");if(S.ok){const ce=await S.json();rt(ce.buttons||[])}}else if(f==="panoramas"){const S=await fetch("/api/panoramas/admin");if(S.ok){const ce=await S.json();x(ce.panoramas||[])}}else if(f==="map_config"){const S=await fetch("/api/map-configs");if(S.ok){const ce=await S.json();Bn(ce.configs||[])}}}catch(S){O(S instanceof Error?S.message:"An error occurred")}finally{ge(!1)}},[f,_]);ae.useEffect(()=>{s&&dt()},[s,dt,f,_]);const Jt=async S=>{try{const ce=await fetch(`/api/page?type=${S.type}`);if(ce.ok){const Ce=await ce.json();ut(S.type),je(Ce.page.title||S.title),se(Ce.page.content||"")}else throw new Error("Failed to load page content")}catch(ce){O(ce instanceof Error?ce.message:"Failed to load page content")}},on=async()=>{if(!Ge||!ve||!We){O("All fields are required");return}we(!0);try{if((await fetch(`/api/page/${Ge}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:ve,content:We})})).ok)ut(null),await dt(),Pt("Page saved successfully");else throw new Error("Failed to save page")}catch(S){O(S instanceof Error?S.message:"Failed to save page")}finally{we(!1)}},sr=()=>{ie(null),re({slug:"",title:"",description:"",is_published:!1,layers:[],center_lat:13.037,center_lng:123.4589,zoom_level:12}),te(!0)},or=S=>{ie(S),re({slug:S.slug,title:S.title,description:S.description||"",is_published:!!S.is_published,layers:S.layers||[],center_lat:Number(S.center_lat)||13.037,center_lng:Number(S.center_lng)||123.4589,zoom_level:Number(S.zoom_level)||12}),te(!0)},Ii=async()=>{if(!M.slug||!M.title){O("Slug and title are required");return}we(!0);try{const S=Pe?`/api/map-pages/${Pe.id}`:"/api/map-pages";if((await fetch(S,{method:Pe?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok)te(!1),await dt(),Pt(Pe?"Map page updated":"Map page created");else throw new Error(Pe?"Failed to update map page":"Failed to create map page")}catch(S){O(S instanceof Error?S.message:"Failed to save map page")}finally{we(!1)}},Yt=async S=>{if(confirm("Are you sure you want to delete this map page?"))try{if((await fetch(`/api/map-pages/${S}`,{method:"DELETE"})).ok)await dt(),Pt("Map page deleted");else throw new Error("Failed to delete map page")}catch(ce){O(ce instanceof Error?ce.message:"Failed to delete map page")}},ke=async S=>{try{if((await fetch(`/api/map-pages/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_published:!S.is_published})})).ok)await dt(),Pt(S.is_published?"Page unpublished":"Page published");else throw new Error("Failed to update page status")}catch(ce){O(ce instanceof Error?ce.message:"Failed to update page status")}},Lt=S=>{try{const ht=new DOMParser().parseFromString(S,"text/xml").getElementsByTagName("Placemark"),$n=[];for(let St=0;St<ht.length;St++){const At=ht[St],Zs=At.getElementsByTagName("name")[0]?.textContent||"",Xr=At.getElementsByTagName("description")[0]?.textContent||"",Ln=At.getElementsByTagName("coordinates")[0]?.textContent;if(Ln){const It=Ln.trim().split(/\s+/).map(Sn=>{const[Ri,Ai,fi]=Sn.split(",").map(Number);return[Ri,Ai,fi||0]}),ar=At.getElementsByTagName("Polygon")[0],gt=At.getElementsByTagName("LineString")[0],Qr=At.getElementsByTagName("Point")[0];let zr;if(ar)zr={type:"Polygon",coordinates:[It.map(Sn=>[Sn[0],Sn[1]])]};else if(gt)zr={type:"LineString",coordinates:It.map(Sn=>[Sn[0],Sn[1]])};else if(Qr)zr={type:"Point",coordinates:[It[0][0],It[0][1]]};else continue;$n.push({type:"Feature",properties:{name:Zs,description:Xr},geometry:zr})}}return{type:"FeatureCollection",features:$n}}catch{return null}},nn=async S=>{S.preventDefault(),I(!1);const ce=Array.from(S.dataTransfer.files);await Oe(ce)},Tn=async S=>{const ce=S.target.files?Array.from(S.target.files):[];await Oe(ce),he.current&&(he.current.value="")},Oe=async S=>{oe(!0),O(null);for(const ce of S){const Ce=ce.name.split(".").pop()?.toLowerCase();let ht="",$n=null;if(Ce==="kml"){ht="kml";const St=await ce.text();$n=Lt(St)}else if(Ce==="geojson"||Ce==="json"){ht="geojson";const St=await ce.text();try{$n=JSON.parse(St)}catch{O(`Invalid JSON in file: ${ce.name}`);continue}}else if(Ce==="csv")ht="csv";else{O(`Unsupported file type: ${Ce}`);continue}try{const St=new FormData;if(St.append("file",ce),St.append("filename",`${Date.now()}_${ce.name}`),St.append("original_name",ce.name),St.append("file_type",ht),St.append("category","uncategorized"),St.append("description",""),St.append("file_size",ce.size.toString()),$n&&St.append("geojson_data",JSON.stringify($n)),!(await fetch("/api/spatial-files",{method:"POST",body:St})).ok)throw new Error(`Failed to upload: ${ce.name}`)}catch(St){O(St instanceof Error?St.message:`Failed to upload: ${ce.name}`)}}await dt(),oe(!1),Pt("Files uploaded successfully")},Ar=async S=>{if(confirm("Are you sure you want to delete this file?"))try{if((await fetch(`/api/spatial-files/${S}`,{method:"DELETE"})).ok)await dt(),Pt("File deleted");else throw new Error("Failed to delete file")}catch(ce){O(ce instanceof Error?ce.message:"Failed to delete file")}},Ve=async(S,ce)=>{try{if((await fetch(`/api/spatial-files/${S}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:ce})})).ok)await dt(),Pt("Category updated");else throw new Error("Failed to update category")}catch(Ce){O(Ce instanceof Error?Ce.message:"Failed to update category")}},Fn=S=>{Be(ce=>ce.includes(S)?ce.filter(Ce=>Ce!==S):[...ce,S])},Gn=async S=>{try{if((await fetch("/api/settings/theme",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:S})})).ok)Le(S),Pt("Theme updated");else throw new Error("Failed to update theme")}catch(ce){O(ce instanceof Error?ce.message:"Failed to update theme")}},Kn=async()=>{await l(),d?.("panorama")},Jn=()=>{yt(null),Je({button_id:"",label:"",folder_id:"",source_type:"drive",is_enabled:!0,order_index:ct.length}),Et(!0)},b=S=>{yt(S),Je({button_id:S.button_id,label:S.label,folder_id:S.folder_id,source_type:S.source_type||"drive",is_enabled:S.is_enabled,order_index:S.order_index}),Et(!0)},P=async()=>{if(!xe.button_id||!xe.label||!xe.folder_id){O("All fields are required");return}we(!0);try{const S=lt?`/api/sidebar-buttons/${lt.id}`:"/api/sidebar-buttons";if((await fetch(S,{method:lt?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)})).ok)Et(!1),await dt(),r?.(),Pt(lt?"Button updated":"Button created");else throw new Error(lt?"Failed to update button":"Failed to create button")}catch(S){O(S instanceof Error?S.message:"Failed to save button")}finally{we(!1)}},R=async S=>{if(confirm("Are you sure you want to delete this button?"))try{if((await fetch(`/api/sidebar-buttons/${S}`,{method:"DELETE"})).ok)await dt(),r?.(),Pt("Button deleted");else throw new Error("Failed to delete button")}catch(ce){O(ce instanceof Error?ce.message:"Failed to delete button")}},ue=async S=>{try{if((await fetch(`/api/sidebar-buttons/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_enabled:!S.is_enabled})})).ok)await dt(),r?.(),Pt(S.is_enabled?"Button disabled":"Button enabled");else throw new Error("Failed to update button status")}catch(ce){O(ce instanceof Error?ce.message:"Failed to update button status")}},pe=()=>{Rt(null),sn({name:"",description:"",image_url:"",thumbnail_url:"",is_active:!0,order_index:wt.length}),Me(!0)},Ee=S=>{Rt(S),sn({name:S.name,description:S.description||"",image_url:S.image_url,thumbnail_url:S.thumbnail_url||"",is_active:!!S.is_active,order_index:Number(S.order_index)||0}),Me(!0)},Xe=async S=>{const ce=S.target.files?.[0];if(!ce)return;if(!ce.type.startsWith("image/")){O("Please select an image file");return}const Ce=10*1024*1024;if(ce.size>Ce){O("Image size must be less than 10MB");return}_n(!0);try{const ht=new FileReader;ht.onload=$n=>{const St=$n.target?.result;sn(At=>({...At,image_url:St,thumbnail_url:St})),_n(!1)},ht.onerror=()=>{O("Failed to read image file"),_n(!1)},ht.readAsDataURL(ce)}catch{O("Failed to process image"),_n(!1)}wr.current&&(wr.current.value="")},hn=async()=>{if(!xt.name||!xt.image_url){O("Name and image are required");return}we(!0);try{const S=Kt?`/api/panoramas/${Kt.id}`:"/api/panoramas",Ce=await fetch(S,{method:Kt?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xt)});if(Ce.ok)Me(!1),await dt(),Pt(Kt?"Panorama updated":"Panorama created");else{const ht=await Ce.json();throw new Error(ht.error||(Kt?"Failed to update panorama":"Failed to create panorama"))}}catch(S){O(S instanceof Error?S.message:"Failed to save panorama")}finally{we(!1)}},Xt=async S=>{if(confirm("Are you sure you want to delete this panorama?"))try{if((await fetch(`/api/panoramas/${S}`,{method:"DELETE"})).ok)await dt(),Pt("Panorama deleted");else throw new Error("Failed to delete panorama")}catch(ce){O(ce instanceof Error?ce.message:"Failed to delete panorama")}},an=async S=>{try{if((await fetch(`/api/panoramas/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!S.is_active})})).ok)await dt(),Pt(S.is_active?"Panorama hidden":"Panorama visible");else throw new Error("Failed to update panorama status")}catch(ce){O(ce instanceof Error?ce.message:"Failed to update panorama status")}},Bt=ee==="all"?F:F.filter(S=>S.category===ee),Jr=["all",...new Set(F.map(S=>S.category))],Yr=()=>{Ft(null),Re({config_name:"",description:"",default_center_lat:13.037063,default_center_lng:123.458907,default_zoom:14,max_zoom:19,min_zoom:1,tile_layer_url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tile_layer_attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',enable_location_marker:!0,enable_reference_circle:!0,reference_circle_radius:1e3,reference_circle_color:"#3b82f6",allowed_file_types:[".kml",".geojson",".csv"],max_file_size_mb:10,is_active:!1}),Nn(!0)},Qt=S=>{Ft(S),Re({config_name:S.config_name,description:S.description||"",default_center_lat:Number(S.default_center_lat)||13.037063,default_center_lng:Number(S.default_center_lng)||123.458907,default_zoom:Number(S.default_zoom)||14,max_zoom:Number(S.max_zoom)||19,min_zoom:Number(S.min_zoom)||1,tile_layer_url:S.tile_layer_url,tile_layer_attribution:S.tile_layer_attribution,enable_location_marker:!!S.enable_location_marker,enable_reference_circle:!!S.enable_reference_circle,reference_circle_radius:Number(S.reference_circle_radius)||1e3,reference_circle_color:S.reference_circle_color||"#3b82f6",allowed_file_types:S.allowed_file_types||[".kml",".geojson",".csv"],max_file_size_mb:Number(S.max_file_size_mb)||10,is_active:!!S.is_active}),Nn(!0)},ln=async()=>{if(!st.config_name){O("Config name is required");return}we(!0);try{const S=tn?`/api/map-configs/${tn.id}`:"/api/map-configs",Ce=await fetch(S,{method:tn?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)});if(Ce.ok)Nn(!1),await dt(),Pt(tn?"Map config updated":"Map config created");else{const ht=await Ce.json();throw new Error(ht.error||(tn?"Failed to update map config":"Failed to create map config"))}}catch(S){O(S instanceof Error?S.message:"Failed to save map config")}finally{we(!1)}},at=async S=>{if(confirm("Are you sure you want to delete this map configuration?"))try{if((await fetch(`/api/map-configs/${S}`,{method:"DELETE"})).ok)await dt(),Pt("Map config deleted");else throw new Error("Failed to delete map config")}catch(ce){O(ce instanceof Error?ce.message:"Failed to delete map config")}},Ot=async S=>{try{if((await fetch(`/api/map-configs/${S.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!S.is_active})})).ok)await dt(),Pt(S.is_active?"Config deactivated":"Config activated");else throw new Error("Failed to update config status")}catch(ce){O(ce instanceof Error?ce.message:"Failed to update config status")}},hi=[...z].sort((S,ce)=>Wt==="asc"?S[wn]>ce[wn]?1:-1:S[wn]<ce[wn]?1:-1).filter(S=>S.title.toLowerCase().includes($t.toLowerCase())||S.description.toLowerCase().includes($t.toLowerCase())),Mr=[...wt].sort((S,ce)=>Wt==="asc"?S[wn]>ce[wn]?1:-1:S[wn]<ce[wn]?1:-1).filter(S=>S.name.toLowerCase().includes($t.toLowerCase())||S.description.toLowerCase().includes($t.toLowerCase()));return s?c.jsxs("div",{className:"w-full h-full bg-white/40 backdrop-blur-md rounded-3xl shadow-2xl border border-white/50 flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-4 flex justify-between items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:c.jsx(Ia,{className:"w-6 h-6"})}),c.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"})]}),c.jsxs("button",{onClick:Kn,className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-all duration-200 font-medium",children:[c.jsx(Zp,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),c.jsxs("div",{className:"flex border-b border-white/30 bg-white/10 px-6",children:[c.jsxs("button",{onClick:()=>g("pages"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="pages"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(nu,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Pages"})]}),c.jsxs("button",{onClick:()=>g("database"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="database"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(If,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Database"})]}),c.jsxs("button",{onClick:()=>g("settings"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(Ia,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),c.jsxs("button",{onClick:()=>g("rbac"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="rbac"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(Vp,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"RBAC"})]}),c.jsxs("button",{onClick:()=>g("sidebar"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="sidebar"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(ds,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Sidebar"})]}),c.jsxs("button",{onClick:()=>g("panoramas"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="panoramas"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(od,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Panoramas"})]}),c.jsxs("button",{onClick:()=>g("map_config"),className:`px-4 py-3 font-semibold flex items-center gap-2 transition-all duration-200 border-b-2 ${f==="map_config"?"border-blue-500 text-blue-600":"border-transparent text-gray-700 hover:text-gray-900"}`,children:[c.jsx(Lo,{size:18}),c.jsx("span",{className:"hidden sm:inline",children:"Map Config"})]})]}),j&&c.jsxs("div",{className:"mx-6 mt-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center gap-2 animate-fadeIn",children:[c.jsx(b0,{className:"w-5 h-5 flex-shrink-0"}),c.jsx("span",{children:j}),c.jsx("button",{onClick:()=>Ye(null),className:"ml-auto text-green-700 hover:text-green-900",children:c.jsx(Rr,{size:18})})]}),be&&c.jsxs("div",{className:"mx-6 mt-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex items-center gap-2 animate-fadeIn",children:[c.jsx(Ws,{className:"w-5 h-5 flex-shrink-0"}),c.jsx("span",{children:be}),c.jsx("button",{onClick:()=>O(null),className:"ml-auto text-red-700 hover:text-red-900",children:c.jsx(Rr,{size:18})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Q?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx(di,{className:"animate-spin text-blue-500",size:32}),c.jsx("p",{className:"text-gray-600",children:"Loading data..."})]})}):c.jsxs(c.Fragment,{children:[f==="pages"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[c.jsxs("button",{onClick:()=>w("map"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${_==="map"?"bg-blue-500 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 shadow-sm"}`,children:[c.jsx(Lo,{size:16}),"Map Pages"]}),c.jsxs("button",{onClick:()=>w("system"),className:`px-4 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${_==="system"?"bg-blue-500 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 shadow-sm"}`,children:[c.jsx(nu,{size:16}),"System Pages"]})]}),_==="map"&&c.jsx(c.Fragment,{children:$e?c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Pe?"Edit Map Page":"Create New Map Page"}),c.jsx("button",{onClick:()=>te(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:c.jsx(Rr,{size:20})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Slug *"}),c.jsx("input",{type:"text",value:M.slug,onChange:S=>re({...M,slug:S.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"evacuation-routes",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Used in URLs (e.g., /maps/evacuation-routes)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Title *"}),c.jsx("input",{type:"text",value:M.title,onChange:S=>re({...M,title:S.target.value}),placeholder:"Evacuation Routes Map",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{value:M.description,onChange:S=>re({...M,description:S.target.value}),rows:3,placeholder:"Brief description of this map page...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Center Latitude"}),c.jsx("input",{type:"number",step:"0.0001",value:M.center_lat,onChange:S=>re({...M,center_lat:parseFloat(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Center Longitude"}),c.jsx("input",{type:"number",step:"0.0001",value:M.center_lng,onChange:S=>re({...M,center_lng:parseFloat(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Zoom Level"}),c.jsx("input",{type:"number",min:"1",max:"20",value:M.zoom_level,onChange:S=>re({...M,zoom_level:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsx("div",{className:"flex items-center pt-6",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:M.is_published,onChange:S=>re({...M,is_published:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Publish this page"})]})})]}),c.jsxs("div",{className:"flex gap-3 mt-8",children:[c.jsx("button",{onClick:Ii,disabled:ne,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Saving..."]}):"Save Page"}),c.jsx("button",{onClick:()=>te(!1),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Map Pages"}),c.jsx("p",{className:"text-gray-600",children:"Manage your interactive map pages"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",placeholder:"Search map pages...",value:$t,onChange:S=>Dt(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),c.jsxs("select",{value:wn,onChange:S=>xr(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[c.jsx("option",{value:"title",children:"Title"}),c.jsx("option",{value:"created_at",children:"Created Date"}),c.jsx("option",{value:"updated_at",children:"Updated Date"})]}),c.jsx("button",{onClick:()=>Un(Wt==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:Wt==="asc"?"":""}),c.jsxs("button",{onClick:sr,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(ds,{size:18}),"Create Page"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:hi.length===0?c.jsxs("div",{className:"col-span-full bg-white rounded-xl shadow-sm border border-dashed border-gray-300 p-12 text-center",children:[c.jsx(Lo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No map pages found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:$t?"Try adjusting your search":"Create your first interactive map page to get started"}),c.jsx("button",{onClick:sr,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Create Your First Page"})]}):hi.map(S=>c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:S.title}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["/",S.slug]})]}),c.jsx("span",{className:`px-2.5 py-1 text-xs rounded-full font-medium ${S.is_published?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.is_published?"Published":"Draft"})]}),S.description&&c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:S.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[c.jsxs("span",{children:["Lat: ",Number(S.center_lat).toFixed(4)]}),c.jsxs("span",{children:["Lng: ",Number(S.center_lng).toFixed(4)]}),c.jsxs("span",{children:["Zoom: ",S.zoom_level]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>ke(S),className:`p-2 rounded-lg transition flex-1 flex items-center justify-center gap-1 ${S.is_published?"bg-yellow-100 hover:bg-yellow-200 text-yellow-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:S.is_published?"Unpublish":"Publish",children:[S.is_published?c.jsx(Na,{size:16}):c.jsx(Ro,{size:16}),c.jsx("span",{children:S.is_published?"Unpublish":"Publish"})]}),c.jsx("button",{onClick:()=>or(S),className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition flex items-center justify-center",title:"Edit",children:c.jsx(Pa,{size:16})}),c.jsx("button",{onClick:()=>Yt(S.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition flex items-center justify-center",title:"Delete",children:c.jsx($s,{size:16})})]})]})},S.id))})]})}),_==="system"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"flex justify-between items-center mb-6",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"System Pages"}),c.jsx("p",{className:"text-gray-600",children:"Manage static content pages"})]})}),Ge?c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Edit Page: ",Ge]}),c.jsx("button",{onClick:()=>ut(null),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:c.jsx(Rr,{size:20})})]}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Title"}),c.jsx("input",{type:"text",value:ve,onChange:S=>je(S.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Content"}),c.jsx("textarea",{value:We,onChange:S=>se(S.target.value),rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition font-mono text-sm"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:on,disabled:ne,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Saving..."]}):"Save Changes"}),c.jsx("button",{onClick:()=>ut(null),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:C.map(S=>c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:c.jsxs("div",{className:"p-5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:S.title}),c.jsx("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:S.type})]}),c.jsx("div",{className:"text-sm text-gray-500 mb-4",children:c.jsxs("p",{children:["Last updated:"," ",new Date(S.updated_at).toLocaleDateString()]})}),c.jsxs("button",{onClick:()=>Jt(S),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[c.jsx(Pa,{size:16}),"Edit Content"]})]})},S.id))})]})]}),f==="database"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(If,{className:"text-blue-500",size:24}),"Database Information"]}),H&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Database Version"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:H.version})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Tables"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:H.tableCount})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Database Tables"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:H.tables.map(S=>c.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-700 text-sm rounded-lg font-medium",children:S},S))})]})]})]}),c.jsxs("div",{className:`bg-white p-6 rounded-xl shadow-sm border-2 border-dashed transition-all duration-200 ${ze?"border-blue-500 bg-blue-50":"border-gray-300"}`,onDragOver:S=>{S.preventDefault(),I(!0)},onDragLeave:()=>I(!1),onDrop:nn,children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(Ao,{className:"text-green-500",size:24}),"Upload Spatial Data"]}),c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Ao,{size:32,className:"text-gray-400"})}),c.jsx("p",{className:"text-gray-600 mb-2 font-medium",children:ze?"Drop files here":"Drag & drop files to upload"}),c.jsx("p",{className:"text-sm text-gray-500 mb-5",children:"Supports KML, GeoJSON, and CSV formats"}),c.jsx("input",{type:"file",ref:he,onChange:Tn,accept:".kml,.geojson,.json,.csv",multiple:!0,className:"hidden"}),c.jsx("button",{onClick:()=>he.current?.click(),disabled:D,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mx-auto",children:D?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Uploading..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ao,{size:18}),"Browse Files"]})})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-5",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[c.jsx(Wp,{className:"text-purple-500",size:24}),"Spatial Files"]}),c.jsx("p",{className:"text-gray-600",children:"Manage your geospatial data files"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",placeholder:"Search files...",value:$t,onChange:S=>Dt(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(E0,{size:18,className:"text-gray-500"}),c.jsx("select",{value:ee,onChange:S=>Z(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:Jr.map(S=>c.jsx("option",{value:S,children:S==="all"?"All Categories":S.charAt(0).toUpperCase()+S.slice(1)},S))})]})]})]}),Bt.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(nu,{size:32,className:"text-gray-400"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No spatial files found"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Upload your first geospatial file to get started"}),c.jsx("button",{onClick:()=>he.current?.click(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Upload Files"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Preview"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"File Name"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Size"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:Bt.map(S=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-4 py-3",children:c.jsx("button",{onClick:()=>Fn(S.id),className:`p-2 rounded-lg transition ${J.includes(S.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:J.includes(S.id)?"Hide on map":"Show on map",children:c.jsx(Ro,{size:16})})}),c.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:c.jsx("div",{className:"max-w-xs truncate",title:S.original_name,children:S.original_name})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:`px-2.5 py-1 text-xs rounded-full font-medium ${S.file_type==="kml"?"bg-green-100 text-green-800":S.file_type==="geojson"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:S.file_type.toUpperCase()})}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("select",{value:S.category,onChange:ce=>Ve(S.id,ce.target.value),className:"px-2.5 py-1 border border-gray-300 rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[c.jsx("option",{value:"uncategorized",children:"Uncategorized"}),c.jsx("option",{value:"evacuation",children:"Evacuation"}),c.jsx("option",{value:"hazard",children:"Hazard Zones"}),c.jsx("option",{value:"boundaries",children:"Boundaries"}),c.jsx("option",{value:"infrastructure",children:"Infrastructure"})]})}),c.jsx("td",{className:"px-4 py-3 text-gray-600",children:S.file_size>1024?`${(S.file_size/1024).toFixed(1)} KB`:`${S.file_size} B`}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("button",{onClick:()=>Ar(S.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition",title:"Delete",children:c.jsx($s,{size:16})})})]},S.id))})]})})]}),J.length>0&&c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(Lo,{className:"text-indigo-500",size:24}),"Map Preview"]}),c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg h-64 flex items-center justify-center border border-gray-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Lo,{className:"w-12 h-12 text-indigo-400 mx-auto mb-3"}),c.jsxs("p",{className:"text-gray-600 font-medium",children:[J.length," layer",J.length>1?"s":""," selected for preview"]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Interactive map preview would appear here"})]})})]})]}),f==="rbac"&&c.jsx(B0,{}),f==="sidebar"&&c.jsx("div",{className:"space-y-6",children:Tt?c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:lt?"Edit Sidebar Button":"Create New Sidebar Button"}),c.jsx("button",{onClick:()=>Et(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:c.jsx(Rr,{size:20})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Button ID *"}),c.jsx("input",{type:"text",value:xe.button_id,onChange:S=>Je({...xe,button_id:S.target.value.toLowerCase().replace(/\s+/g,"_")}),placeholder:"custom_gallery",disabled:!!lt,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition disabled:bg-gray-100 disabled:cursor-not-allowed"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:lt?"Button ID cannot be changed":"Unique identifier (lowercase, underscores only)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Label *"}),c.jsx("input",{type:"text",value:xe.label,onChange:S=>Je({...xe,label:S.target.value}),placeholder:"CUSTOM GALLERY",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Google Drive Folder ID *"}),c.jsx("input",{type:"text",value:xe.folder_id,onChange:S=>Je({...xe,folder_id:S.target.value}),placeholder:"1nkaUS4tu2UIX9yD1x3T-6NI0DQK6L8-U",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition font-mono text-sm"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"From Google Drive folder URL (the part after /folders/)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Order Index"}),c.jsx("input",{type:"number",value:xe.order_index,onChange:S=>Je({...xe,order_index:parseInt(S.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first in sidebar"})]}),c.jsx("div",{className:"flex items-center pt-6",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:xe.is_enabled,onChange:S=>Je({...xe,is_enabled:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Enable this button"})]})})]}),c.jsxs("div",{className:"flex gap-3 mt-8",children:[c.jsx("button",{onClick:P,disabled:ne,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Saving..."]}):"Save Button"}),c.jsx("button",{onClick:()=>Et(!1),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Sidebar Menu Configuration"}),c.jsx("p",{className:"text-gray-600",children:"Manage custom sidebar buttons and their Google Drive folders"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:dt,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(di,{size:18}),"Refresh"]}),c.jsxs("button",{onClick:Jn,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(ds,{size:18}),"Add Button"]})]})]}),ct.length===0?c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-dashed border-gray-300 p-12 text-center",children:[c.jsx(ds,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No custom buttons configured"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first custom sidebar button to add a new menu item linked to a Google Drive folder"}),c.jsx("button",{onClick:Jn,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Create Button"})]}):c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-100",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(zo,{className:"text-blue-500 mt-0.5 flex-shrink-0",size:20}),c.jsxs("div",{className:"text-sm",children:[c.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Sidebar Menu Info"}),c.jsxs("p",{className:"text-blue-700",children:[c.jsx("strong",{children:"Total Buttons:"})," ",ct.length," |",c.jsx("strong",{className:"ml-2",children:"Enabled:"})," ",ct.filter(S=>S.is_enabled).length," ","|",c.jsx("strong",{className:"ml-2",children:"Disabled:"})," ",ct.filter(S=>!S.is_enabled).length]}),c.jsx("p",{className:"text-blue-600 mt-1 text-xs",children:"Only enabled buttons will appear in the sidebar menu. Changes are reflected immediately."})]})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Order"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Label"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Button ID"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Folder ID"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Status"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:ct.map(S=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full font-bold text-gray-700",children:S.order_index})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("div",{className:"font-semibold text-gray-900",children:S.label})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("code",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-mono",children:S.button_id})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("div",{className:"max-w-xs truncate font-mono text-xs text-gray-600",title:S.folder_id,children:S.folder_id})}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("span",{className:`px-3 py-1.5 text-xs rounded-full font-semibold ${S.is_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.is_enabled?" Enabled":" Disabled"})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(S.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ue(S),className:`p-2 rounded-lg transition ${S.is_enabled?"bg-yellow-100 hover:bg-yellow-200 text-yellow-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:S.is_enabled?"Disable":"Enable",children:S.is_enabled?c.jsx(Na,{size:16}):c.jsx(Ro,{size:16})}),c.jsx("button",{onClick:()=>b(S),className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Edit",children:c.jsx(Pa,{size:16})}),c.jsx("button",{onClick:()=>R(S.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition",title:"Delete",children:c.jsx($s,{size:16})})]})})]},S.id))})]})})]})]})}),f==="panoramas"&&c.jsx("div",{className:"space-y-6",children:Ue?c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Kt?"Edit Panorama":"Add New Panorama"}),c.jsx("button",{onClick:()=>Me(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:c.jsx(Rr,{size:20})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:xt.name,onChange:S=>sn({...xt,name:S.target.value}),placeholder:"Municipal Hall 360",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Order Index"}),c.jsx("input",{type:"number",value:xt.order_index,onChange:S=>sn({...xt,order_index:parseInt(S.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{value:xt.description,onChange:S=>sn({...xt,description:S.target.value}),rows:3,placeholder:"Brief description of this panorama location...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Panorama Image *"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-colors ${xt.image_url?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400"}`,children:xt.image_url?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative inline-block",children:[c.jsx("img",{src:xt.image_url,alt:"Preview",className:"max-h-48 rounded-lg shadow-md mx-auto"}),c.jsx("button",{onClick:()=>sn({...xt,image_url:"",thumbnail_url:""}),className:"absolute -top-2 -right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition",children:c.jsx(Rr,{size:14})})]}),c.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Image uploaded successfully"})]}):c.jsxs("div",{children:[c.jsx(Ao,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600 mb-2",children:yn?"Processing image...":"Click to upload or drag and drop"}),c.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WEBP up to 10MB"}),c.jsx("input",{ref:wr,type:"file",accept:"image/*",onChange:Xe,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:yn})]})}),c.jsx("div",{className:"text-center text-sm text-gray-500",children:" or "}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Or paste image URL"}),c.jsx("input",{type:"url",value:xt.image_url.startsWith("data:")?"":xt.image_url,onChange:S=>sn({...xt,image_url:S.target.value,thumbnail_url:S.target.value}),placeholder:"https://example.com/panorama.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition text-sm"})]})]})]}),c.jsx("div",{className:"flex items-center",children:c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:xt.is_active,onChange:S=>sn({...xt,is_active:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Show in gallery"})]})})]}),c.jsxs("div",{className:"flex gap-3 mt-8",children:[c.jsx("button",{onClick:hn,disabled:ne||yn,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Saving..."]}):"Save Panorama"}),c.jsx("button",{onClick:()=>Me(!1),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Panorama Management"}),c.jsx("p",{className:"text-gray-600",children:"Upload and manage 360 panorama images for the gallery"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),c.jsx("input",{type:"text",placeholder:"Search panoramas...",value:$t,onChange:S=>Dt(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),c.jsxs("select",{value:wn,onChange:S=>xr(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[c.jsx("option",{value:"name",children:"Name"}),c.jsx("option",{value:"created_at",children:"Created Date"}),c.jsx("option",{value:"order_index",children:"Order Index"})]}),c.jsx("button",{onClick:()=>Un(Wt==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:Wt==="asc"?"":""}),c.jsxs("button",{onClick:dt,className:"flex items-center gap-2 px-4 py-2.5 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(di,{size:18}),"Refresh"]}),c.jsxs("button",{onClick:pe,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(ds,{size:18}),"Add Panorama"]})]})]}),Mr.length===0?c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-dashed border-gray-300 p-12 text-center",children:[c.jsx(od,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:$t?"No panoramas found":"No panoramas yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:$t?"Try adjusting your search":"Upload your first 360 panorama image to display in the gallery"}),c.jsx("button",{onClick:pe,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Add First Panorama"})]}):c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-100",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(zo,{className:"text-blue-500 mt-0.5 flex-shrink-0",size:20}),c.jsxs("div",{className:"text-sm",children:[c.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Panorama Gallery Info"}),c.jsxs("p",{className:"text-blue-700",children:[c.jsx("strong",{children:"Total:"})," ",wt.length," |",c.jsx("strong",{className:"ml-2",children:"Active:"})," ",wt.filter(S=>S.is_active).length," |",c.jsx("strong",{className:"ml-2",children:"Hidden:"})," ",wt.filter(S=>!S.is_active).length]}),c.jsx("p",{className:"text-blue-600 mt-1 text-xs",children:"Only active panoramas are visible in the public gallery view."})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:Mr.map(S=>c.jsxs("div",{className:`bg-white rounded-xl shadow-sm border overflow-hidden hover:shadow-md transition-all duration-200 ${S.is_active?"border-gray-200":"border-gray-200 opacity-60"}`,children:[c.jsxs("div",{className:"aspect-video bg-gray-100 relative overflow-hidden",children:[c.jsx("img",{src:S.thumbnail_url||S.image_url,alt:S.name,className:"w-full h-full object-cover",loading:"lazy"}),c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${S.is_active?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:S.is_active?"Active":"Hidden"})}),c.jsx("div",{className:"absolute top-2 left-2",children:c.jsx("span",{className:"px-2 py-1 bg-sky-500 text-white text-xs rounded-full font-bold",children:"360"})})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-1 truncate",children:S.name}),S.description&&c.jsx("p",{className:"text-sm text-gray-500 mb-3 line-clamp-2",children:S.description}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-3",children:[c.jsxs("span",{children:["Order: ",S.order_index]}),c.jsx("span",{children:new Date(S.created_at).toLocaleDateString()})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>an(S),className:`p-2 rounded-lg transition flex-1 flex items-center justify-center gap-1 ${S.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:S.is_active?"Hide":"Show",children:[S.is_active?c.jsx(Na,{size:16}):c.jsx(Ro,{size:16}),c.jsx("span",{className:"text-xs",children:S.is_active?"Hide":"Show"})]}),c.jsx("button",{onClick:()=>Ee(S),className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition flex items-center justify-center",title:"Edit",children:c.jsx(Pa,{size:16})}),c.jsx("button",{onClick:()=>Xt(S.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition flex items-center justify-center",title:"Delete",children:c.jsx($s,{size:16})})]})]})]},S.id))})]})]})}),f==="map_config"&&c.jsx("div",{className:"space-y-6",children:Ct?c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-white/50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:tn?"Edit Map Configuration":"Create New Map Configuration"}),c.jsx("button",{onClick:()=>Nn(!1),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:c.jsx(Rr,{size:20})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Config Name *"}),c.jsx("input",{type:"text",value:st.config_name,onChange:S=>Re({...st,config_name:S.target.value}),placeholder:"default",disabled:!!tn,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition disabled:bg-gray-100"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Default Zoom"}),c.jsx("input",{type:"number",min:"1",max:"20",value:st.default_zoom,onChange:S=>Re({...st,default_zoom:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),c.jsx("textarea",{value:st.description,onChange:S=>Re({...st,description:S.target.value}),rows:2,placeholder:"Configuration description...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Default Center Latitude"}),c.jsx("input",{type:"number",step:"0.000001",value:st.default_center_lat,onChange:S=>Re({...st,default_center_lat:parseFloat(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Default Center Longitude"}),c.jsx("input",{type:"number",step:"0.000001",value:st.default_center_lng,onChange:S=>Re({...st,default_center_lng:parseFloat(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Min Zoom"}),c.jsx("input",{type:"number",min:"1",max:"20",value:st.min_zoom,onChange:S=>Re({...st,min_zoom:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max Zoom"}),c.jsx("input",{type:"number",min:"1",max:"20",value:st.max_zoom,onChange:S=>Re({...st,max_zoom:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Reference Circle Radius (meters)"}),c.jsx("input",{type:"number",value:st.reference_circle_radius,onChange:S=>Re({...st,reference_circle_radius:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Reference Circle Color"}),c.jsx("input",{type:"color",value:st.reference_circle_color,onChange:S=>Re({...st,reference_circle_color:S.target.value}),className:"w-full h-12 px-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max File Size (MB)"}),c.jsx("input",{type:"number",min:"1",max:"100",value:st.max_file_size_mb,onChange:S=>Re({...st,max_file_size_mb:parseInt(S.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tile Layer URL"}),c.jsx("input",{type:"text",value:st.tile_layer_url,onChange:S=>Re({...st,tile_layer_url:S.target.value}),placeholder:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition font-mono text-sm"})]}),c.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",children:[c.jsx("input",{type:"checkbox",checked:st.enable_location_marker,onChange:S=>Re({...st,enable_location_marker:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Enable Location Marker"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",children:[c.jsx("input",{type:"checkbox",checked:st.enable_reference_circle,onChange:S=>Re({...st,enable_reference_circle:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Enable Reference Circle"})]}),c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",children:[c.jsx("input",{type:"checkbox",checked:st.is_active,onChange:S=>Re({...st,is_active:S.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Set as Active Config"})]})]})]}),c.jsxs("div",{className:"flex gap-3 mt-8",children:[c.jsx("button",{onClick:ln,disabled:ne,className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(di,{className:"animate-spin",size:18}),"Saving..."]}):"Save Configuration"}),c.jsx("button",{onClick:()=>Nn(!1),className:"px-5 py-2.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Map Configuration"}),c.jsx("p",{className:"text-gray-600",children:"Configure settings for the Interactive Map component"})]}),c.jsxs("button",{onClick:Yr,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:[c.jsx(ds,{size:18}),"Create Config"]})]}),Ie.length===0?c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-dashed border-gray-300 p-12 text-center",children:[c.jsx(Lo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No map configurations yet"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first map configuration to customize the interactive map"}),c.jsx("button",{onClick:Yr,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors",children:"Create Configuration"})]}):c.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:c.jsx("div",{className:"space-y-4",children:Ie.map(S=>c.jsxs("div",{className:`border rounded-xl p-5 transition-all ${S.is_active?"border-green-300 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:S.config_name}),S.is_active&&c.jsx("span",{className:"px-2.5 py-1 bg-green-500 text-white text-xs rounded-full font-medium",children:"Active"})]}),S.description&&c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>Ot(S),className:`p-2 rounded-lg transition ${S.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-700":"bg-green-100 hover:bg-green-200 text-green-700"}`,title:S.is_active?"Deactivate":"Activate",children:S.is_active?c.jsx(Na,{size:16}):c.jsx(Ro,{size:16})}),c.jsx("button",{onClick:()=>Qt(S),className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition",title:"Edit",children:c.jsx(Pa,{size:16})}),c.jsx("button",{onClick:()=>at(S.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition",title:"Delete",children:c.jsx($s,{size:16})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[c.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Center"}),c.jsxs("p",{className:"font-semibold text-gray-900",children:[Number(S.default_center_lat).toFixed(4),","," ",Number(S.default_center_lng).toFixed(4)]})]}),c.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[c.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Zoom"}),c.jsxs("p",{className:"font-semibold text-gray-900",children:[S.default_zoom," (",S.min_zoom,"-",S.max_zoom,")"]})]}),c.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[c.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Circle Radius"}),c.jsxs("p",{className:"font-semibold text-gray-900",children:[S.reference_circle_radius,"m"]})]}),c.jsxs("div",{className:"bg-white p-3 rounded-lg",children:[c.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Max File Size"}),c.jsxs("p",{className:"font-semibold text-gray-900",children:[S.max_file_size_mb," MB"]})]})]}),c.jsxs("div",{className:"mt-3 flex gap-3 text-xs",children:[S.enable_location_marker&&c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Location Marker"}),S.enable_reference_circle&&c.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:"Reference Circle"}),c.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded",children:S.allowed_file_types.join(", ")})]})]},S.id))})})]})}),f==="settings"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(Df,{className:"text-yellow-500",size:24}),"Theme Settings"]}),c.jsx("div",{className:"space-y-5",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Color Mode"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>Gn("light"),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${Ne==="light"?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:"w-12 h-12 bg-white border border-gray-200 rounded-lg flex items-center justify-center",children:c.jsx(Df,{size:24,className:"text-yellow-500"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-gray-900",children:"Light Mode"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Bright and clean interface"})]})]}),c.jsxs("button",{onClick:()=>Gn("dark"),className:`flex items-center gap-3 p-4 rounded-xl border-2 transition-all ${Ne==="dark"?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("div",{className:"w-12 h-12 bg-gray-800 rounded-lg flex items-center justify-center",children:c.jsx(k0,{size:24,className:"text-indigo-300"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"font-semibold text-gray-900",children:"Dark Mode"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Reduced eye strain in low light"})]})]})]})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(Ia,{className:"text-blue-500",size:24}),"Application Configuration"]}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Application Name"}),c.jsx("input",{type:"text",defaultValue:le.app_config?.appName||"MDRRMO Pio Duran Dashboard",disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"})]}),c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(di,{className:"text-blue-600",size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Offline Sync"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Coming soon in future updates"})]}),c.jsx("div",{className:"ml-auto",children:c.jsxs("div",{className:"relative inline-block w-12 h-6",children:[c.jsx("input",{type:"checkbox",className:"opacity-0 w-0 h-0 peer",disabled:!0}),c.jsx("span",{className:"absolute cursor-pointer top-0 left-0 right-0 bottom-0 bg-gray-300 rounded-full transition peer-checked:bg-blue-500 peer-disabled:bg-gray-200"}),c.jsx("span",{className:"absolute h-4 w-4 bg-white rounded-full left-1 top-1 transition peer-checked:translate-x-6 peer-disabled:bg-gray-300"})]})})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[c.jsx(qp,{className:"text-purple-500",size:24}),"Role-Based Access Control"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600",children:"Configure user roles and permissions for different access levels"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:le.roles&&Object.entries(le.roles).map(([S,ce])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[c.jsx("h4",{className:"font-bold text-gray-900 capitalize mb-3",children:S}),c.jsx("div",{className:"space-y-2",children:ce.length>0?ce.map(Ce=>c.jsx("span",{className:"inline-block px-2.5 py-1 bg-blue-100 text-blue-700 text-xs rounded font-medium mr-1 mb-1",children:Ce.replace(/_/g," ")},Ce)):c.jsx("span",{className:"text-gray-500 text-sm",children:"No permissions assigned"})})]},S))}),c.jsx("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-100",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(zo,{className:"text-purple-500 mt-0.5 flex-shrink-0",size:20}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-purple-900",children:"RBAC Feature Coming Soon"}),c.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Advanced role-based access control will be available in the next major update."})]})]})})]})]})]})]})})]}):c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c.jsx("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/50 max-w-md",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Ws,{className:"w-8 h-8 text-red-500"})}),c.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Access Denied"}),c.jsx("p",{className:"mb-4 text-gray-600",children:h?"You must be logged in to access the admin panel.":"Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your environment."}),c.jsx("div",{className:"flex justify-center gap-3",children:c.jsx("button",{onClick:()=>d?.("login"),className:"px-5 py-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg","data-testid":"button-go-to-login",children:"Go to Login"})})]})})})}function Hf({onBack:d,onSuccess:r}){const{signIn:s,signUp:l,isConfigured:h}=Fo(),[f,g]=ae.useState(!0),[_,w]=ae.useState(""),[C,N]=ae.useState(""),[z,B]=ae.useState(""),[F,V]=ae.useState(""),[H,W]=ae.useState(!1),[le,_e]=ae.useState(""),Q=async ge=>{if(ge.preventDefault(),V(""),_e(""),!h){V("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your environment.");return}if(!_||!C){V("Please fill in all fields");return}if(!f&&C!==z){V("Passwords do not match");return}if(C.length<6){V("Password must be at least 6 characters");return}W(!0);try{if(f){const{error:be}=await s(_,C);be?V(be.message):r()}else{const{error:be}=await l(_,C);be?V(be.message):(_e("Account created! Please check your email to verify your account."),g(!0))}}catch{V("An unexpected error occurred")}finally{W(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-pink-800 p-4",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl p-8 border border-white/20",children:[c.jsxs("button",{onClick:d,className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors mb-6","data-testid":"button-back",children:[c.jsx(w0,{className:"w-4 h-4"}),"Back to Home"]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mb-4",children:f?c.jsx(Af,{className:"w-8 h-8 text-white"}):c.jsx(Bf,{className:"w-8 h-8 text-white"})}),c.jsx("h1",{className:"text-2xl font-bold text-white",children:f?"Welcome Back":"Create Account"}),c.jsx("p",{className:"text-white/60 mt-2",children:f?"Sign in to access the admin panel":"Sign up to get started"})]}),!h&&c.jsxs("div",{className:"mb-6 p-4 bg-yellow-500/20 border border-yellow-500/40 rounded-lg flex items-start gap-3",children:[c.jsx(Ia,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-yellow-200 text-sm font-medium",children:"Supabase Not Configured"}),c.jsx("p",{className:"text-yellow-200/70 text-xs mt-1",children:"Add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your environment variables."})]})]}),F&&c.jsxs("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/40 rounded-lg flex items-center gap-3",children:[c.jsx(Ws,{className:"w-5 h-5 text-red-400"}),c.jsx("p",{className:"text-red-200 text-sm",children:F})]}),le&&c.jsxs("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/40 rounded-lg flex items-center gap-3",children:[c.jsx(Ws,{className:"w-5 h-5 text-green-400"}),c.jsx("p",{className:"text-green-200 text-sm",children:le})]}),c.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(S0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),c.jsx("input",{type:"email",value:_,onChange:ge=>w(ge.target.value),placeholder:"you@example.com",className:"w-full bg-white/10 border border-white/20 rounded-lg py-3 pl-10 pr-4 text-white placeholder-white/40 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20 transition-all","data-testid":"input-email"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Rf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),c.jsx("input",{type:"password",value:C,onChange:ge=>N(ge.target.value),placeholder:"Enter your password",className:"w-full bg-white/10 border border-white/20 rounded-lg py-3 pl-10 pr-4 text-white placeholder-white/40 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20 transition-all","data-testid":"input-password"})]})]}),!f&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Confirm Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Rf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),c.jsx("input",{type:"password",value:z,onChange:ge=>B(ge.target.value),placeholder:"Confirm your password",className:"w-full bg-white/10 border border-white/20 rounded-lg py-3 pl-10 pr-4 text-white placeholder-white/40 focus:outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20 transition-all","data-testid":"input-confirm-password"})]})]}),c.jsx("button",{type:"submit",disabled:H||!h,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white font-semibold py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 focus:outline-none focus:ring-2 focus:ring-blue-400/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-testid":"button-submit",children:H?c.jsxs(c.Fragment,{children:[c.jsx(uu,{className:"w-5 h-5 animate-spin"}),f?"Signing in...":"Creating account..."]}):c.jsxs(c.Fragment,{children:[f?c.jsx(Af,{className:"w-5 h-5"}):c.jsx(Bf,{className:"w-5 h-5"}),f?"Sign In":"Create Account"]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:()=>{g(!f),V(""),_e("")},className:"text-white/60 hover:text-white text-sm transition-colors","data-testid":"button-toggle-mode",children:f?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})})}const ad={panorama:{id:"panorama",title:"Panorama Gallery",folderId:"1nkaUS4tu2UIX9yD1x3T-6NI0DQK6L8-U",type:"drive"},basemap:{id:"basemap",title:"Base Map Gallery",folderId:"1kUGw4LGoyQqpxfQofPWyXRf1546eAibn",type:"drive"},elevation:{id:"elevation",title:"Elevation Map Gallery",folderId:"",type:"photos",sharedLink:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8"},evacuation:{id:"evacuation",title:"Evacuation Gallery",folderId:"",type:"photos",sharedLink:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8"},hazards:{id:"hazards",title:"Hazards Gallery",folderId:"",type:"photos",sharedLink:"https://photos.app.goo.gl/cgKzq3foeL54wdsB8"},purok:{id:"purok",title:"Purok Boundary Maps",folderId:"1XLA91HwmfO_mvrQx4t_4C7GbEwMDst-J"},barangay:{id:"barangay",title:"Barangay Boundary Maps",folderId:"1XLA91HwmfO_mvrQx4t_4C7GbEwMDst-J"},municipal:{id:"municipal",title:"Municipal Boundary Maps",folderId:"1XLA91HwmfO_mvrQx4t_4C7GbEwMDst-J"},interactive:{id:"interactive",title:"Interactive Maps",folderId:"1XLA91HwmfO_mvrQx4t_4C7GbEwMDst-J"}};async function Wf(){try{const d=await fetch("/api/sidebar-buttons");if(d.ok){const r=await d.json(),s={};return r.buttons?.forEach(l=>{l.is_enabled&&(s[l.button_id]={id:l.button_id,title:l.label,folderId:l.folder_id})}),{...ad,...s}}}catch(d){console.error("Failed to load custom folders:",d)}return ad}function F0(){const{user:d,loading:r}=Fo(),[s,l]=ae.useState("panorama"),[h,f]=ae.useState(!1),[g,_]=ae.useState(ad),[w,C]=ae.useState(0),[N,z]=ae.useState([]);ae.useEffect(()=>{(async()=>{try{const le=await fetch("/api/sidebar-buttons");if(le.ok){const Q=((await le.json()).buttons||[]).filter(ge=>ge.is_enabled).sort((ge,be)=>ge.order_index-be.order_index);z(Q)}}catch(le){console.error("Failed to fetch custom buttons:",le)}})()},[w]),ae.useEffect(()=>{Wf().then(_)},[w]);const B=W=>{l(W),W!=="purok"&&W!=="barangay"&&W!=="municipal"&&f(!1)},F=()=>{f(!h)},V=()=>{if(s==="login")return c.jsx(Hf,{onBack:()=>B("panorama"),onSuccess:()=>B("admin")});if(s==="admin")return d?null:c.jsx(Hf,{onBack:()=>B("panorama"),onSuccess:()=>B("admin")});if(s==="interactive")return c.jsx(D0,{});if(s==="panorama")return c.jsx(L0,{title:"360 Panorama Gallery",useSupabase:!0});const W=N.find(_e=>_e.button_id===s);if(W)return c.jsx(Ff,{folderId:W.source_type==="drive"?W.folder_id:void 0,sharedLink:W.source_type==="photos"?W.folder_id:void 0,type:W.source_type||"drive",title:W.label});const le=g[s];return le?c.jsx(Ff,{folderId:le.folderId,title:le.title,type:le.type,sharedLink:le.sharedLink}):c.jsx("div",{className:"w-full h-full bg-white/40 backdrop-blur-md rounded-3xl shadow-2xl p-8 border border-white/50 flex items-center justify-center",children:c.jsx("p",{className:"text-[#1a1a2e] text-xl font-semibold",children:"Select a view from the sidebar"})})};if(r)return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-pink-400 to-sky-500 flex items-center justify-center",children:c.jsx("div",{className:"text-white text-xl",children:"Loading..."})});if(s==="login"||s==="admin"&&!d)return V();const H=()=>{C(W=>W+1),Wf().then(_)};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-pink-400 to-sky-500",children:[c.jsx(N0,{activeView:s,onNavigate:B,isBoundaryOpen:h,onToggleBoundary:F,refreshTrigger:w,customButtons:N}),c.jsxs("div",{className:"ml-64 min-h-screen flex flex-col",children:[c.jsx(T0,{activeView:s,onNavigate:B}),c.jsx("main",{className:"flex-1 p-8",children:c.jsx("div",{className:"h-full min-h-[calc(100vh-8rem)]",children:s==="admin"&&d?c.jsx(U0,{onNavigate:B,onSidebarUpdate:H}):V()})})]})]})}function $0(){return c.jsx(m0,{children:c.jsx(F0,{})})}Bm.createRoot(document.getElementById("root")).render(c.jsx(ae.StrictMode,{children:c.jsx($0,{})}));
